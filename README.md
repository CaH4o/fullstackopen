# Full Stack | University of Helsinki

### Discription

This repositoroy for assignements of the course Full Stack Web Development, Open Uni: Full Stack Web Development.

Parts:

- Parts 0-5 (core course) - Full Stack Web Development (5 cr, CSM141081)
- Part 6 - Full Stack Web Development, extension 1 (1 cr, CSM141082)
- Part 7 - Full Stack Web Development, extension 2 (1 cr, CSM141083)
- Part 8 - Full Stack Web Development: GraphQL (1 cr, CSM14113)
- Part 9 - Full Stack Web Development: TypeScript (1 cr, CSM14110)
- ~~Part 10 - Full Stack Web Development: React Native (2 cr, CSM14111)~~
- ~~Part 11 - Full Stack Web Development: Continuous Integration / Continuous Delivery (1 cr, CSM14112)~~
- ~~Part 12 - Full Stack Web Development: Containers (1 cr, CSM141084)~~
- ~~Part 13 - Full Stack Web Development: Relational databases (1 cr, CSM14114)~~

### Links:

About course: https://www.helsinki.fi/en/admissions-and-education/open-university/multidisciplinary-themed-modules/full-stack

Platform: https://fullstackopen.com/en/

[Full Stack -web development project 5, 7 or 10 credits](https://github.com/fullstack-hy2020/misc/blob/master/project.md)

---

## Part 0: [Fundamentals of Web apps](https://fullstackopen.com/en/part0)

### Sub-part A: [General info](https://fullstackopen.com/en/part0/general_info)

<details>
<summary>Links:</summary>
<li><a href="https://en.wikipedia.org/wiki/Mastery_learning" title="Mastery Learning">Mastery learning</a></li>
<li><a href="https://studies.cs.helsinki.fi/stats/courses/fullstackopen" title="Submission system">Submission system</a></li>
<li><a href="https://study.cs.helsinki.fi/discord/join/fullstack" title="Discord">Course channel in Telegram</a></li>
<li><a href="https://t.me/fullstackcourse" title="Telegram">Course channel in Telegram</a></li>
<li><a href="https://fullstackopen.com/en/part0/general_info#parts-and-completion" title="Parts and completion">Parts and completion</a></li>
<li><a href="https://www.google.com/chrome/" title="Chrome browser">Using the Chrome browser</a></li>
<li><a href="https://www.mozilla.org/en-US/firefox/developer/" title="Developer Edition of Firefox">alternative Chrome is the Developer Edition of Firefox</a></li>
<li><a href="https://product.hubspot.com/blog/git-and-github-tutorial-for-beginners" title="Git and GitHub tutorial for beginners">Git must be installed and you should know how to use it. Git and GitHub tutorial for beginners</a></li>
<li><a href="https://code.visualstudio.com/" title="Visual Studio Code">Install a sensible text editor that supports web development. Visual Studio Code</a></li>
<li><a href="https://nodejs.org/en" title="Node.js">Node.js (version 18.13.0)</a></li>
<li><a href="https://nodejs.org/en/download/package-manager" title="Node.js installation instructions">Node.js installation instructions</a></li>
<li><a href="https://docs.npmjs.com/getting-started" title="Node.js: npm">Node package manager npm</a></li>
<li><a href="https://www.npmjs.com/package/npx" title="Node.js: npx">Node.js, command npx</a></li>
<li><a href="https://github.com/fullstack-hy2020/fullstack-hy2020.github.io" title="Materials on GitHub">Course material in the repository on GitHub</a></li>
<li><a href="https://github.com/fullstack-hy2020/fullstack-hy2020.github.io/blob/source/src/content/0/en/part0.md" title="Materials on GitHub Part0">Course material in the repository on GitHub Part 0</a></li>
</details>

<details>
<summary>Commands</summary>

> npm install -g npx

</details>

### Sub-part B: [Fundamentals of Web apps](https://fullstackopen.com/en/part0/fundamentals_of_web_apps)

<details>
<summary>Links:</summary>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" title="HTTP protocol">The server and the web browser communicate with each other using the HTTP protocol</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET" title="GET request method">GET request method</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" title="Status code">Status code</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" title="Request and the server response headers">Request and the server response headers</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" title="Content-Type of a header">Content-Type of a header</a></li>
<li><a href="https://en.wikipedia.org/wiki/HTML" title="HyperText Markup Language or HTML">HyperText Markup Language or HTML</a></li>
<li><a href="https://fullstackopen.com/en/part0/fundamentals_of_web_apps#exercises-0-1-0-6" title="Sequence diagram">Sequence diagram</a></li>
<li><a href="https://spring.io/projects/spring-framework" title="Java Spring">A server can be created using Java Spring</a></li>
<li><a href="https://flask.palletsprojects.com/en/2.2.x/" title="Python Flask">A server can be created using Python Flask</a></li>
<li><a href="https://rubyonrails.org/" title="Ruby on Rails">A server can be created using Ruby on Rails</a></li>
<li><a href="https://expressjs.com/" title="Express library with Node.js">A server can be created using Express library with Node.js</a></li>
<li><a href="https://en.wikipedia.org/wiki/JSON" title="JSON">JSON</a></li>
<li><a href="https://chrome.google.com/webstore/detail/jsonvue/chklaanhfefbnpoihckbnefhakgolnmc" title="JSONVue on Chrome">JSONVue on Chrome</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState" title="XMLHttpReques, readyState">XMLHttpReques, readyState</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" title="Callback function">Callback function</a></li>
<li><a href="https://en.wikipedia.org/wiki/Document_Object_Model" title="Document Object Model, or DOM">Document Object Model, or DOM</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS" title="CSS">CSS</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors" title="Class selectors">Class selectors</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class" title="Class attributes">Class attributes</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" title="POST request method">POST request method</a></li>
<li><a href="https://en.wikipedia.org/wiki/URL_redirection" title="URL redirection">URL redirection</a></li>
<li><a href="Asynchronous JavaScript and XML" title="AJAX (Asynchronous JavaScript and XML)">AJAX (Asynchronous JavaScript and XML)</a></li>
<li><a href="SPA" title="Single-page application (SPA)">Single-page application (SPA)</a></li>
<li><a href="https://www.freecodecamp.org/news/is-vanilla-javascript-worth-learning-absolutely-c2c67140ac34/" title="Vanilla JavaDcript">Vanilla JavaDcript</a></li>
<li><a href="https://jquery.com/" title="jQuery">jQuery</a></li>
<li><a href="https://backbonejs.org/" title="BackboneJS">BackboneJS</a></li>
<li><a href="https://angularjs.org/" title="AngularJS">AngularJS</a></li>
<li><a href="https://react.dev/" title="React library">React library</a></li>
<li><a href="https://github.com/reduxjs/redux" title="Redux library">Redux library</a></li>
<li><a href="https://vuejs.org/" title="VueJS">VueJS</a></li>
<li><a href="https://en.wikipedia.org/wiki/Frontend_and_backend" title="Frontend and backend">Frontend and backend</a></li>
<li><a href="https://nodejs.org/en" title="Node.js">Node.js</a></li>
</details>

<details>
<summary>Ð¡ommands and fragments</summary>

Open Developer Console in Chrome

> windows: fn-F12
> macOS: option-cmd-i

To refresh a webpage

> windows: fn-F5
> macOS: command-R

HTML index

```html
<!DOCTYPE html>
<html>
  <head> </head>
  <body>
    <div class="container"></div>
  </body>
</html>
```

output on the console

> console.log("object")

http request

```javascript
var xhttp = new XMLHttpRequest();

xhttp.onreadystatechange = function () {
  // code that takes care of the server response
};

xhttp.open('GET', '/data.json', true);
xhttp.send();
```

teg manipulation

```javascript
var ul = document.createElement('ul');
ul.setAttribute('class', 'notes');
var li = document.createElement('li');
li.appendChild(document.createTextNode('some text'));
ul.appendChild(li);
document.getElementById('root').appendChild(ul);

list = document.getElementsByTagName('ul')[0];
```

JSON parsing

> JSON.parse()

Array methodes

> .forEach()
> .push()

</details>

### Exercises:

#### 0.1: HTML

Review the basics of HTML by reading this tutorial from Mozilla: [HTML tutorial](https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics).
This exercise is not submitted to GitHub, it's enough to just read the tutorial

#### 0.2: CSS

Review the basics of CSS by reading this tutorial from Mozilla: [CSS tutorial](https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics).
This exercise is not submitted to GitHub, it's enough to just read the tutorial

#### 0.3: HTML forms

Learn about the basics of HTML forms by reading Mozilla's tutorial [Your first form](https://developer.mozilla.org/en-US/docs/Learn/Forms/Your_first_form).
This exercise is not submitted to GitHub, it's enough to just read the tutorial

#### 0.4: New note diagram

https://github.com/CaH4o/fullstackopen/issues/1
Create a similar diagram depicting the situation where the user creates a new note on the page https://studies.cs.helsinki.fi/exampleapp/notes by writing something into the text field and clicking the submit button.

If necessary, show operations on the browser or on the server as comments on the diagram.

[Creating Mermaid diagrams](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams)
[Examples](https://github.com/mermaid-js/mermaid#sequence-diagram-docs---live-editor)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/issues/1)

#### 0.5: Single page app diagram

Create a diagram depicting the situation where the user goes to the single-page app version of the notes app at https://studies.cs.helsinki.fi/exampleapp/spa.

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/issues/2)

#### 0.6: New note in Single page app diagram

Create a diagram depicting the situation where the user creates a new note using the single-page version of the app.

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/issues/3)

---

## Part 1: [Introduction to React](https://fullstackopen.com/en/part1)

### Sub-part A: [Introduction to React](https://fullstackopen.com/en/part1/introduction_to_react)

<details>
<summary>Links:</summary>

<li><a href="https://react.dev/" title="React">React</a></li>
<li><a href="https://github.com/facebook/create-react-app" title="create-react-app">create-react-app</a></li>
<li><a href="https://vitejs.dev/" title="Vite">Vite</a></li>
<li><a href="https://react.dev/learn/your-first-component" title="React: component">React: component</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" title="React: Arrow function">React: Arrow function</a></li>
<li><a href="http://es6-features.org/#Constants" title="ECMAScript 6">ECMAScript 6</a></li>
<li><a href="https://react.dev/learn/writing-markup-with-jsx" title="Writing Markup with JSX">Writing Markup with JSX</a></li>
<li><a href="https://babeljs.io/" title="Babel">Babel</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/XML/XML_introduction" title="XML">XML</a></li>
<li><a href="https://react.dev/learn/passing-props-to-a-component" title="React: props">React: props</a></li>
<li><a href="https://react.dev/reference/react/Fragment" title="React: fragments">React: fragments</a></li>

</details>

### Sub-part B: [JavaScript](https://fullstackopen.com/en/part1/java_script)

<details>
<summary>Links:</summary>

<li><a href="https://en.wikipedia.org/wiki/ECMAScript" title="ECMAScript">ECMAScript</a></li>
<li><a href="https://jsbin.com/?js,console" title="JS Bin">JS Bin</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" title="JavaScript: let">JavaScript: let</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const" title="JavaScript: const">JavaScript: const</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var" title="JavaScript: var">JavaScript: var</a></li>
<li><a href="https://medium.com/podiihq/javascript-variables-should-you-use-let-var-or-const-394f7645c88f" title="Javascript variables: should you use let, var or const?">Javascript variables: should you use let, var or const?</a></li>
<li><a href="https://www.jstips.co/en/javascript/keyword-var-vs-let/" title="Variable Hoisting">Variable Hoisting</a></li>
<li><a href="https://youtu.be/sjyJBL5fkp8" title="var: let and const">var: let and const</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" title="JavaScript: Array">JavaScript: Array</a></li>
<li><a href="https://en.wikipedia.org/wiki/Immutable_object" title="Immutable">Immutable</a></li>
<li><a href="" title="JavaScript: Array.forEach()">JavaScript: Array.forEach()</a></li>
<li><a href="" title="JavaScript: Array.push()">JavaScript: Array.push()</a></li>
<li><a href="" title="JavaScript: Array.concat()">JavaScript: Array.concat()</a></li>
<li><a href="" title="JavaScript: Array.map()">JavaScript: Array.map()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" title="JavaScript: Destructuring assignment">JavaScript: Destructuring assignment</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#object_literals" title="object literals">object literals</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function" title="JavaScript: function declaration">JavaScript: function declaration</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function" title="JavaScript: function expression">JavaScript: function expression</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" title="JavaScript: this">JavaScript: this</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Global_object" title="JavaScript: Global object">JavaScript: Global object</a></li>
<li><a href="" title="JavaScript: setTimeout()">JavaScript: setTimeout()</a></li>
<li><a href="" title="JavaScript: bind()">JavaScript: bind()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes" title="JavaScript: Classes">JavaScript: Classes</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures" title="JavaScript: data types and data structures">JavaScript: data types and data structures</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" title="Mozilla's JavaScript Guide">Mozilla's JavaScript Guide</a></li>
<li><a href="JS" title="Mozilla's JavaScript (JS) tutorial">Mozilla's JavaScript (JS) tutorial</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS" title="Free book series 'You-Dont-Know-JS'">Free book series "You-Dont-Know-JS"</a></li>
<li><a href="https://javascript.info/" title="The Modern JavaScript Tutorial">The Modern JavaScript Tutorial</a></li>
<li><a href="https://eloquentjavascript.net/" title="The free and highly engaging book Eloquent 'JavaScript'">The free and highly engaging book Eloquent "JavaScript"</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLlasXeu85E9cQ32gLCvAvr9vNaUccPVNP" title="Namaste JavaScript - free JavaScript video tutorial">Namaste JavaScript - free JavaScript video tutorial</a></li>
<li><a href="https://egghead.io/" title="Plenty of quality screencasts on JavaScript, React, and other interesting topics">Plenty of quality screencasts on JavaScript, React, and other interesting topics</a></li>

</details>

### Sub-part C: [Component state, event handlers](https://fullstackopen.com/en/part1/component_state_event_handlers)

<details>
<summary>Links:</summary>

<li><a href="" title="JavaScript: setInterval()">JavaScript: setInterval()</a></li>
<li><a href="https://react.dev/learn/state-a-components-memory" title="React: state hook">React: state hook</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button" title="HTML: button">HTML: button</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent" title="Mouse Event">Mouse Event</a></li>
<li><a href="https://react.dev/learn/responding-to-events" title="React: Responding to Events">React: Responding to Events</a></li>
<li><a href="https://react.dev/learn/sharing-state-between-components" title="React: Sharing State Between Components">React: Sharing State Between Components</a></li>
<li><a href="https://react.dev/learn/tutorial-tic-tac-toe" title="React: Tic-Tac-Toe tutorial">React: Tic-Tac-Toe tutorial</a></li>
<li><a href="" title="React: useState()">React: useState()</a></li>

</details>

### Sub-part D: [A more complex state, debugging React apps](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps)

<details>
<summary>Links:</summary>

<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" title="JavaScript: object spread">JavaScript: object spread</a></li>
<li><a href="https://react.dev/learn/choosing-the-state-structure" title="React: State structure">React: State structure</a></li>
<li><a href="" title="JavaScript: Array .join()">JavaScript: Array .join()</a></li>
<li><a href="https://react.dev/learn/queueing-a-series-of-state-updates" title="React: state update asynchronously">React: state update asynchronously</a></li>
<li><a href="https://react.dev/learn/conditional-rendering" title="React: conditional rendering">React: conditional rendering</a></li>
<li><a href="https://react.dev/learn/state-a-components-memory" title="React: State: A Component's Memory">React: State: A Component's Memory</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger" title="debugger">debugger</a></li>
<li><a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi" title="React Developer Tools: Chrome extension">React Developer Tools: Chrome extension</a></li>
<li><a href="https://react.dev/learn" title="React documentation">React documentation</a></li>
<li><a href="https://egghead.io/" title="React course on Egghead.io">React course on Egghead.io</a></li>
<li><a href="https://egghead.io/courses/start-learning-react" title="React course on Start learning React">React course on Start learning React</a></li>
<li><a href="https://egghead.io/courses/the-beginner-s-guide-to-react" title="Beginner's Guide to React">Beginner's Guide to React</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Tables/Basics" title="HTML: tables">HTML: tables</a></li>
<li><a href="" title="JavaScript: Math.random()">JavaScript: Math.random()</a></li>
<li><a href="https://developer.mozilla.org/en/" title="JavaScript: search engine on Mozilla Developer Network">JavaScript: search engine on Mozilla Developer Network</a></li>
<li><a href="https://stackoverflow.com/questions/20222501/how-to-create-a-zero-filled-javascript-array-of-arbitrary-length/22209781" title="JavaScript: create 0 filled array">JavaScript: create 0 filled array</a></li>

</details>

### Exercises:

#### 1.1-1.5: Course information

Create the application, which can show information about a course.

Create an application according to the requirements described in [exercise #1.1 - #1.2](https://fullstackopen.com/en/part1/introduction_to_react#exercises-1-1-1-2), [exercise #1.3 - #1.5](https://fullstackopen.com/en/part1/java_script#exercises-1-3-1-5).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part1/courseinfo)

#### 1.6-1.11: Unicafe

Like most companies, the student restaurant of the University of Helsinki Unicafe collects feedback from its customers. Your task is to implement a web application for collecting customer feedback. There are only three options for feedback: good, neutral, and bad.

Create an application according to the requirements described in [exercise #1.6 - #1.11](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps#exercises-1-6-1-14).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part1/unicafe)

#### 1.12-1.14: Anecdotes

The world of software engineering is filled with anecdotes that distill timeless truths from our field into short one-liners.
Expand the application that can display a random anecdote from the field of software engineering. Also user can vote for anecdote.

Create an application according to the requirements described in [exercise #1.12 - #1.14](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps#exercises-1-6-1-14).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part1/anecdotes)

---

## Part 2: [Communicating with server](https://fullstackopen.com/en/part2)

### Sub-part A: [Rendering a collectin, modules](https://fullstackopen.com/en/part2/rendering_a_collection_modules)

<details>
<summary>Links:</summary>

<li><a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets#_creating-your-own-snippets" title="Visual Studio Code: snippets">Visual Studio Code: snippets</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets" title="VS Code plugins: snippet">VS Code plugins: snippet</a></li>
<li><a href="https://marketplace.visualstudio.com/search?term=console.log&target=VSCode&category=All%20categories&sortBy=Relevance" title="VS Code plugins: Console log snippets">VS Code plugins: Console log snippets</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" title="JavaScript: Array">JavaScript: Array</a></li>
<li><a href="" title="Functional Programming in JavaScript">Functional Programming in JavaScript</a></li>
<li><a href="https://youtu.be/BMUiFMZr7vk" title="Higher-order functions">Higher-order functions</a></li>
<li><a href="https://youtu.be/bCqtb-Z5YGQ" title="Map">Map</a></li>
<li><a href="https://youtu.be/Wl98eZpkp-c" title="Reduce basics">Reduce basics</a></li>
<li><a href="" title="JavaScript: Array .map()">JavaScript: Array .map()</a></li>
<li><a href="https://react.dev/learn/rendering-lists#keeping-list-items-in-order-with-key" title="React: items key">React: items key</a></li>
<li><a href="https://react.dev/learn/preserving-and-resetting-state#option-2-resetting-state-with-a-key" title="React: Component key">React: Component key</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" title="React: import">React: import</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" title="React: export">React: export</a></li>
<li><a href="" title="JavaScript: Array .reduce()">JavaScript: Array .reduce()</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=cmstead.js-codeformer" title="VS Code plugins code former snippet">VS Code plugins code former snippet</a></li>

</details>

### Sub-part B: [Forms](https://fullstackopen.com/en/part2/forms)

<details>
<summary>Links:</summary>

<li><a href="https://react.dev/reference/react/useState" title="React: useState">React: useState</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms" title="HTML: Forms">HTML: Forms</a></li>
<li><a href="https://react.dev/learn/responding-to-events" title="Event handlers">Event handlers</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event" title="HTMLFormElement: submit event">HTMLFormElement: submit event</a></li>
<li><a href="https://react.dev/reference/react-dom/components/input#controlling-an-input-with-a-state-variable" title="HTML: input">HTML: input</a></li>
<li><a href="" title="JavaScript: Array .concat()">JavaScript: Array .concat()</a></li>
<li><a href="https://react.dev/learn/updating-objects-in-state#why-is-mutating-state-not-recommended-in-react" title="React: Never mutate state directly">React: Never mutate state directly</a></li>
<li><a href="ternary" title="JavaScript: Conditional (ternary) operator">JavaScript: Conditional (ternary) operator</a></li>
<li><a href="" title="JavaScript: Array .filter()">JavaScript: Array .filter()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness" title="Equality comparisons and sameness">Equality comparisons and sameness</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" title="JavaScript: Array">JavaScript: Array</a></li>
<li><a href="https://www.joshbritz.co/posts/why-its-so-hard-to-check-object-equality/" title="JavaScript: object equality">JavaScript: object equality</a></li>
<li><a href="" title="Web: Window: alert()">Web: Window: alert()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" title="JavaScript: Template literals">JavaScript: Template literals</a></li>

</details>

### Sub-part C: [Getting data from server](https://fullstackopen.com/en/part2/getting_data_from_server)

<details>
<summary>Links:</summary>

<li><a href="https://github.com/typicode/json-server" title="JSON Server">JSON Server</a></li>
<li><a href="https://github.com/typicode/json-server#getting-started" title="JSON Server: install">JSON Server: install</a></li>
<li><a href="https://chrome.google.com/webstore/detail/jsonvue/chklaanhfefbnpoihckbnefhakgolnmc" title="Chrome extentions: JSONVue">Chrome extentions: JSONVue</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" title="API: XMLHttpRequest">API: XMLHttpRequest</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch" title="API: fetch">API: fetch</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="JavaScript: promises">JavaScript: promises</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Event_loop" title="JavaScript: runtime environments">JavaScript: runtime environments</a></li>
<li><a href="https://en.wikipedia.org/wiki/Input/output" title="Input/output">Input/output</a></li>
<li><a href="https://youtu.be/8aGhZQkoFbQ" title="What the heck is the event loop anyway?">What the heck is the event loop anyway?</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" title="API: Web Workers">API: Web Workers</a></li>
<li><a href="https://medium.com/techtrument/multithreading-javascript-46156179cf9a" title="Javascript Multithreading">Javascript Multithreading</a></li>
<li><a href="https://github.com/axios/axios" title="React, library">React, library</a></li>
<li><a href="https://docs.npmjs.com/about-npm" title="About npm">About npm</a></li>
<li><a href="<https://en.wikipedia.org/wiki/Port_(computer_networking" title="Computer networking: Port">Computer networking: Port</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" title="JavaScript: Using promises">JavaScript: Using promises</a></li>
<li><a href="https://react.dev/learn/state-a-components-memory" title="React: state hook">React: state hook</a></li>
<li><a href="https://react.dev/reference/react#effect-hooks" title="React: useEffect">React: useEffect</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect" title="React: useEffect, conditional">React: useEffect, conditional</a></li>

</details>

### Sub-part D: [Altering data in server](https://fullstackopen.com/en/part2/altering_data_in_server)

<details>
<summary>Links:</summary>

<li><a href="https://github.com/typicode/json-server" title="json-server">json-server</a></li>
<li><a href="REST" title="Representational state transfer (REST)">Representational state transfer (REST)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Representational_state_transfer#Applied_to_web_services" title="RESTful APIs">RESTful APIs</a></li>
<li><a href="https://github.com/typicode/json-server#routes" title="Routes">Routes</a></li>
<li><a href="https://www.postman.com/downloads/" title="Postman">Postman</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" title="JavaScript: Template literals">JavaScript: Template literals</a></li>
<li><a href="" title="JavaScript: Array .find()">JavaScript: Array .find()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" title="JavaScript: Spread syntax">JavaScript: Spread syntax</a></li>
<li><a href="https://react.dev/learn/updating-objects-in-state#why-is-mutating-state-not-recommended-in-react" title="React: mutating state">React: mutating state</a></li>
<li><a href="https://en.wikipedia.org/wiki/Object_copying#Shallow_copy" title="Shallow copy">Shallow copy</a></li>
<li><a href="https://en.wikipedia.org/wiki/Single-responsibility_principle" title="Single-responsibility principle">Single-responsibility principle</a></li>
<li><a href="" title="JavaScript: Promise .then()">JavaScript: Promise .then()</a></li>
<li><a href="https://javascript.info/promise-chaining" title="JavaScript: Promise chaining">JavaScript: Promise chaining</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/async%20%26%20performance/ch3.md" title="JavaScript: Book 'You-Dont-Know-JS' promise">JavaScript: Book 'You-Dont-Know-JS' promise</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Property_definitions" title="JavaScript: Object initializer">JavaScript: Object initializer</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" title="JavaScript: using promises">JavaScript: using promises</a></li>
<li><a href="" title="JavaScript: Promise .catch()">JavaScript: Promise .catch()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/alert" title="Web: Window: alert">Web: Window: alert</a></li>
<li><a href="" title="JavaScript: Array .filter()">JavaScript: Array .filter()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm" title="Web: Window: confirm">Web: Window: confirm</a></li>
<li><a href="https://github.com/axios/axios" title="React: axios library">React: axios library</a></li>

</details>

### Sub-part E: [Adding styles to React app](https://fullstackopen.com/en/part2/adding_styles_to_react_app)

<details>
<summary>Links:</summary>

<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics" title="Mozilla's CSS tutorial">Mozilla's CSS tutorial</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/CSS_preprocessor" title="CSS preprocessor">CSS preprocessor</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" title="Different types of CSS selectors">Different types of CSS selectors</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors" title="CSS: Class selectors">CSS: Class selectors</a></li>
<li><a href="https://react.dev/learn#adding-styles" title="React: adding styles">React: adding styles</a></li>
<li><a href="https://react-cn.github.io/react/tips/inline-styles.html" title="React: inline styles">React: inline styles</a></li>
<li><a href="https://react.dev/reference/react-dom/components/common#applying-css-styles" title="React: style attribute">React: style attribute</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes" title="CSS: Pseudo classes">CSS: Pseudo classes</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect" title="React: Conditionally firing an effect">React: Conditionally firing an effect</a></li>
<li><a href="https://www.exchangerate-api.com/" title="Exchange rate API">Exchange rate API</a></li>
<li><a href="https://open.er-api.com/v6/latest/eur" title="currency exchange rates API">currency exchange rates API</a></li>
<li><a href="open API" title="Countires (open API)">Countires (open API)</a></li>
<li><a href="open API" title="Countires (open API): endpoint GET all">Countires (open API): endpoint GET all</a></li>
<li><a href="open API" title="Weather (open API)">Weather (open API)</a></li>
<li><a href="open API" title="Weather (open API): icons">Weather (open API): icons</a></li>
<li><a href="https://create-react-app.dev/docs/adding-custom-environment-variables/" title="Environment variables">Environment variables</a></li>

</details>

### Exercises:

#### 2.1-2.5: Course information

Course information application to show a topics and exercices with logic to render and count the component with conditions.

Create an application according to the requirements described in [exercise #2.1 - #2.5](https://fullstackopen.com/en/part2/rendering_a_collection_modules#exercises-2-1-2-5).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part2/courseinfo)

#### 2.6-2.17: Phone book

Phone book for maintaining persons, use json server for this. Create a single page with a form and buttons to add, update, and remove a person. All code is divided into modules and components. Logc uses axios for data manipulation, rendering hooks, promises, and Windows objects for error handling and user experience. Added some style.

Create an application according to the requirements described in [exercise #2.6 - #2.10](https://fullstackopen.com/en/part2/forms#exercises-2-6-2-10), [exercise #2.11](https://fullstackopen.com/en/part2/getting_data_from_server#exercise-2-11),  
[exercise #2.12 - 2.15](https://fullstackopen.com/en/part2/altering_data_in_server#exercises-2-12-2-15), [exercise #2.16-2.17](https://fullstackopen.com/en/part2/adding_styles_to_react_app#exercises-2-16-2-17).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part2/phonebook)

#### 2.18-2.20: Countries

A single page application for displaying counties. Data is getting from open API services. The user can search for counties by name and browse the county to get all information including whether. Use React, axios library.

Create an application according to the requirements described in [exercise #2.18 - #2.20](https://fullstackopen.com/en/part2/adding_styles_to_react_app#exercises-2-18-2-20).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part2/countries)

---

## Part 3: [Programming a server with NodeJS and Express](https://fullstackopen.com/en/part3)

### Sub-part A: [Node.js and Express](https://fullstackopen.com/en/part3/node_js_and_express)

<details>
<summary>Links:</summary>

<li><a href="https://nodejs.org/en" title="NodeJS">NodeJS</a></li>
<li><a href="https://v8.dev/" title="Google's Chrome V8 JavaScript engine">Google's Chrome V8 JavaScript engine</a></li>
<li><a href="transpiler" title="babel (transpiler)">babel (transpiler)</a></li>
<li><a href="https://docs.npmjs.com/cli/v9/using-npm/scripts" title="npm: scripts">npm: scripts</a></li>
<li><a href="https://nodejs.org/docs/latest-v8.x/api/http.html" title="NodeJS: http">NodeJS: http</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" title="JavaScript: export">JavaScript: export</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" title="JavaScript: import">JavaScript: import</a></li>
<li><a href="https://en.wikipedia.org/wiki/CommonJS" title="Node.js: CommonJS modules">Node.js: CommonJS modules</a></li>
<li><a href="https://nodejs.org/api/esm.html#modules-ecmascript-modules" title="Modules: ECMAScript modules">Modules: ECMAScript modules</a></li>
<li><a href="https://github.com/typicode/json-server" title="json-server">json-server</a></li>
<li><a href="https://expressjs.com/" title="Express">Express</a></li>
<li><a href="https://lexi-lambda.github.io/blog/2016/08/24/understanding-the-npm-dependency-model/" title="Transitive dependencies">Transitive dependencies</a></li>
<li><a href="https://docs.npmjs.com/about-semantic-versioning" title="Semantic versioning">Semantic versioning</a></li>
<li><a href="https://en.wikipedia.org/wiki/Backward_compatibility" title="Backward compatibility">Backward compatibility</a></li>
<li><a href="https://expressjs.com/en/guide/migrating-5.html" title="Moving to Express 5">Moving to Express 5</a></li>
<li><a href="https://expressjs.com/en/4x/api.html#req" title="Express: request">Express: request</a></li>
<li><a href="https://expressjs.com/en/4x/api.html#res" title="Express: response">Express: response</a></li>
<li><a href="" title="Express: response .semd()">Express: response .semd()</a></li>
<li><a href="" title="Express: response .json()">Express: response .json()</a></li>
<li><a href="https://en.wikipedia.org/wiki/JSON" title="JSON">JSON</a></li>
<li><a href="https://nodejs.org/docs/latest-v8.x/api/repl.html" title="NodeJS: Repl">NodeJS: Repl</a></li>
<li><a href="https://github.com/remy/nodemon" title="nodemon">nodemon</a></li>
<li><a href="https://gaearon.github.io/react-hot-loader/getstarted/" title="React Hot Loader">React Hot Loader</a></li>
<li><a href="https://github.com/typicode/json-server#routes" title="json-server: routs">json-server: routs</a></li>
<li><a href="REST" title="Representational State Transfer (REST) architectural style">Representational State Transfer (REST) architectural style</a></li>
<li><a href="https://martinfowler.com/articles/richardsonMaturityModel.html" title="levels of RESTful maturity">levels of RESTful maturity</a></li>
<li><a href="https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" title="REST APIs must be hypertext-driven">REST APIs must be hypertext-driven</a></li>
<li><a href="https://www.oreilly.com/library/view/restful-web-services/9780596529260/" title="Book 'RESTful Web Services'">Book 'RESTful Web Services'</a></li>
<li><a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" title="CRUD API">CRUD API</a></li>
<li><a href="https://en.wikipedia.org/wiki/Resource-oriented_architecture" title="Resource-oriented architecture">Resource-oriented architecture</a></li>
<li><a href="https://expressjs.com/en/guide/routing.html" title="Express: routing">Express: routing</a></li>
<li><a href="http://expressjs.com/en/guide/routing.html#route-parameters" title="Express: routing route-parameters">Express: routing route-parameters</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" title="JavaScript: Number">JavaScript: Number</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-404-not-found" title="status code 404 not found">status code 404 not found</a></li>
<li><a href="" title="Express: response .status()">Express: response .status()</a></li>
<li><a href="" title="Express: response .end()">Express: response .end()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy" title="JavaScript: Truthy">JavaScript: Truthy</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" title="JavaScript: Falsy">JavaScript: Falsy</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-204-no-content" title="status code 204 no content">status code 204 no content</a></li>
<li><a href="https://curl.se/" title="curl">curl</a></li>
<li><a href="https://www.postman.com/" title="Postman">Postman</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=humao.rest-client" title="VS Code REST client plugin">VS Code REST client plugin</a></li>
<li><a href="https://www.jetbrains.com/help/webstorm/http-client-in-product-code-editor.html" title="The WebStorm HTTP Client">The WebStorm HTTP Client</a></li>
<li><a href="https://expressjs.com/en/api.html" title="Express: json-parser">Express: json-parser</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types" title="Multipurpose Internet Mail Extensions or MIME type">Multipurpose Internet Mail Extensions or MIME type</a></li>
<li><a href="https://github.com/Huachao/vscode-restclient/blob/master/README.md#usage" title="VS Code REST client plugin: instructions in the documentation">VS Code REST client plugin: instructions in the documentation</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-400-bad-request" title="status code 400 bad request">status code 400 bad request</a></li>
<li><a href="" title="JavaScript: Math .max()">JavaScript: Math .max()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" title="JavaScript: Spread syntax">JavaScript: Spread syntax</a></li>
<li><a href="middleware" title="Express: request-timestamp (middleware)">Express: request-timestamp (middleware)</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-common-method-properties" title="HTTP standard">HTTP standard</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-head" title="HTTP HEAD">HTTP HEAD</a></li>
<li><a href="https://expressjs.com/en/api.html" title="Express: json-parser">Express: json-parser</a></li>
<li><a href="http://expressjs.com/en/guide/using-middleware.html" title="Express: using middleware">Express: using middleware</a></li>
<li><a href="logger middleware" title="Express: morgan (logger middleware)">Express: morgan (logger middleware)</a></li>
<li><a href="logger middleware" title="Express: morgan - creating new tokens (logger middleware) ">Express: morgan - creating new tokens (logger middleware) </a></li>
<li><a href="" title="JavaScript: JSON .stringify()">JavaScript: JSON .stringify()</a></li>

</details>

### Sub-part B: [Deploying app to internet](https://fullstackopen.com/en/part3/deploying_app_to_internet)

<details>
<summary>Links:</summary>

<li><a href="Cross-Origin Resource Sharing" title="CORS(Cross-Origin Resource Sharing)">CORS(Cross-Origin Resource Sharing)</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" title="Web: CORS">Web: CORS</a></li>
<li><a href="https://www.heroku.com/?" title="Heroku">Heroku</a></li>
<li><a href="https://fly.io/" title="Fly.io">Fly.io</a></li>
<li><a href="https://render.com/" title="Render">Render</a></li>
<li><a href="https://railway.app/" title="Railway">Railway</a></li>
<li><a href="https://www.cyclic.sh/" title="Cyclic">Cyclic</a></li>
<li><a href="https://replit.com/" title="Replit">Replit</a></li>
<li><a href="https://codesandbox.io/" title="CodeSandBox">CodeSandBox</a></li>
<li><a href="https://en.wikipedia.org/wiki/Environment_variable" title="Environment variable">Environment variable</a></li>
<li><a href="https://legacy.reactjs.org/docs/optimizing-performance.html#use-the-production-build" title="React: Use the Production Build">React: Use the Production Build</a></li>
<li><a href="<https://en.wikipedia.org/wiki/Minification_(programming" title="Minification">Minification</a></li>
<li><a href="https://expressjs.com/en/starter/static-files.html" title="Express: middleware static">Express: middleware static</a></li>
<li><a href="https://www.w3.org/TR/WD-html40-970917/htmlweb.html#h-5.1.2" title="Relative URLs">Relative URLs</a></li>
<li><a href="https://www.npmjs.com/package/shx" title="npm Shx">npm Shx</a></li>
<li><a href="https://create-react-app.dev/docs/proxying-api-requests-in-development/" title="React: Proxy">React: Proxy</a></li>
<li><a href="https://github.com/mars/heroku-cra-node" title="create-react-app with a Node server on Heroku">create-react-app with a Node server on Heroku</a></li>
<li><a href="https://github.com/mars/create-react-app-buildpack" title="Heroku Buildpack for create-react-app">Heroku Buildpack for create-react-app</a></li>

</details>

### Sub-part C: [Saving data to MongoDB](https://fullstackopen.com/en/part3/saving_data_to_mongo_db)

<details>
<summary>Links:</summary>

<li><a href="https://tenderlovemaking.com/2016/02/05/i-am-a-puts-debuggerer.html" title="I am a puts debuggerer">I am a puts debuggerer</a></li>
<li><a href="https://swizec.com/blog/javascript-debugging-slightly-beyond-consolelog/" title="debugging console.log">debugging console.log</a></li>
<li><a href="https://code.visualstudio.com/docs/editor/debugging" title="VSCode: debugging">VSCode: debugging</a></li>
<li><a href="http://gettingtolean.com/toyota-principle-5-build-culture-stopping-fix/" title="stopping fix principle">stopping fix principle</a></li>
<li><a href="https://www.mongodb.com/" title="MongoDB">MongoDB</a></li>
<li><a href="https://en.wikipedia.org/wiki/Document-oriented_database" title="Document oriented database">Document oriented database</a></li>
<li><a href="https://en.wikipedia.org/wiki/NoSQL" title="NoSQL">NoSQL</a></li>
<li><a href="https://www.mongodb.com/docs/manual/core/databases-and-collections/" title="MongoDB: collections">MongoDB: collections</a></li>
<li><a href="https://www.mongodb.com/docs/manual/core/document/" title="MongoDB: documents">MongoDB: documents</a></li>
<li><a href="https://www.mongodb.com/atlas/database" title="MongoDB Atlas">MongoDB Atlas</a></li>
<li><a href="https://mongodb.github.io/node-mongodb-native/" title="MongoDB and Node.js">MongoDB and Node.js</a></li>
<li><a href="https://mongoosejs.com/index.html" title="Node.js: mongoosejs library">Node.js: mongoosejs library</a></li>
<li><a href="https://www.mongodb.com/docs/atlas/troubleshoot-connection/#special-characters-in-connection-string-password" title="MongoDB Atlas: password">MongoDB Atlas: password</a></li>
<li><a href="https://mongoosejs.com/docs/guide.html" title="Mongoose: schema">Mongoose: schema</a></li>
<li><a href="https://mongoosejs.com/docs/models.html" title="Mongoose: models">Mongoose: models</a></li>
<li><a href="" title="Mongoose: models.find()">Mongoose: models.find()</a></li>
<li><a href="https://www.mongodb.com/docs/manual/reference/operator/" title="MongoDB: find operators">MongoDB: find operators</a></li>
<li><a href="https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_argv" title="Node.js: process.argv">Node.js: process.argv</a></li>
<li><a href="https://stackoverflow.com/questions/7034848/mongodb-output-id-instead-of-id" title="MongoDB: Modify output">MongoDB: Modify output</a></li>
<li><a href="https://mongoosejs.com/docs/guide.html#options" title="Mongoose: options">Mongoose: options</a></li>
<li><a href="https://mongoosejs.com/docs/guide.html#toJSON" title="Mongoose: toJSON">Mongoose: toJSON</a></li>
<li><a href="" title="Mongoose: toObject()">Mongoose: toObject()</a></li>
<li><a href="" title="Mongoose: transform()">Mongoose: transform()</a></li>
<li><a href="https://nodejs.org/docs/latest-v8.x/api/modules.html" title="Node: modules">Node: modules</a></li>
<li><a href="https://github.com/motdotla/dotenv#readme" title="Node: dotenv">Node: dotenv</a></li>
<li><a href="https://community.fly.io/t/clarification-on-environment-variables/6309" title="fly: dockerignore">fly: dockerignore</a></li>
<li><a href="" title="Mongoose: Model.findById()">Mongoose: Model.findById()</a></li>
<li><a href="https://sentry.io/welcome/" title="Sentry">Sentry</a></li>
<li><a href="https://expressjs.com/en/guide/error-handling.html" title="Express: Error Handling">Express: Error Handling</a></li>
<li><a href="" title="Mongoose: Model .findByIdAndRemove()">Mongoose: Model .findByIdAndRemove()</a></li>
<li><a href="" title="Mongoose: Model .findByIdAndUpdate()">Mongoose: Model .findByIdAndUpdate()</a></li>

</details>

### Sub-part D: [Validation and ESLint](https://fullstackopen.com/en/part3/validation_and_es_lint)

<details>
<summary>Links:</summary>

<li><a href="https://mongoosejs.com/docs/validation.html" title="Mongoose: validation">Mongoose: validation</a></li>
<li><a href="https://mongoosejs.com/docs/validation.html#built-in-validators" title="Mongoose: Built-in validation">Mongoose: Built-in validation</a></li>
<li><a href="https://mongoosejs.com/docs/validation.html#custom-validators" title="Mongoose: Custom validation">Mongoose: Custom validation</a></li>
<li><a href="https://github.com/mongoose-unique-validator/mongoose-unique-validator#find--updates" title="Mongoose: Validation with update">Mongoose: Validation with update</a></li>
<li><a href="<https://en.wikipedia.org/wiki/Lint_(software" title="Lint">Lint</a></li>
<li><a href="https://en.wikipedia.org/wiki/Static_program_analysis" title="Static program analysis">Static program analysis</a></li>
<li><a href="https://checkstyle.sourceforge.io/" title="checkstyle">checkstyle</a></li>
<li><a href="https://eslint.org/" title="ESLint">ESLint</a></li>
<li><a href="https://eslint.org/docs/latest/use/configure/#ignoring-files-and-directories" title="ESLint: ignoring">ESLint: ignoring</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" title="VSCode: eslint">VSCode: eslint</a></li>
<li><a href="https://eslint.org/docs/latest/rules/" title="ESLint: rules">ESLint: rules</a></li>
<li><a href="https://eslint.org/docs/latest/rules/eqeqeq" title="ESLint: the eqeqeq rule">ESLint: the eqeqeq rule</a></li>
<li><a href="https://eslint.org/docs/latest/rules/no-trailing-spaces" title="ESLint: the no trailing spaces rule">ESLint: the no trailing spaces rule</a></li>
<li><a href="https://eslint.org/docs/latest/rules/object-curly-spacing" title="ESLint: the object curly spacing rule ">ESLint: the object curly spacing rule </a></li>
<li><a href="https://eslint.org/docs/latest/use/configure/#configuring-rules" title="ESLint: configuring rules">ESLint: configuring rules</a></li>
<li><a href="https://github.com/airbnb/javascript" title="Airbnb Javascript style guide">Airbnb Javascript style guide</a></li>
<li><a href="https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb" title="Airbnb's ESlint configuration">Airbnb's ESlint configuration</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments</summary>

> fix errors, like example with 'windows' or 'unix' system

```bash
npx eslint . --fix
```

file in a project root for linting rulse

> .eslintrc.js

include the next rules

```javascript
module.exports = {
  'env': {
    'commonjs': true,
    'es2021': true,
    'node': true,
  },
  'extends': 'eslint:recommended',
  'parserOptions': {
    'ecmaVersion': 'latest',
  },
  'rules': {
    'indent': ['error', 2],
    'linebreak-style': ['error', 'unix'],
    'quotes': ['error', 'single'],
    'semi': ['error', 'never'],
    'eqeqeq': 'error',
    'no-trailing-spaces': 'error',
    'object-curly-spacing': ['error', 'always'],
    'arrow-spacing': ['error', { before: true, after: true }],
    'no-console': 0,
  },
};
```

</details>

### Exercises:

#### 3.1-3.22: Phonebook backend

Full stack project **'Phone book'** for maintaining persons, use mongoDB server with back-end and front-end for this. Create a single page with a form and buttons to add, update, and remove a person with REAT API. All front-end code is divided into modules and components. Logc uses axios for data manipulation, rendering hooks, promises, and Windows objects for error handling and user experience. Added some style. Backend use enviroment to hide toket for connetion to database. Created CRUD API for manipulate data. All API tested by requests. Made validation and linting. The app deployed by [this link](https://phonebook-1oyz.onrender.com).

##### REST:

- GET **./info** - get general information.
- GET **./api/persons** - get all persons.
- GET **./api/persons/:id** - get a singl person by id.
- POST **./api/persons** - create a singl person by body.
- PUT **./api/persons/:id** - update a singl person by id.
- DELETE **./api/persons/:id** - delete a singl person by id.

Create an application according to the requirements described in [exercises 3.1-3.6](https://fullstackopen.com/en/part3/node_js_and_express#exercises-3-1-3-6), [exercises 3.7-3.8](https://fullstackopen.com/en/part3/node_js_and_express#exercises-3-7-3-8), [exercises 3.9-3.11](https://fullstackopen.com/en/part3/deploying_app_to_internet#exercises-3-9-3-11), [exercise 3.12](https://fullstackopen.com/en/part3/saving_data_to_mongo_db#exercise-3-12), [exercises 3.13-3.14](https://fullstackopen.com/en/part3/saving_data_to_mongo_db#exercises-3-13-3-14), [exercises 3.15-3.18](https://fullstackopen.com/en/part3/saving_data_to_mongo_db#exercises-3-15-3-18), [exercises 3.19-3.21](https://fullstackopen.com/en/part3/validation_and_es_lint#exercises-3-19-3-21), [exercise 3.22](https://fullstackopen.com/en/part3/validation_and_es_lint#exercise-3-22).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part3/phonebook)

---

## Part 4: [Testing Express servers, user administration](https://fullstackopen.com/en/part4)

### Sub-part A: [Structure of backend application, introduction to testing](https://fullstackopen.com/en/part4/structure_of_backend_application_introduction_to_testing)

<details>
<summary>Links:</summary>

<li><a href="https://www.graylog.org/" title="graylog - external logging service">graylog</a></li>
<li><a href="https://papertrailapp.com/" title="papertrail - external logging service">papertrail</a></li>
<li><a href="https://dev.to/nermineslimane/always-separate-app-and-server-files--1nc7" title="Always separate app and server files !">The best practices in the Express app and the code</a></li>
<li><a href="https://nodejsbestpractices.com/sections/projectstructre/separateexpress/" title="Separate Express 'app' and 'server'">The best practices in the Express app and the code</a></li>
<li><a href="https://expressjs.com/en/api.html#router" title="Router">Express: Router</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" title="Array.prototype.reduce()">JavaScript Array .reduce()</a></li>
<li><a href="https://www.youtube.com/watch?v=BMUiFMZr7vk&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84" title="Functional Javascript">Functional Javascript series on YouTube</a></li>
<li><a href="https://jestjs.io/" title="Jest">Jest - JavaScript Testing Framework</a></li>
<li><a href="https://mochajs.org/" title="Mocha">JavaScript testing libraries Mocha</a></li>
<li><a href="https://jestjs.io/docs/expect#expectvalue" title="Jest: expect function">Jest: .expect() </a></li>
<li><a href="https://jestjs.io/docs/expect#tobevalue
" title="Jest: toBe function">Jest: .toBe()</a></li>
<li><a href="https://jestjs.io/docs/troubleshooting" title="Jest: Troubleshooting">Jest: Troubleshooting</a></li>
<li><a href="https://jestjs.io/docs/api#testonlyname-fn-timeout" title="Jest: test.only()">Jest: test.only function</a></li>
<li><a href="https://jestjs.io/docs/cli" title="Jest CLI Options">Jest: Running tests from the command line</a></li>
<li><a href="https://jestjs.io/docs/expect#toequalvalue" title="Jest toEqual function">Jest: .toEqual()</a></li>
<li><a href="https://lodash.com/" title="Lodash">A modern JavaScript utility library delivering modularity, performance & extras</a></li>
<li><a href="https://lodash.com/docs/4.17.15#chain" title="Lodash chain function">Lodash .chain()</a></li>
<li><a href="https://lodash.com/docs/4.17.15#groupBy" title="Lodash groupBy function">Lodash .groupBy()</a></li>
<li><a href="https://lodash.com/docs/4.17.15#mapValues" title="Lodash mapValues function">Lodash .mapValues()</a></li>
<li><a href="https://lodash.com/docs/4.17.15#transform" title="Lodash transform function">Lodash .transform()</a></li>
<li><a href="https://lodash.com/docs/4.17.15#maxBy" title="Lodash maxBy function">Lodash .maxBy()</a></li>
<li><a href="https://lodash.com/docs/4.17.15#toPairs" title="Lodash toPairs function">Lodash .toPairs()</a></li>
<li><a href="https://lodash.com/docs/4.17.15#sumBy" title="Lodash sumBy function">Lodash .sumBy()</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments</summary>

#### Structure

The backend has the next structure

```
âââ index.js
âââ app.js
âââ build
â   âââ ...
âââ controllers
â   âââ notes.js
âââ models
â   âââ note.js
âââ package-lock.json
âââ package.json
âââ utils
â   âââ config.js
â   âââ logger.js
â   âââ middleware.js
```

The enterpoint with configing and starting a server

> index.js

```javascript
const app = require('./app');
const PORT = require('./utils/config').PORT;
const logger = require('./utils/logger');

app.listen(config.PORT, () => {
  logger.info(`Server running on port ${PORT}`);
});
```

The main app with configing, all settings and connections

> app.js

```javascript
const { MONGODB_URI } = require('./utils/config');
const express = require('express');
const app = express();
const cors = require('cors');
const notesRouter = require('./controllers/notes');
const middleware = require('./utils/middleware');
const logger = require('./utils/logger');
const mongoose = require('mongoose');

mongoose.set('strictQuery', false);

mongoose
  .connect(MONGODB_URI)
  .then(() => {
    logger.info('connected to MongoDB');
  })
  .catch((error) => {
    logger.error('error connecting to MongoDB:', error.message);
  });

app.use(cors());
app.use(express.static('build'));
app.use(express.json());
app.use(middleware.requestLogger);

app.use('/api/notes', notesRouter);

app.use(middleware.unknownEndpoint);
app.use(middleware.errorHandler);

module.exports = app;
```

Controllers folder for control requests on certain API with response on it

> controllers/notes.js

```javascript
const notesRouter = require('express').Router();
const Note = require('../models/note');

notesRouter.get('/', (request, response) => {
  Note.find({}).then((notes) => {
    response.json(notes);
  });
});

notesRouter.get('/:id', (request, response, next) => {
  Note.findById(request.params.id)
    .then((note) => {
      if (note) {
        response.json(note);
      } else {
        response.status(404).end();
      }
    })
    .catch((error) => next(error));
});

notesRouter.post('/', (request, response, next) => {
  const body = request.body;

  const note = new Note({
    content: body.content,
    important: body.important || false,
  });

  note
    .save()
    .then((savedNote) => {
      response.json(savedNote);
    })
    .catch((error) => next(error));
});

notesRouter.delete('/:id', (request, response, next) => {
  Note.findByIdAndRemove(request.params.id)
    .then(() => {
      response.status(204).end();
    })
    .catch((error) => next(error));
});

notesRouter.put('/:id', (request, response, next) => {
  const body = request.body;

  const note = {
    content: body.content,
    important: body.important,
  };

  Note.findByIdAndUpdate(request.params.id, note, { new: true })
    .then((updatedNote) => {
      response.json(updatedNote);
    })
    .catch((error) => next(error));
});

module.exports = notesRouter;
```

Module folder for keeping all modules of data structure

> module/note.js

```javascript
const mongoose = require('mongoose');

const noteSchema = new mongoose.Schema({
  content: {
    type: String,
    required: true,
    minlength: 5,
  },
  important: Boolean,
});

noteSchema.set('toJSON', {
  transform: (document, returnedObject) => {
    returnedObject.id = returnedObject._id.toString();
    delete returnedObject._id;
    delete returnedObject.__v;
  },
});

module.exports = mongoose.model('Note', noteSchema);
```

Utils folder for keeping all nessesery functions and data

> utils/logger.js

```javascript
const info = (...params) => {
  console.log(...params);
};

const error = (...params) => {
  console.error(...params);
};

module.exports = {
  info,
  error,
};
```

> utils/config.js

```javascript
require('dotenv').config();

const PORT = process.env.PORT;
const MONGODB_URI = process.env.MONGODB_URI;

module.exports = {
  MONGODB_URI,
  PORT,
};
```

> utils/middleware.js

```javascript
const logger = require('./logger');

const requestLogger = (request, response, next) => {
  logger.info('Method:', request.method);
  logger.info('Path:  ', request.path);
  logger.info('Body:  ', request.body);
  logger.info('---');
  next();
};

const unknownEndpoint = (request, response) => {
  response.status(404).send({ error: 'unknown endpoint' });
};

const errorHandler = (error, request, response, next) => {
  logger.error(error.message);

  if (error.name === 'CastError') {
    return response.status(400).send({ error: 'malformatted id' });
  } else if (error.name === 'ValidationError') {
    return response.status(400).json({ error: error.message });
  }

  next(error);
};

module.exports = {
  requestLogger,
  unknownEndpoint,
  errorHandler,
};
```

#### Testing

install jest library in a project as development part

```bash
npm install --save-dev jest
```

update package to run test

> package.json

```json
{
  //...
  "scripts": {
    //...
    "test": "jest --verbose"
  }
  //...
}
```

Jest requires one to specify that the execution environment is Node.

> package.json

```json
{
  ...
  "jest": {
    "testEnvironment": "node"
  }
}
```

Add to lint rules file to work with jest

> .eslintrc.js

```javascript
module.exports = {
  'env': {
    //...
    'jest': true,
  },
  // ...

```

Tests and descriptions

> tests/name.test.js

```javascript
describe('description of the block with tests', () => {
  // tests
});
```

```javascript
test('description of the single test', () => {
  expect(true === true).toBe(true);
});
```

#### Lodash library

install Lodash

> npm i -g lodash

> npm i --save lodash

> npm i --save-dev lodash

```javascript
const _ = require('lodash');
const blogs = require('dummy_data').blogs;

const result = _.chain(blogs)
  .groupBy('author')
  .mapValues((blogs) => blogs.length)
  .transform((result, value, key) => {
    return result.push({ 'author': key, 'blogs': value });
  }, [])
  .maxBy('blogs')
  .value();
```

</details>

### Sub-part B: [Testing the backend](https://fullstackopen.com/en/part4/testing_the_backend)

<details>
<summary>Links:</summary>

<li><a href="https://en.wikipedia.org/wiki/Unit_testing" title="Unit testing">Unit testing</a></li>
<li><a href="https://github.com/nodkz/mongodb-memory-server" title="Mongodb memory server">Mongodb memory server</a></li>
<li><a href="https://en.wikipedia.org/wiki/Integration_testing" title="Integration testing">Integration testing</a></li>
<li><a href="https://jestjs.io/docs/cli#--runinband" title="Jest --runInBand">Jest --runInBand</a></li>
<li><a href="https://www.npmjs.com/package/cross-env" title="cross-env">Use cross-env to set environment variables in Windows</a></li>
<li><a href="https://www.mongodb.com/docs/manual/core/inmemory/" title="Mongo DB In-Memory Storage Engine">Mongo DB In-Memory Storage Engine</a></li>
<li><a href="https://www.docker.com/" title="Docker">Docker</a></li>
<li><a href="https://github.com/node-config/node-config" title="node-config">Node-config package</a></li>
<li><a href="https://github.com/ladjs/supertest" title="SuperTest">SuperTest</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" title="Regular Expressions">Regular Expressions</a></li>
<li><a href="https://jestjs.io/docs/asynchronous" title="Jest: asynchronous">Jest: Testing Asynchronous Code</a></li>
<li><a href="https://jestjs.io/docs/api#afterallfn-timeout" title="Jest: afterAll method">Jest: afterAll method</a></li>
<li><a href="https://mongoosejs.com/docs/jest.html" title="Mongoose and Jest">Mongoose documentation does not recommend testing Mongoose applications with Jest.</a></li>
<li><a href="https://jestjs.io/docs/expect#expectvalue" title="Jest: expect">Jest Expect method</a></li>
<li><a href="https://jestjs.io/docs/api#beforeeachfn-timeout" title="Jest: beforeEach method">Jest: beforeEach method</a></li>
<li><a href="https://jestjs.io/docs/setup-teardown" title="Jest: Setup and Teardown">Jest: Setup and Teardown</a></li>
<li><a href="https://jestjs.io/docs/expect#tocontainitem" title="Jest: toContain">Jest toContain method</a></li>
<li><a href="https://jestjs.io/docs/api#testonlyname-fn-timeout" title="Jest: test.only">Jest: run only one tests (if one file)</a></li>
<li><a href="http://callbackhell.com/" title="JavaScript: Callback hell">JavaScript: What is Callback hell</a></li>
<li><a href="https://javascript.info/promise-chaining" title="JavaScript: Promises chaining">JavaScript: Promises chaining</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator" title="JavaScript: Generator">JavaScript: Generator</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/async%20%26%20performance/ch4.md#iterating-generators-asynchronously" title="JavaScript: asynchronous code">JavaScript: clever way of writing asynchronous code in a way that "looks synchronous"</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" title="JavaScript: await">JavaScript: await</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" title="JavaScript: async function">JavaScript: async function</a></li>
<li><a href="https://en.wikipedia.org/wiki/Regression_testing" title="Regression testing">Regression testing</a></li>
<li><a href="https://github.com/davidbanham/express-async-errors" title="ExpressJS Async Errors">ExpressJS Async Errors</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" title="JavaScript: Promise all">JavaScript: Promise all</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" title="JavaScript: for...of">JavaScript: for...of</a></li>
<li><a href="https://jestjs.io/docs/expect#tocontainequalitem" title="Jest: toContainEqual">Jest toContainEqual method</a></li>
<li><a href="https://jestjs.io/docs/expect#tobedefined" title="Jest: toBeDefined">Jest toBeDefined method</a></li>
</details>

<details>
<summary>Ð¡ommands and fragments</summary>

#### NODE_ENV and cross-env

Add execution mode of the application with the NODE_ENV

> package.json

```json
  // ...
  "scripts": {
    "start": "cross-env NODE_ENV=production node index.js",
    "dev": "cross-env NODE_ENV=development nodemon index.js",
    // ...
    "test": "cross-env NODE_ENV=test jest --verbose --runInBand"
  },
  // ...
```

install cross-env to set environment variables in Windows

> npm install cross-env

> npm install --save-dev cross-env

Update confivg and env to use separate database for testing

> config.js

```javascript
const MONGODB_URI =
  process.env.NODE_ENV === 'test'
    ? process.env.TEST_MONGODB_URI
    : process.env.MONGODB_URI;
```

> .env

```javascript
MONGODB_URI=mongodb+srv://user:<password>@cluster0.o1opl.mongodb.net/prodApp?retryWrites=true&w=majority
TEST_MONGODB_URI=mongodb+srv://user:<password>@cluster0.o1opl.mongodb.net/testApp?retryWrites=true&w=majority
```

> utils/logger.js

```javascript
const info = (...params) => {
  if (process.env.NODE_ENV !== 'test') {
    console.log(...params);
  }
};
```

#### SuperTest

Install SuperTest as an npm module and save it to your package.json file as a development dependency

> npm install supertest --save-dev

Cod for testing

> tests/note_api.test.js

```javascript
const mongoose = require('mongoose');
const supertest = require('supertest');
const app = require('../app');
const api = supertest(app);

//...

describe('get blogs after dummy_blogs saved', () => {
  test('successful with status code 200 as json', async () => {
    await api
      .get('/api/blogs')
      .expect(200)
      .expect('Content-Type', /application\/json/);
  });

  test('returned the same length of blogs', async () => {
    const response = await api.get('/api/blogs');
    expect(response.body).toHaveLength(init.listWithManyBlog.length);
  });

  test('there are defined "id" property', async () => {
    const blogsInDb = await helper.blogsInDb();
    expect(blogsInDb[0].id).toBeDefined();
  });
});

describe('post a single blog after dummy_blogs saved', () => {
  //...

  test('the value of likes is as default if without likes', async () => {
    const postBlog = {
      title: 'Blog',
      author: 'Member of Wikipedia',
      url: 'https://en.wikipedia.org/wiki/Blog',
    };

    const response = await api.post('/api/blogs').send(postBlog);
    expect(response.body.likes).toBe(0);
  });

  //...
});

describe('delete a blog after dummy_blogs saved', () => {
  //...

  test('fails with status code 400 if id is invalid', async () => {
    let idBlogToDelete;
    await api.delete(`/api/blogs/${idBlogToDelete}`).expect(400);

    idBlogToDelete = '0000';
    await api.delete(`/api/blogs/${idBlogToDelete}`).expect(400);

    const blogsInDb = await helper.blogsInDb();
    expect(blogsInDb).toHaveLength(init.listWithManyBlog.length);
  });
});

describe('put a blog after dummy_blogs saved', () => {
  //...

  test('successful the put blog still in the DB', async () => {
    const blogsInDb = await helper.blogsInDb();
    const putBlog = {
      title: 'Blog',
      author: 'Member of Wikipedia',
      url: 'https://en.wikipedia.org/wiki/Blog',
      likes: 5,
    };

    await api.put(`/api/blogs/${blogsInDb[0].id}`).send(putBlog);

    const blogsInDbAfterPut = await helper.blogsInDb();
    expect(blogsInDbAfterPut).toHaveLength(init.listWithManyBlog.length);

    const ids = blogsInDbAfterPut.map((b) => b.id);
    expect(ids).toContain(blogsInDb[0].id);
  });

  //...
});

//...
```

add close db connection after all tests

```javascript
afterAll(async () => {
  await mongoose.connection.close();
});
```

JS file with functions to test

> tests/test_helper.js

```javascript
const Note = require('../models/note');

const initialNotes = [
  {
    content: 'HTML is easy',
    important: false,
  },
  //...
];

const notesInDb = async () => {
  const notes = await Note.find({});
  return notes.map((note) => note.toJSON());
};

module.exports = {
  initialNotes,
  notesInDb,
};
```

Update before Ench tests function with Promise.all (can use map for init aray)

> tests/note_api.test.js

```javascript
beforeEach(async () => {
  await Note.deleteMany({});

  const noteObjects = helper.initialNotes.map((note) => new Note(note));
  const promiseArray = noteObjects.map((note) => note.save());
  await Promise.all(promiseArray);
});
```

or

````javascript
beforeEach(async () => {
  await Note.deleteMany({})
  await Note.insertMany(helper.initialNotes)
})



update controller with async and await

```javascript
notesRouter.get('/', async (request, response) => {
  const notes = await Note.find({})
  response.json(notes)
})
````

Test sertan file with tests or test

> npm test -- tests/note_api.test.js

> npm test -- -t "a specific note is within the returned notes"

> npm test -- -t 'notes'

#### Try catch block or ExpressJS Async Errors

Try catch block

```javascript
try {
  // do the async operations here
} catch (exception) {
  next(exception);
}
```

install the ExpressJS Async Errors library

> npm install express-async-errors

update app not to use try catch in routers. No need more use next() and catch errors in router, but need to use a middlwear for catch it futher.

> app.js

```javascript
const express = require('express');
require('express-async-errors');
const app = express();
//...
```

#### Tests:

- get all notes after dummy notes saved in DB

  - successful with status code 200 as json
  - returned the same length of blogs
  - a specific note is within the returned notes
  - there are defined "id" property'

- get a specific/single note by id

  - succeeds with a valid id
  - fails with status code 404 if note does not exist
  - fails with status code 400 if id is invalid

- post a specific/single note after dummy notes saved

  - successful with status code 201 as json
  - successful the same blog is returned
  - successful the post blog is saved in DB
  - successful with status code 201 as json if without specific data
  - successful the value of specific data is as default if without specific data
  - fails with status code 400 if specific data invalid

- delete of a note after dummy notes saved

  - successful with status code 204 if id is valid
  - successful delete in DB
  - fails with status code 404 if id is incorrect
  - fails with status code 400 if id is invalid

- put a note after dummy notes saved
  - successful with status code 200 as json
  - successful the same blog is returned
  - successful the put blog still in the DB
  - fails with status code 404 if id is incorrect
  - fails with status code 400 if id is invalid

</details>

### Sub-part C: [User administration](https://fullstackopen.com/en/part4/user_administration)

<details>
<summary>Links:</summary>
<li><a href="https://www.mongodb.com/docs/manual/reference/operator/aggregation/lookup/" title="Mongo DB: lookup (aggregation)">Mongo DB: lookup (aggregation)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function" title="Cryptographic hash function">Cryptographic hash function</a></li>
<li><a href="https://codahale.com/how-to-safely-store-a-password/" title="How To Safely Store A Password">How To Safely Store A Password</a></li>
<li><a href="https://github.com/kelektiv/node.bcrypt.js/#a-note-on-rounds" title="A Note on Rounds">A Note on Rounds</a></li>
<li><a href="https://en.wikipedia.org/wiki/Test-driven_development" title="Test-driven development">Test-driven development</a></li>
<li><a href="https://www.npmjs.com/package/mongoose-unique-validator" title="Mongoose: unique validator">Mongoose: unique validator</a></li>
<li><a href="https://mongoosejs.com/docs/populate.html" title="Mongoose: populate method">Mongoose: populate method</a></li>
<li><a href="https://www.mongodb.com/docs/manual/tutorial/project-fields-from-query-results/#return-the-specified-fields-and-the-id-field-only" title="Mongoose: populate method - conditions">Mongoose: populate method - conditions</a></li>
</details>

<details>
<summary>Ð¡ommands and fragments</summary>

Add user document schema to models

```javascript
const mongoose = require('mongoose');

const userSchema = new mongoose.Schema({
  username: String,
  name: String,
  passwordHash: String,
  notes: [
    {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'Note',
    },
  ],
});

userSchema.set('toJSON', {
  transform: (document, returnedObject) => {
    returnedObject.id = returnedObject._id.toString();
    delete returnedObject._id;
    delete returnedObject.__v;
    // the passwordHash should not be revealed
    delete returnedObject.passwordHash;
  },
});

const User = mongoose.model('User', userSchema);

module.exports = User;
```

Change schema of the note defined in the models/note.js file

```javascript
//...
const noteSchema = new mongoose.Schema({
  //...
  user: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  }
  //...
```

#### bcrypt for password

install the bcrypt package for generating the password hashes

> npm install bcrypt

Create controller for users routs in file

> controllers/users.js

```javascript
const bcrypt = require('bcrypt');
const usersRouter = require('express').Router();
const User = require('../models/user');

usersRouter.get('/', async (request, response) => {
  const users = await User.find({});
  response.json(users);
});

usersRouter.post('/', async (request, response) => {
  const { username, name, password } = request.body;

  const saltRounds = 10;
  const passwordHash = await bcrypt.hash(password, saltRounds);

  const user = new User({
    username,
    name,
    passwordHash,
  });

  const savedUser = await user.save();

  response.status(201).json(savedUser);
});

module.exports = usersRouter;
```

Add users rout in app.js

> app.js

```javascript
const usersRouter = require('./controllers/users');

// ...

app.use('/api/users', usersRouter);
```

#### mongoose unique validator

install the mongoose-unique-validator library

> npm install mongoose-unique-validator

Update user schema

> models/user.js

```javascript
const mongoose = require('mongoose');
const uniqueValidator = require('mongoose-unique-validator');

const userSchema = mongoose.Schema({
  username: {
    type: String,
    required: true,
    unique: true,
  },
  //...
});

userSchema.plugin(uniqueValidator);

//...
```

Update note controller to post note with user

> controllers/notes.js

```javascript
const User = require('../models/user');

//...

notesRouter.post('/', async (request, response) => {
  const body = request.body;

  const user = await User.findById(body.userId);

  const note = new Note({
    content: body.content,
    important: body.important === undefined ? false : body.important,
    user: user.id,
  });

  const savedNote = await note.save();
  user.notes = user.notes.concat(savedNote._id);
  await user.save();

  response.json(savedNote);
});
```

Update user controller to get all users with full notes array (not only ids) with content only

> controllers/users.js

```javascript
usersRouter.get('/', async (request, response) => {
  const users = await User.find({}).populate('notes', {
    content: 1,
  });

  response.json(users);
});
```

</details>

### Sub-part D: [Token authentication](https://fullstackopen.com/en/part4/token_authentication)

<details>
<summary>Links</summary>
<li><a href="https://www.digitalocean.com/community/tutorials/the-ins-and-outs-of-token-based-authentication#how-token-based-works" title="Token-based authentication">Token-based authentication</a></li>
<li><a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2" title="Status code 401 unauthorized">Status code 401 unauthorized</a></li>
<li><a href="https://github.com/auth0/node-jsonwebtoken" title="node jsonwebtoken">An implementation of JSON Web Tokens.</a></li>
<li><a href="https://jwt.io/" title="JSON web tokens">JSON web tokens</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization" title="_">_</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization" title="Headers, Authorization">Headers, Authorization</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#authentication_schemes" title="Headers, Authorization schemes">Headers, Authorization schemes</a></li>
<li><a href="https://www.npmjs.com/package/express-jwt" title="express-jwt">Express jwt (JSON Web Tokens)</a></li>
<li><a href="https://redis.io/" title="Redis">Redis</a></li>
<li><a href="https://en.wikipedia.org/wiki/HTTPS" title="HTTPS">Hypertext Transfer Protocol Secure (HTTPS)</a></li>
<li><a href="https://nodejs.org/api/https.html" title="Node HTTPS server">Node HTTPS server Node.js v20.3.0 documentation</a></li>
<li><a href="https://nodejs.org/docs/latest-v8.x/api/http.html" title="Node HTTPS server">Node HTTPS server Node.js v8.17.0 Documentation</a></li>
<li><a href="https://www.npmjs.com/package/bcryptjs" title="bcrypt.js">Optimized bcrypt in JavaScript with zero dependencies</a></li>
<li><a href="https://github.com/ladjs/supertest/issues/398" title="Set Authorization header to post request">Set Authorization header to post request</a></li>
</details>

<details>
<summary>Ð¡ommands and fragments</summary>

Install the jsonwebtoken library, which allows us to generate JSON web tokens.

> npm install jsonwebtoken

The code for login functionality goes to the file controllers/login.js.

> controllers/login.js

```javascript
const jwt = require('jsonwebtoken');
const bcrypt = require('bcrypt');
const loginRouter = require('express').Router();
const User = require('../models/user');

loginRouter.post('/', async (request, response) => {
  const { username, password } = request.body;

  const user = await User.findOne({ username });
  const passwordCorrect =
    user === null ? false : await bcrypt.compare(password, user.passwordHash);

  if (!(user && passwordCorrect)) {
    return response.status(401).json({
      error: 'invalid username or password',
    });
  }

  const userForToken = {
    username: user.username,
    id: user._id,
  };

  const token = jwt.sign(userForToken, process.env.SECRET, {
    expiresIn: 60 * 60,
  });

  response
    .status(200)
    .send({ token, username: user.username, name: user.name });
});

module.exports = loginRouter;
```

Update app

> app.js

```javascript
const loginRouter = require('./controllers/login');

//...

app.use('/api/login', loginRouter);
```

Update note router

> controllers/notes.js

```javascript
const jwt = require('jsonwebtoken');

// ...

const getTokenFrom = (request) => {
  const authorization = request.get('authorization');
  if (authorization && authorization.startsWith('Bearer ')) {
    return authorization.replace('Bearer ', '');
  }
  return null;
};

notesRouter.post('/', async (request, response) => {
  const body = request.body;

  const decodedToken = jwt.verify(getTokenFrom(request), process.env.SECRET);
  if (!decodedToken.id) {
    return response.status(401).json({ error: 'token invalid' });
  }
  const user = await User.findById(decodedToken.id);

  const note = new Note({
    content: body.content,
    important: body.important === undefined ? false : body.important,
    user: user._id,
  });

  const savedNote = await note.save();
  user.notes = user.notes.concat(savedNote._id);
  await user.save();

  response.json(savedNote);
});
```

Update middleware

> middleware.js

```javascript
const errorHandler = (error, request, response, next) => {
  logger.error(error.message);

  if (error.name === 'CastError') {
    return response.status(400).send({ error: 'malformatted id' });
  } else if (error.name === 'ValidationError') {
    return response.status(400).json({ error: error.message });
  } else if (error.name === 'JsonWebTokenError') {
    return response.status(401).json({ error: 'invalid token' });
  } else if (error.name === 'TokenExpiredError') {
    return response.status(401).json({ error: 'token expired' });
  }

  next(error);
};
```

Some Windows users have had problems with bcrypt. If you run into problems, remove the library with command and install bcryptjs instead.

> npm uninstall bcrypt

We can create middlewares for extracting token and user

> utils/middleware.js

```js
const jwt = require('jsonwebtoken');

const config = require('./config');
const User = require('../models/user');

const tokenExtractor = (request, response, next) => {
  const authorization = request.get('authorization');

  const token =
    authorization && authorization.startsWith('Bearer ')
      ? authorization.replace('Bearer ', '')
      : null;

  request.body.token = token;

  next();
};

const userExtractor = async (request, response, next) => {
  const decodedToken = jwt.verify(request.body.token, config.SECRET);

  if (!decodedToken.id) {
    return response.status(401).json({ error: 'token invalid' });
  }

  const user = await User.findById(decodedToken.id);

  request.body.token = undefined;
  request.body.user = user;

  next();
};
```

middleware we can add in app, in router or in rout

```js
app.use(userExtractor);

app.use('/api/blogs', userExtractor, blogsRouter);

router.post('/', userExtractor, async (request, response) => {
  // ...
});
```

</details>

### Exercises:

#### 4.1-4.23: Blog list

To building a blog list application (backend), that allows users to save information about interesting blogs they have stumbled across on the internet. For each listed blog we will save the author, title, URL, and amount of upvotes from users of the application.
In the next exercises, the basics of user management will be implemented for the Bloglist application. Tests are provided.

Create an application according to the requirements described in [exercises 4.1-4.2](https://fullstackopen.com/en/part4/structure_of_backend_application_introduction_to_testing#exercises-4-1-4-2), [exercises 4.3-4.7](https://fullstackopen.com/en/part4/structure_of_backend_application_introduction_to_testing#exercises-4-3-4-7), [exercises 4.8-4.12](https://fullstackopen.com/en/part4/testing_the_backend#exercises-4-8-4-12) [exercises 4.13-4.14](https://fullstackopen.com/en/part4/testing_the_backend#exercises-4-13-4-14) [exercises 4.15-4.23](https://fullstackopen.com/en/part4/token_authentication#exercises-4-15-4-23)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part4/bloglist)

## Part 5: [Testing React apps](https://fullstackopen.com/en/part5)

### Sub-part A: [Login in frontend](https://fullstackopen.com/en/part5/login_in_frontend)

<details>
<summary>Links:</summary>

<li><a href="https://legacy.reactjs.org/docs/conditional-rendering.html#inline-if-with-logical--operator" title="React trick">React: Inline If with Logical && Operator</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" title="Falsy">JavaScript: Falsy</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" title="conditional operator">JavaScript: Conditional (ternary) operator</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy" title="Truthy">JavaScript: Truthy</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage" title="Web: local storage">Web: local storage</a></li>
<li><a href="https://en.wikipedia.org/wiki/Key%E2%80%93value_database" title="Keyâvalue database">Keyâvalue database</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem" title="Web: local storage - setItem">Web: local storage - setItem</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/getItem" title="Web: local storage - getItem">Web: local storage - getItem</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/removeItem" title="Web: local storage - removeItem">Web: local storage - removeItem</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Origin" title="Web: Origin">Web: Origin</a></li>
<li><a href="https://docs.w3cub.com/dom/domstring" title="DOMString">A DOMString is a sequence of 16-bit unsigned integers, typically interpreted as UTF-16 code units.</a></li>
<li><a href="https://developer.chrome.com/docs/devtools/" title="Chrome DevTools">Chrome DevTools</a></li>
<li><a href="https://firefox-source-docs.mozilla.org/devtools-user/storage_inspector/index.html" title="Storage Inspector">Storage Inspector</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-effect.html" title="React: Using the Effect Hook">React: Using the Effect Hook</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect" title="React: Using the Effect Hook - conditionally firing">React: Using the Effect Hook - conditionally firing</a></li>
<li><a href="https://owasp.org/www-community/attacks/xss/" title="Cross Site Scripting (XSS) attacks">Cross Site Scripting (XSS) attacks</a></li>
<li><a href="https://legacy.reactjs.org/docs/introducing-jsx.html#jsx-prevents-injection-attacks" title="React: JSX Prevents Injection Attacks">React: JSX Prevents Injection Attacks</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies" title="httpOnly cookies">Using HTTP cookies</a></li>
<li><a href="https://academind.com/tutorials/localstorage-vs-cookies-xss/" title="localstorage vs cookies (xss)">Cookies are not any safer than the use of local storage</a></li>
<li><a href="https://cheatsheetseries.owasp.org/cheatsheets/DOM_based_XSS_Prevention_Cheat_Sheet.html" title="Minimize the risk of XSS attacks altogether">Minimize the risk of XSS attacks altogether</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

After clone the repo, install all dependencies before attempting to run the frontend.

> npm install

add the form and the

> App.js

```js
import loginService from './services/login'
//...
const App = () => {
  //...
  const [username, setUsername] = useState('')
  const [password, setPassword] = useState('')
  const [user, setUser] = useState(null)
  //...
  useEffect(() => {
    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')
    if (loggedUserJSON) {
      const user = JSON.parse(loggedUserJSON)
      setUser(user)
      noteService.setToken(user.token)
    }
  }, [])
  //...
  const handleLogin = (event) => {
    event.preventDefault()
    try {
      const user = await loginService.login({ username, password })
      window.localStorage.setItem('loggedNoteappUser', JSON.stringify(user))
      noteService.setToken(user.token)
      setUser(user)
      setUsername('')
      setPassword('')
    } catch (exception) {
      setErrorMessage('Wrong credentials')
      setTimeout(() => {
        setErrorMessage(null)
      }, 5000)
    }
  }

  return (
    //...

    <form onSubmit={handleLogin}>
      <div>
        username
        <input
          type='text'
          value={username}
          name='Username'
          onChange={({ target }) => setUsername(target.value)}
        />
      </div>
      <div>
        password
        <input
          type='password'
          value={password}
          name='Password'
          onChange={({ target }) => setPassword(target.value)}
        />
      </div>
      <button type='submit'>login</button>
    </form>
    // ...
  )
}
```

create servoce for wotjing with login

> services/login.js.

```js
import axios from 'axios';
const baseUrl = '/api/login';

const login = async (credentials) => {
  const response = await axios.post(baseUrl, credentials);
  return response.data;
};

export default { login };
```

add functionality to work with roken in note service

> services/noteService.js

```js
//...
let token = null;

const setToken = (newToken) => {
  token = `Bearer ${newToken}`;
};
//...
const create = async (newObject) => {
  const config = {
    headers: { Authorization: token },
  };

  const response = await axios.post(baseUrl, newObject, config);
  return response.data;
};
//...

// eslint-disable-next-line import/no-anonymous-default-export
export default { /* ... */ setToken };
```

We can change cod to use function for returning a component

```js
const App = () => {
  // ...

  const loginForm = () => (
    <form onSubmit={handleLogin}>
      <div>
        username
          <input
          type="text"
          value={username}
          name="Username"
          onChange={({ target }) => setUsername(target.value)}
        />
      </div>
      <div>
        password
          <input
          type="password"
          value={password}
          name="Password"
          onChange={({ target }) => setPassword(target.value)}
        />
      </div>
      <button type="submit">login</button>
    </form>
  )

  const noteForm = () => (
    <form onSubmit={addNote}>
      <input
        value={newNote}
        onChange={handleNoteChange}
      />
      <button type="submit">save</button>
    </form>
  )

  return (
    // ...
  )
}
```

and use conditions to render these components

```js
return (
  <div>
    {user === null && loginForm()}
    {user !== null && noteForm()}
    /* Or */
    {user === null ? loginForm() : noteForm()}
  </div>
);
```

Clone the application from GitHub with the command:

> git clone https://github.com/fullstack-hy2020/bloglist-frontendcopy

remove the git configuration of the cloned application

> cd bloglist-frontend // go to cloned repository

> rm -rf .gitcopy

The application is started the usual way, but you have to install its dependencies first:

> npm install

> npm start

</details>

### Sub-part B: [props.children and proptypes](https://fullstackopen.com/en/part5/props_children_and_proptypes)

<details>
<summary>Links:</summary>

<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display" title="CSS: display">CSS: display</a></li>
<li><a href="https://legacy.reactjs.org/docs/glossary.html#propschildren" title="React: props.children">React: props.children</a></li>
<li><a href="https://legacy.reactjs.org/docs/lifting-state-up.html" title="React: Lifting State Up">React: Lifting State Up</a></li>
<li><a href="https://react.dev/learn/referencing-values-with-refs" title="React: Referencing Values with Refs">React: Referencing Values with Refs</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#useref" title="React: useRef hook">React: useRef hook</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-api.html#reactforwardref" title="React: function forwardRef">React: function forwardRef</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#useimperativehandle" title="React: function useImperativeHandle">React: function useImperativeHandle</a></li>
<li><a href="https://legacy.reactjs.org/docs/refs-and-the-dom.html" title="React: Refs and the DOM">React: Refs and the DOM</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm" title="Web: confirm">Web: confirm</a></li>
<li><a href="https://github.com/facebook/prop-types" title="React: prop-types">React: prop-types</a></li>
<li><a href="https://www.npmjs.com/package/eslint-plugin-jest" title="eslint-plugin-jest">ESlint</a></li>
<li><a href="https://github.com/microsoft/vscode-eslint/issues/880#issuecomment-578052807" title="Visual Studio Code together with ESLint plugin">Visual Studio Code together with ESLint plugin</a></li>
<li><a href="https://eslint.org/docs/latest/use/configure/#ignoring-files-and-directories" title="Configure ESLint">Configure ESLint</a></li>
<li><a href="https://www.npmjs.com/package/eslint-config-react-app" title="ESLint: Config React app">ESLint: Config React app</a></li>
<li><a href="https://create-react-app.dev/docs/setting-up-your-editor/#extending-or-replacing-the-default-eslint-config" title="Extending or replacing the default ESLint config">Extending or replacing the default ESLint config</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Create a separated NoteForm component to create Note with all functionality inside instad of LoginForm

> NoteForm.js

```js
import { useState } from 'react';

const NoteForm = ({ createNote }) => {
  const [newNote, setNewNote] = useState('');

  const addNote = (event) => {
    event.preventDefault();
    createNote({ content: newNote, important: true });
    setNewNote('');
  };

  return (
    <div>
      <h2>Create a new note</h2>

      <form onSubmit={addNote}>
        <input
          value={newNote}
          onChange={(event) => setNewNote(event.target.value)}
        />
        <button type='submit'>save</button>
      </form>
    </div>
  );
};

export default NoteForm;
```

Create a togglable component to wrapped other components to hide or unhide them.

> Togglable.js

```js
import { useState, forwardRef, useImperativeHandle } from 'react';

const Togglable = forwardRef((props, refs) => {
  const [visible, setVisible] = useState(false);

  const hideWhenVisible = { display: visible ? 'none' : '' };
  const showWhenVisible = { display: visible ? '' : 'none' };

  const toggleVisibility = () => {
    setVisible(!visible);
  };

  useImperativeHandle(refs, () => {
    return { toggleVisibility };
  });

  return (
    <div>
      <div style={hideWhenVisible}>
        <button onClick={toggleVisibility}>{props.buttonLabel}</button>
      </div>
      <div style={showWhenVisible}>
        {props.children}
        <button onClick={toggleVisibility}>cancel</button>
      </div>
    </div>
  );
});

Togglable.displayName = 'Togglable';

export default Togglable;
```

Add NoteForm in App with changing logic in creating a note function and use Togglable component.

> App.js

```js
import React, { useState, useEffect, useRef } from 'react';
//...
import Togglable from './components/Togglable';
import LoginForm from './components/LoginForm';
import NoteForm from './components/NoteForm';

const App = () => {
  //...
  const noteFormRef = useRef();

  //...

  const addNote = (noteObject) => {
    noteFormRef.current.toggleVisibility();
    noteService.create(noteObject).then((returnedNote) => {
      setNotes(notes.concat(returnedNote));
    });
  };
  //...

  return (
    <div>
      {/* ...  */}
      <Togglable buttonLabel='new note' ref={noteFormRef}>
        <NoteForm createNote={addNote} />
      </Togglable>
      {/* ...  */}
      <Togglable buttonLabel='log in'>
        <LoginForm
          username={username}
          password={password}
          handleUsernameChange={({ target }) => setUsername(target.value)}
          handlePasswordChange={({ target }) => setPassword(target.value)}
          handleSubmit={handleLogin}
        />
      </Togglable>
      {/* ...  */}
    </div>
  );
};
```

Runtime type checking for React props and similar objects.

> npm install --save prop-types

We can define the buttonLabel prop as a mandatory or required string-type prop as shown below:

```js
import PropTypes from 'prop-types';

const Togglable = React.forwardRef((props, ref) => {
  // ..
});

Togglable.propTypes = {
  buttonLabel: PropTypes.string.isRequired,
};
```

#### The ESlint code style tool to the Frontend.

Install

> npm install --save-dev eslint-plugin-jest

Create config for ESlint.

NOT RUN "eslint --init" It will install the latest version of ESlint that is not compatible with the configuration file created by create-react-app

> .eslintrc.js

```js
/* eslint-env node */
module.exports = {
  'env': {
    'browser': true,
    'es6': true,
    'jest/globals': true,
  },
  'extends': ['eslint:recommended', 'plugin:react/recommended'],
  'parserOptions': {
    'ecmaFeatures': {
      'jsx': true,
    },
    'ecmaVersion': 2018,
    'sourceType': 'module',
  },
  'plugins': ['react', 'jest'],
  'rules': {
    'indent': ['error', 2],
    'linebreak-style': ['error', 'unix'], //windows
    'quotes': ['error', 'single'],
    'semi': ['error', 'never'],
    'eqeqeq': 'error',
    'no-trailing-spaces': 'error',
    'object-curly-spacing': ['error', 'always'],
    'arrow-spacing': ['error', { 'before': true, 'after': true }],
    'no-console': 0,
    'react/prop-types': 0,
    'react/react-in-jsx-scope': 'off',
  },
  'settings': {
    'react': {
      'version': 'detect',
    },
  },
};
```

Create ELlint ignore file

> .eslintignore

```js
.eslintrc.js
build
node_modules
```

Update scrypts in package.json to run ESlint

> package.json

```js
{
  // ...
  {
    "scripts": {
    //...
    "eslint": "eslint ."
    //, "eslint:fix": "eslint . --fix"  //for fix windows string ending ls and crls
  },
  // ...
}
```

Add line in VSCode settings to use Visual Studio Code together with ESLint plugin.

> .vscode/settings.json

```js
"eslint.workingDirectories": [{ "mode": "auto" }]
```

</details>

### Sub-part C: [Testing React apps](https://fullstackopen.com/en/part5/testing_react_apps)

<details>
<summary>Links:</summary>

<li><a href="https://jestjs.io/" title="Jest testing library">Jest testing library</a></li>
<li><a href="https://github.com/testing-library/react-testing-library" title="React Testing Library">React Testing Library</a></li>
<li><a href="https://legacy.reactjs.org/docs/dom-elements.html#classname" title="React: className">React: className</a></li>
<li><a href="https://testing-library.com/docs/react-testing-library/api/#render" title="Testing Library: render">Testing Library: render</a></li>
<li><a href="https://testing-library.com/docs/queries/about/#screen" title="Testing Library: screen">Testing Library: screen</a></li>
<li><a href="https://testing-library.com/docs/queries/bytext/" title="Testing Library: ByText">Testing Library: ByText</a></li>
<li><a href="https://facebook.github.io/watchman/" title="Watchman">Watchman</a></li>
<li><a href="https://medium.com/@jeff_long/organizing-tests-in-jest-17fc431ff850" title="Organizing Tests in Jest">Organizing Tests in Jest</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" title="Web: CSS Selectors">Web: CSS Selectors</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector" title="Web: querySelector">Web: querySelector</a></li>
<li><a href="https://testing-library.com/docs/react-testing-library/api/#container-1" title="Testing Library: container">Testing Library: container</a></li>
<li><a href="https://testing-library.com/docs/queries/bytestid/" title="Testing Library: ByTestId">Testing Library: ByTestId</a></li>
<li><a href="https://testing-library.com/docs/queries/about/#screendebug" title="Testing Library: screen.debug">Testing Library: screen.debug</a></li>
<li><a href="https://testing-library.com/docs/user-event/intro/" title="Testing Library: user-event">Testing Library: user-event</a></li>
<li><a href="https://jestjs.io/docs/mock-functions" title="jestjs: mock-functions">jestjs: mock-functions</a></li>
<li><a href="https://testing-library.com/docs/user-event/setup/" title="Testing Library: user-event - setup">Testing Library: user-event - setup</a></li>
<li><a href="https://testing-library.com/docs/user-event/convenience/#click" title="Testing Library: user-event - click">Testing Library: user-event - click</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mock_object" title="Mock object">Mock object</a></li>
<li><a href="https://www.npmjs.com/package/@testing-library/jest-dom#tohavestyle" title="jest toHaveStyle">jest toHaveStyle</a></li>
<li><a href="https://testing-library.com/docs/queries/byrole/" title="Testing Library: ByRole">Testing Library: ByRole</a></li>
<li><a href="https://testing-library.com/docs/user-event/utility/#type" title="Testing Library: user-event - type">Testing Library: user-event - type</a></li>
<li><a href="https://testing-library.com/docs/queries/byplaceholdertext/" title="Testing Library: ByPlaceholderText">Testing Library: ByPlaceholderText</a></li>
<li><a href="https://github.com/facebook/create-react-app/blob/ed5c48c81b2139b4414810e1efe917e04c96ee8d/packages/react-scripts/template/README.md#coverage-reporting" title="Test Coverage Reporting">Test Coverage Reporting</a></li>
<li><a href="https://jestjs.io/docs/snapshot-testing" title="Jest: Snapshot Testing">Jest: Snapshot Testing</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Install the testing library that will help us render components for testing purposes and install jest-dom which provides some nice Jest-related helper methods with the command:

> npm install --save-dev @testing-library/react @testing-library/jest-dom

Create a test for Note in the sqme folder as the next code:

> src/components/Note.js

```js
const Note = ({ note, toggleImportance }) => {
  const label = note.important ? 'make not important' : 'make important';

  return (
    <li className='note'>
      {note.content}
      <button onClick={toggleImportance}>{label}</button>
    </li>
  );
};

export default Note;
```

> src/components/Note.test.js

```js
import React from 'react';
import '@testing-library/jest-dom/extend-expect';
import { render, screen } from '@testing-library/react';
import Note from './Note';

test('renders content', () => {
  const note = {
    content: 'Component testing is done with react-testing-library',
    important: true,
  };

  render(<Note note={note} />);

  screen.debug();

  const element = screen.getByText(
    'Component testing is done with react-testing-library'
  );

  screen.debug(element);

  expect(element).toBeDefined();
});
```

There are console.log of debuging

> screen.debug()

```html
<body>
  <div>
    <li class="note">
      Component testing is done with react-testing-library
      <button>make not important</button>
    </li>
  </div>
</body>
```

> screen.debug(element)

```html
<li class="note">
  Component testing is done with react-testing-library
  <button>make not important</button>
</li>
```

To run test with automatic retesting

> npm test

If you want to run tests "normally", you can do so with the command:

> CI=true npm testcopy

For Windows (PowerShell) users

> $env:CI=$true; npm test

to add it in scrypt it needs to install cross-env

> npm install cross-env

and add command to the scrypt in package.json

> package.json

```js
{
  "scripts": {
    //..
    "test": "react-scripts test",
    "test:single": "cross-env CI=true npm test",
    //...
  },
}
```

install a library user-event that makes simulating user input

> npm install --save-dev @testing-library/user-event

We can use it in test file as:

> src/components/Note.test.js

```js
import React from 'react';
import '@testing-library/jest-dom/extend-expect';
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Note from './Note';

// ...

test('clicking the button calls event handler once', async () => {
  const note = {
    content: 'Component testing is done with react-testing-library',
    important: true,
  };

  const mockHandler = jest.fn();

  render(<Note note={note} toggleImportance={mockHandler} />);

  const user = userEvent.setup();
  const button = screen.getByText('make not important');
  await user.click(button);

  expect(mockHandler.mock.calls).toHaveLength(1);
});
```

> src/components/Togglable.js

```js
const Togglable = forwardRef((props, ref) => {
  // ...
  return (
   //...
      <div style={showWhenVisible} className="togglableContent">
   //...
  )
})
```

> src/components/Togglable.test.js

```js
import React from 'react';
import '@testing-library/jest-dom/extend-expect';
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Togglable from './Togglable';

describe('<Togglable />', () => {
  let container;

  beforeEach(() => {
    container = render(
      <Togglable buttonLabel='show...'>
        <div className='testDiv'>togglable content</div>
      </Togglable>
    ).container;
  });

  test('renders its children', async () => {
    await screen.findAllByText('togglable content');
  });

  test('at start the children are not displayed', () => {
    const div = container.querySelector('.togglableContent');
    expect(div).toHaveStyle('display: none');
  });

  test('after clicking the button, children are displayed', async () => {
    const user = userEvent.setup();
    const button = screen.getByText('show...');
    await user.click(button);

    const div = container.querySelector('.togglableContent');
    expect(div).not.toHaveStyle('display: none');
  });
});
```

Testing forms

> src/components/NoteForm.js

```js
import { useState } from 'react';

const NoteForm = ({ createNote } /* { onSubmit, handleChange, value } */) => {
  //...

  return (
    <div className='formDiv'>
      <input
        value={newNote}
        onChange={handleChange}
        id='note-input'
        placeholder='write note content here'
      />
      {/* ... */}
    </div>
  );
};

export default NoteForm;
```

> src/components/NoteForm.js

```js
import React from 'react';
import { render, screen } from '@testing-library/react';
import '@testing-library/jest-dom/extend-expect';
import NoteForm from './NoteForm';
import userEvent from '@testing-library/user-event';

test('<NoteForm /> updates parent state and calls onSubmit', async () => {
  const createNote = jest.fn();
  const user = userEvent.setup();

  render(<NoteForm createNote={createNote} />);

  //const inputs = screen.getAllByRole('textbox') //if input teg with textbox type more then 1
  // or by Placeholder
  // const input = screen.getByPlaceholderText('write note content here')
  // or by Selector
  // const { container } = render(<NoteForm createNote={createNote} />)
  // const input = container.querySelector('#note-input')

  const input = screen.getByRole('textbox');
  const sendButton = screen.getByText('save');

  await user.type(input, 'testing a form...');
  // await user.type(inputs[0], 'testing a form...') //if input teg with textbox type more then 1

  await user.click(sendButton);

  expect(createNote.mock.calls).toHaveLength(1);
  expect(createNote.mock.calls[0][0].content).toBe('testing a form...');
});
```

#### coverage

> $env:CI=$true; npm test -- --coverage

and add command to the scrypt in package.json

> package.json

```js
{
  "scripts": {
    //..
    "test": "react-scripts test",
    "test:single": "cross-env CI=true npm test",
    "test:coverage": "cross-env CI=true npm test -- --coverage",
    //...
  },
}
```

</details>

### Sub-part D: [End to end testing](https://fullstackopen.com/en/part5/end_to_end_testing)

<details>
<summary>Links:</summary>

<li><a href="https://en.wikipedia.org/wiki/System_testing" title="System testing">System testing</a></li>
<li><a href="https://www.selenium.dev/" title="Selenium">Selenium</a></li>
<li><a href="https://en.wikipedia.org/wiki/Headless_browser" title="Headless browser">Headless browser</a></li>
<li><a href="https://en.wikipedia.org/wiki/Regression_testing" title="Regression testing">Regression testing</a></li>
<li><a href="https://hackernoon.com/flaky-tests-a-war-that-never-ends-9aa32fdef359" title="Flaky Tests">Flaky Tests</a></li>
<li><a href="https://www.cypress.io/" title="E2E library Cypress">E2E library Cypress</a></li>
<li><a href="https://docs.cypress.io/guides/getting-started/installing-cypress#Windows-Subsystem-for-Linux" title="Installing Cypress">Installing Cypress</a></li>
<li><a href="https://nickymeuleman.netlify.app/blog/gui-on-wsl2-cypress" title="Using Graphical User Interfaces like Cypress' in WSL2">Using Graphical User Interfaces like Cypress' in WSL2</a></li>
<li><a href="https://mochajs.org/" title="The feature-rich JavaScript test framework 'Mocha'">The feature-rich JavaScript test framework "Mocha"</a></li>
<li><a href="https://docs.cypress.io/api/commands/visit" title="Cypress: visit command">Cypress: visit command</a></li>
<li><a href="https://docs.cypress.io/api/commands/contains" title="Cypress: contains command">Cypress: contains command</a></li>
<li><a href="https://mochajs.org/#arrow-functions" title="Mocha arrow-functions">Mocha arrow-functions</a></li>
<li><a href="https://github.com/cypress-io/eslint-plugin-cypress" title="An ESLint plugin for your Cypress tests">An ESLint plugin for your Cypress tests</a></li>
<li><a href="https://docs.cypress.io/api/commands/click#Syntax" title="Cypress: click command">Cypress: click command</a></li>
<li><a href="https://docs.cypress.io/api/commands/get#Syntax" title="Cypress: get command">Cypress: get command</a></li>
<li><a href="https://docs.cypress.io/api/commands/type#Syntax" title="Cypress: type command">Cypress: type command</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/ID_selectors" title="CSS: ID selectors">CSS: ID selectors</a></li>
<li><a href="https://docs.cypress.io/api/commands/request" title="Cypress: request command">Cypress: request command</a></li>
<li><a href="https://docs.cypress.io/api/commands/should" title="Cypress: should command">Cypress: should command</a></li>
<li><a href="https://docs.cypress.io/guides/references/assertions#Common-Assertions" title="Cypress: Common Assertions">Cypress: Common Assertions</a></li>
<li><a href="https://rgbcolorcode.com/color/red" title="Color RGB format">Color RGB format</a></li>
<li><a href="https://docs.cypress.io/api/commands/and" title="Cypress: and command">Cypress: and command</a></li>
<li><a href="https://github.com/cypress-io/cypress/issues/9349" title="Cypress: check style in Firefox">Cypress: check style in Firefox</a></li>
<li><a href="https://docs.cypress.io/guides/end-to-end-testing/testing-your-app#Fully-test-the-login-flow-but-only-once" title="Cypress: advice for testing Your App">Cypress: advice for testing Your App</a></li>
<li><a href="https://docs.cypress.io/api/cypress-api/custom-commands" title="Cypress: custom command">Cypress: custom command</a></li>
<li><a href="https://docs.cypress.io/guides/references/configuration" title="Cypress: configuration">Cypress: configuration</a></li>
<li><a href="https://docs.cypress.io/guides/guides/environment-variables" title="Cypress: Environment Variables">Cypress: Environment Variables</a></li>
<li><a href="https://docs.cypress.io/guides/core-concepts/cypress-app" title="Cypress App">Cypress App</a></li>
<li><a href="https://docs.cypress.io/api/commands/parent" title="Cypress: parent command">Cypress: parent command</a></li>
<li><a href="https://docs.cypress.io/api/commands/find#Syntax" title="Cypress: find command">Cypress: find command</a></li>
<li><a href="https://docs.cypress.io/api/commands/as" title="Cypress: as command">Cypress: as command</a></li>
<li><a href="https://docs.cypress.io/api/commands/then" title="Cypress: then command">Cypress: then command</a></li>
<li><a href="https://docs.cypress.io/api/commands/debug" title="Cypress: debug command">Cypress: debug command</a></li>
<li><a href="https://docs.cypress.io/guides/guides/command-line" title="Cypress: command line">Cypress: command line</a></li>
<li><a href="https://docs.cypress.io/guides/guides/screenshots-and-videos#Videos" title="Cypress: Videos">Cypress: Videos</a></li>
<li><a href="https://docs.cypress.io/guides/overview/why-cypress#In-a-nutshell" title="Cypress: In-a-nutshell">Cypress: In-a-nutshell</a></li>
<li><a href="https://docs.cypress.io/guides/core-concepts/introduction-to-cypress#Cypress-Can-Be-Simple-Sometimes" title="Cypress Can Be Simple (Sometimes)">Cypress Can Be Simple (Sometimes)</a></li>
<li><a href="https://docs.cypress.io/api/commands/eq#Syntax" title="Cypress: eq command">Cypress: eq command</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### Back end

Add an npm script to the backend which starts it in test mode.

> package.json

```js
{
  // ...
  "scripts": {
    // ...
    "start:test": "cross-env NODE_ENV=test node index.js"
  },
  // ...
}
```

Add a new controller for testing app. This will clean test DB.

> controllers/testing.js

```js
const testingRouter = require('express').Router();
const Note = require('../models/note');
const User = require('../models/user');

testingRouter.post('/reset', async (request, response) => {
  await Note.deleteMany({});
  await User.deleteMany({});

  response.status(204).end();
});

module.exports = testingRouter;
```

Add the controller to the app for routing

> app.js

```js
// ...
app.use('/api/notes', notesRouter);

if (process.env.NODE_ENV === 'test') {
  const testingRouter = require('./controllers/testing');
  app.use('/api/testing', testingRouter);
}

app.use(middleware.unknownEndpoint);
// ...
```

#### Front end

installing Cypress E2E library

> npm install --save-dev cypress

Add to scripts "cypress open" to run in browser "cypress run" to tun in terminal

> package.json

```js
{
  // ...
  "scripts": {
    // ...
    "cypress:open": "cypress open",
    "test:e2e": "cypress run"
  },
  // ...
}
```

Install an ESLint plugin for your Cypress tests

> npm install eslint-plugin-cypress --save-dev

and changing the configuration in .eslintrc.js like so:

> .eslintrc.js

```js
module.exports = {
  'env': {
    'browser': true,
    'es6': true,
    'jest/globals': true,
    'cypress/globals': true,
  },
  'extends': [
    // ...
  ],
  'parserOptions': {
    // ...
  },
  'plugins': ['react', 'jest', 'cypress'],
  'rules': {
    // ...
  },
};
```

Create/update confige for cypress

> cypress.config.js

```js
const { defineConfig } = require('cypress');

module.exports = defineConfig({
  e2e: {
    setupNodeEvents(on, config) {},
    baseUrl: 'http://localhost:3000',
  },
  env: {
    BACKEND: 'http://localhost:3001/api',
  },
  'video': false,
});
```

Create custom commands to post data in database

> cypress/support/commands.js

```js
Cypress.Commands.add('login', ({ username, password }) => {
  cy.request('POST', `${Cypress.env('BACKEND')}/login`, {
    username,
    password,
  }).then(({ body }) => {
    localStorage.setItem('loggedNoteappUser', JSON.stringify(body));

    cy.visit('');
  });
});

Cypress.Commands.add('createNote', ({ content, important }) => {
  cy.request({
    url: `${Cypress.env('BACKEND')}/notes`,
    method: 'POST',
    body: { content, important },
    headers: {
      'Authorization': `Bearer ${
        JSON.parse(localStorage.getItem('loggedNoteappUser')).token
      }`,
    },
  });

  cy.visit('');
});
```

Update components with id css selectors (LoginForm as an example)

> src/components/LoginForm.js

```js
//...
const LoginForm = ({ ... }) => {
  return (
    <div>
      <h2>Login</h2>
      <form onSubmit={handleSubmit}>
        <div>
          username
          <input
            id='username'
            value={username}
            onChange={handleUsernameChange}
          />
        </div>
        <div>
          password
          <input
            id='password'
            type="password"
            value={password}
            onChange={handlePasswordChange}
          />
        </div>
        <button id="login-button" type="submit">
          login
        </button>
      </form>
    </div>
  )
}
```

Create file with e2e tests for applicaton

> cypress/e2e/note_app.cy.js

```js
describe('Note app', function () {
  beforeEach(function () {
    cy.request('POST', `${Cypress.env('BACKEND')}/testing/reset`);
    const user = {
      name: 'Matti Luukkainen',
      username: 'mluukkai',
      password: 'salainen',
    };
    cy.request('POST', `${Cypress.env('BACKEND')}/users`, user);
    cy.visit('');
  });

  it('front page can be opened', function () {
    cy.contains('Notes');
    cy.contains(
      'Note app, Department of Computer Science, University of Helsinki 2023'
    );
  });

  //it.only()
  it('user can login', function () {
    cy.contains('log in').click();
    cy.get('#username').type('mluukkai');
    cy.get('#password').type('salainen');
    cy.get('#login-button').click();

    cy.contains('Matti Luukkainen logged in');
  });

  it('login fails with wrong password', function () {
    cy.contains('log in').click();
    cy.get('#username').type('mluukkai');
    cy.get('#password').type('wrong');
    cy.get('#login-button').click();

    cy.get('.error')
      .should('contain', 'Wrong credentials')
      .and('have.css', 'color', 'rgb(255, 0, 0)')
      .and('have.css', 'border-style', 'solid');

    cy.contains('Matti Luukkainen logged in').should('not.exist');
  });

  describe('when logged in', function () {
    beforeEach(function () {
      cy.login({ username: 'mluukkai', password: 'salainen' });
    });

    it('a new note can be created', function () {
      cy.contains('new note').click();
      cy.get('input').type('a note created by cypress');
      cy.contains('save').click();
      cy.contains('a note created by cypress');
    });

    describe('and several notes exist', function () {
      beforeEach(function () {
        cy.createNote({ content: 'first note', important: false });
        cy.createNote({ content: 'second note', important: false });
        cy.createNote({ content: 'third note', important: false });
      });

      it('one of those can be made important', function () {
        cy.contains('second note').parent().find('button').as('theButton');
        cy.get('@theButton').click();
        cy.get('@theButton').should('contain', 'make not important');
      });

      it('then example', function () {
        cy.get('button').then((buttons) => {
          console.log('number of buttons', buttons.length);
          cy.wrap(buttons[0]).click();
        });
      });
    });
  });
});
```

</details>

### Exercises:

#### 5.1-5.23: Blog list application

To building a blog list application (frontend, with completed backend), that allows users to save information about interesting blogs they have stumbled across on the internet. For each listed blog we will save the author, title, URL, and amount of upvotes from users of the application.

Create an application according to the requirements described in [exercises 5.1-5.4](https://fullstackopen.com/en/part5/login_in_frontend#exercises-5-1-5-4), [exercises 5.5-5.11](https://fullstackopen.com/en/part5/props_children_and_proptypes#exercises-5-5-5-11), [exercise 5.12](https://fullstackopen.com/en/part5/props_children_and_proptypes#exercise-5-12), [exercises 5.13-5.16](https://fullstackopen.com/en/part5/testing_react_apps#exercises-5-13-5-16), [exercises 5.17-5.23](https://fullstackopen.com/en/part5/end_to_end_testing#exercises-5-17-5-23)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part5/bloglist)

## Part 6: [Advanced state management](https://fullstackopen.com/en/part6)

### Sub-part A: [Flux-architecture and Redux](https://fullstackopen.com/en/part6/flux_architecture_and_redux)

<details>
<summary>Links:</summary>

<li><a href="https://legacy.reactjs.org/docs/lifting-state-up.html" title="React: Lifting State Up">React: Lifting State Up</a></li>
<li><a href="https://redux.js.org/" title="Redux - library">Redux - library</a></li>
<li><a href="https://redux.js.org/tutorials/fundamentals/part-4-store" title="Redux: store">Redux: store</a></li>
<li><a href="https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow" title="Redux: action">Redux: concepts data flow</a></li>
<li><a href="https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers" title="Redux: state, actions, reducers">Redux: state, actions, reducers</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch" title="JavaScript: switch">JavaScript: switch</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters" title="JavaScript: function">JavaScript: function - default parameters</a></li>
<li><a href="https://redux.js.org/api/store#dispatchaction" title="Redux: dispatchaction">Redux: dispatchaction</a></li>
<li><a href="https://redux.js.org/api/store#getstate" title="Redux: getstate">Redux: getstate</a></li>
<li><a href="https://redux.js.org/api/store#subscribelistener" title="Redux: subscribe (listener)">Redux: subscribe (listener)</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push" title="JavaScript: Array - push">JavaScript: Array - push</a></li>
<li><a href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts#reducers" title="Redux: reducers">Redux: reducers</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pure_function" title="Pure function">Pure function</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" title="JavaScript: Array - concat">JavaScript: Array - concat</a></li>
<li><a href="https://en.wikipedia.org/wiki/Immutable_object" title="Immutable object">Immutable object</a></li>
<li><a href="https://www.npmjs.com/package/deep-freeze" title="Deep freeze library">Deep freeze library</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" title="JavaScript: Spread syntax">JavaScript: Spread syntax</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" title="JavaScript: Destructuring assignment">JavaScript: Destructuring assignment</a></li>
<li><a href="https://legacy.reactjs.org/docs/uncontrolled-components.html" title="React: Uncontrolled Components">React: Uncontrolled Components</a></li>
<li><a href="https://goshacmd.com/controlled-vs-uncontrolled-inputs-react/" title="React: controlled vs uncontrolled inputs">React: controlled vs uncontrolled inputs</a></li>
<li><a href="https://redux.js.org/tutorials/fundamentals/part-6-async-logic#synchronous-action-creators" title="Redux: Action creators">Redux: Action creators</a></li>
<li><a href="https://react-redux.js.org/api/hooks" title="React-Redux: hook">React-redux: hook</a></li>
<li><a href="https://react-redux.js.org/" title="The react-redux library">The react-redux library</a></li>
<li><a href="https://react-redux.js.org/api/provider" title="React-Redux: Provider">React-Redux: Provider</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" title="JavaScript: multiple export commands">JavaScript: multiple export commands</a></li>
<li><a href="https://react-redux.js.org/api/hooks#usedispatch" title="React-Redux: useDispatch">React-Redux: useDispatch</a></li>
<li><a href="https://react-redux.js.org/api/hooks#useselector" title="React-Redux: useSelector">React-Redux: useSelector</a></li>
<li><a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" title="Presentational and Container Components">Presentational and Container Components</a></li>
<li><a href="https://read.reduxbook.com/markdown/part1/04-action-creators.html" title="Redux: Action Creaters">Redux: Action Creaters</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### redux

install redux

> npm install redux

Create reducer for note

> src/reducers/noteReducer.js

```js
const noteReducer = (state = [], action) => {
  switch (action.type) {
    case 'NEW_NOTE':
      return [...state, action.payload];
    case 'TOGGLE_IMPORTANCE': {
      const id = action.payload.id;
      const noteToChange = state.find((n) => n.id === id);
      const changedNote = {
        ...noteToChange,
        important: !noteToChange.important,
      };
      return state.map((note) => (note.id !== id ? note : changedNote));
    }
    default:
      return state;
  }
};

const generateId = () => Number((Math.random() * 1000000).toFixed(0));

export const createNote = (content) => {
  return {
    type: 'NEW_NOTE',
    payload: {
      content,
      important: false,
      id: generateId(),
    },
  };
};

export const toggleImportanceOf = (id) => {
  return {
    type: 'TOGGLE_IMPORTANCE',
    payload: { id },
  };
};

export default noteReducer;
```

install deep-freeze for testing state is unmutable

> npm install --save-dev deep-freeze

create test for reduser

> src/reducers/noteReducer.test.js

```js
import noteReducer from './noteReducer';
import deepFreeze from 'deep-freeze';

describe('noteReducer', () => {
  test('returns new state with action NEW_NOTE', () => {
    const state = [];
    const action = {
      type: 'NEW_NOTE',
      payload: {
        content: 'the app state is in redux store',
        important: true,
        id: 1,
      },
    };

    deepFreeze(state);
    const newState = noteReducer(state, action);

    expect(newState).toHaveLength(1);
    expect(newState).toContainEqual(action.payload);
  });

  test('returns new state with action TOGGLE_IMPORTANCE', () => {
    const state = [
      {
        content: 'the app state is in redux store',
        important: true,
        id: 1,
      },
      {
        content: 'state changes are made with actions',
        important: false,
        id: 2,
      },
    ];

    const action = {
      type: 'TOGGLE_IMPORTANCE',
      payload: {
        id: 2,
      },
    };

    deepFreeze(state);
    const newState = noteReducer(state, action);

    expect(newState).toHaveLength(2);

    expect(newState).toContainEqual(state[0]);

    expect(newState).toContainEqual({
      content: 'state changes are made with actions',
      important: true,
      id: 2,
    });
  });
});
```

#### react-redux

install react-redux

> npm install react-redux

update index.js and create components with using react-redux

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { createStore } from 'redux';
import { Provider } from 'react-redux';

import App from './App';
import noteReducer from './reducers/noteReducer';

const store = createStore(noteReducer);

ReactDOM.createRoot(document.getElementById('root')).render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

> src/App.js

```js
import NewNote from './components/NewNote';
import Notes from './components/Notes';

const App = () => {
  return (
    <div>
      <NewNote />
      <Notes />
    </div>
  );
};

export default App;
```

> src/Notes.js

```js
import { useDispatch, useSelector } from 'react-redux';

import { toggleImportanceOf } from '../reducers/noteReducer';

const Note = ({ note, handleClick }) => {
  return (
    <li onClick={handleClick}>
      {note.content}
      <strong> {note.important ? 'important' : ''}</strong>
    </li>
  );
};

const Notes = () => {
  const dispatch = useDispatch();
  const notes = useSelector((state) => state);

  return (
    <ul>
      {notes.map((note) => (
        <Note
          key={note.id}
          note={note}
          handleClick={() => dispatch(toggleImportanceOf(note.id))}
        />
      ))}
    </ul>
  );
};

export default Notes;
```

> src/NewNote.js

```js
import { useDispatch } from 'react-redux';

import { createNote } from '../reducers/noteReducer';

const NewNote = () => {
  const dispatch = useDispatch();

  const addNote = (event) => {
    event.preventDefault();
    const content = event.target.note.value;
    event.target.note.value = '';

    dispatch(createNote(content));
  };

  return (
    <form onSubmit={addNote}>
      <input name='note' />
      <button type='submit'>add</button>
    </form>
  );
};

export default NewNote;
```

</details>

### Sub-part B: [Many reducers](https://fullstackopen.com/en/part6/many_reducers)

<details>
<summary>Links:</summary>

<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio" title="HTML: input-radio">HTML: input-radio</a></li>
<li><a href="https://redux.js.org/api/combinereducers" title="Redux: combineReducers">Redux: combineReducers</a></li>
<li><a href="https://redux-toolkit.js.org/api/configureStore" title="Redux-toolkit: configureStore">Redux-toolkit: configureStore</a></li>
<li><a href="https://redux-toolkit.js.org/api/createSlice" title="Redux-toolkit: createSlice">Redux-toolkit: createSlice</a></li>
<li><a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd" title="Chrome: redux-devtools">Chrome: redux-devtools</a></li>
<li><a href="https://redux-toolkit.js.org/api/createSlice#reducers" title="Redux-toolkit: reducers">Redux-toolkit: reducers</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Create reducer for filtering notes

> scr/reducers/filterReducer.js

```js
const filterReducer = (state = 'ALL', action) => {
  switch (action.type) {
    case 'SET_FILTER':
      return action.payload;
    default:
      return state;
  }
};

export const filterChange = (filter) => {
  return {
    type: 'SET_FILTER',
    payload: filter,
  };
};

export default filterReducer;
```

Create component for filtering notes with input radio by importants

> src/components/VisibilityFilter.js

```js
import { useDispatch } from 'react-redux';

import { filterChange } from '../reducers/filterReducer';

const VisibilityFilter = (/* props */) => {
  const dispatch = useDispatch();

  return (
    <div>
      all
      <input
        type='radio'
        name='filter'
        onChange={() => dispatch(filterChange('ALL'))}
      />
      important
      <input
        type='radio'
        name='filter'
        onChange={() => dispatch(filterChange('IMPORTANT'))}
      />
      nonimportant
      <input
        type='radio'
        name='filter'
        onChange={() => dispatch(filterChange('NONIMPORTANT'))}
      />
    </div>
  );
};

export default VisibilityFilter;
```

Update index.js to use two reducers

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { createStore, combineReducers } from 'redux';
//...
import filterReducer from './reducers/filterReducer';

const reducer = combineReducers({
  notes: noteReducer,
  filter: filterReducer,
});

const store = createStore(reducer);
//...
```

Update the Notes component to rander filtered notes.

> src/Notes.js

```js
//...
const Notes = () => {
  const dispatch = useDispatch()

  const notes = useSelector(({ filter, notes }) => {
    if (filter === 'ALL') {
      return notes
    }
    return filter === 'IMPORTANT'
      ? notes.filter((note) => note.important)
      : notes.filter((note) => !note.important)
  })

  return (
    //...
  )
}
//...
```

Update the App component to rander the component with filter.

> src/Notes.js

```js
//...
import VisibilityFilter from './components/VisibilityFilter';

const App = () => {
  return (
    <div>
      <NewNote />
      <VisibilityFilter />
      <Notes />
    </div>
  );
};

export default App;
```

#### Redux Toolkit

install the library: Redux Toolkit

> npm install @reduxjs/toolkit

Update index.js to use two reducers

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { Provider } from 'react-redux';
import { configureStore } from '@reduxjs/toolkit';
import App from './App';

import noteReducer from './reducers/noteReducer';
import filterReducer from './reducers/filterReducer';

const store = configureStore({
  reducer: {
    notes: noteReducer,
    filter: filterReducer,
  },
});

console.log(store.getState());

ReactDOM.createRoot(document.getElementById('root')).render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

Update noteReducer.js to use createSlice from reduxjs toolkit

> src/reducers/noteReducer.js

```js
import { createSlice } from '@reduxjs/toolkit';

const initialState = [
  {
    content: 'reducer defines how redux store works',
    important: true,
    id: 1,
  },
  {
    content: 'state of store can contain any data',
    important: false,
    id: 2,
  },
];

const generateId = () => Number((Math.random() * 1000000).toFixed(0));

const noteSlice = createSlice({
  name: 'notes',
  initialState,
  reducers: {
    createNote(state, action) {
      const content = action.payload;
      state.push({
        content,
        important: false,
        id: generateId(),
      });
    },
    toggleImportanceOf(state, action) {
      const id = action.payload;
      const noteToChange = state.find((n) => n.id === id);
      const changedNote = {
        ...noteToChange,
        important: !noteToChange.important,
      };
      return state.map((note) => (note.id !== id ? note : changedNote));
    },
  },
});

export const { createNote, toggleImportanceOf } = noteSlice.actions;
export default noteSlice.reducer;
```

Update index.js to use two reducers

> src/reducers/noteReducer.test.js

```js
import noteReducer from './noteReducer';
import deepFreeze from 'deep-freeze';

describe('noteReducer', () => {
  test('returns new state with action notes/createNote', () => {
    //...
    const action = {
      type: 'notes/createNote',
      payload: 'the app state is in redux store',
    };
    //...
    expect(newState.map((s) => s.content)).toContainEqual(action.payload);
  });

  test('returns new state with action notes/toggleImportanceOf', () => {
    //...
    const action = {
      type: 'notes/toggleImportanceOf',
      payload: 2,
    };
    //...
  });
});
```

Use console log with JSON in reduser function in slicer to see the object in console

> console.log(JSON.parse(JSON.stringify(state)))

</details>

### Sub-part C: [Communicating with server in a redux application](https://fullstackopen.com/en/part6/communicating_with_server_in_a_redux_application)

<details>
<summary>Links:</summary>

<li><a href="https://github.com/facebook/create-react-app/issues/6880" title="ESlint How to disable the rule react-hooks/exhaustive-deps">ESlint How to disable the rule react-hooks/exhaustive-deps</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies" title="React: hooks dependencies in the react documentation">React: hooks dependencies in the react documentation</a></li>
<li><a href="https://github.com/reduxjs/redux-thunk" title="Redux Thunk library">Redux Thunk library</a></li>
<li><a href="https://redux-toolkit.js.org/api/createAsyncThunk" title="Redux Toolkit: createAsyncThunk">Redux Toolkit: createAsyncThunk</a></li>
<li><a href="https://redux-toolkit.js.org/rtk-query/overview" title="Redux Toolkit: RTK Query Overview">Redux Toolkit: RTK Query Overview</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### json-server

Install json-server for the project

> npm install json-server --save-dev

Added json file-database in root of the project

> db.json

```js
{
  "notes": [
    {
      "content": "the app state is in redux store",
      "important": true,
      "id": 1
    },
    {
      "content": "state changes are made with actions",
      "important": false,
      "id": 2
    }
  ]
}
```

Added scripts to start the server in the file package.json

> package.json

```js
"scripts": {
  "server": "json-server -p3001 --watch db.json",
  // ...
}
```

#### front-end connect to backend using axios

Create services to use axios to fetch data from the backend

> src/services/notes.js

```js
import axios from 'axios';

const baseUrl = 'http://localhost:3001/notes';

const getAll = async () => {
  const response = await axios.get(baseUrl);
  return response.data;
};

const createNew = async (content) => {
  const object = { content, important: false };
  const response = await axios.post(baseUrl, object);
  return response.data;
};

export default { getAll, createNew };
```

Update reducer for working with the new services

> src/reducers/noteReducer.js

```js
import { createSlice } from '@reduxjs/toolkit';

const noteSlice = createSlice({
  name: 'notes',
  initialState: [],
  reducers: {
    createNote(state, action) {
      state.push(action.payload);
    },
    toggleImportanceOf(state, action) {
      //...
    },
    appendNote(state, action) {
      state.push(action.payload);
    },
    setNotes(state, action) {
      return action.payload;
    },
  },
});

export const { createNote, toggleImportanceOf, appendNote, setNotes } =
  noteSlice.actions;
export default noteSlice.reducer;
```

Update App component to fetch data from server

> src/App.js

```js
import { useEffect } from 'react';
import { useDispatch } from 'react-redux';

import { setNotes } from './reducers/noteReducer';
import noteService from './services/notes';
import NewNote from './components/NewNote';
import Notes from './components/Notes';
import VisibilityFilter from './components/VisibilityFilter';

const App = () => {
  const dispatch = useDispatch();
  useEffect(() => {
    noteService.getAll().then((notes) => dispatch(setNotes(notes)));
  }, []);

  return (
    <div>
      <NewNote />
      <VisibilityFilter />
      <Notes />
    </div>
  );
};

export default App;
```

Update NewNote component to fetch data from server

> src/components/NewNote.js

```js
import { useDispatch } from 'react-redux';

import { createNote } from '../reducers/noteReducer';
import noteService from '../services/notes';

const NewNote = () => {
  const dispatch = useDispatch();

  const addNote = async (event) => {
    event.preventDefault();
    const content = event.target.note.value;
    event.target.note.value = '';

    const newNote = await noteService.createNew(content);
    dispatch(createNote(newNote));
  };

  return (
    <form onSubmit={addNote}>
      <input name='note' />
      <button type='submit'>add</button>
    </form>
  );
};

export default NewNote;
```

#### Asynchronous actions and Redux thunk

Update note services with asynchronous action and hide implimantation in services

> src/reducers/noteReducer.js

```js
import { createSlice } from '@reduxjs/toolkit';

import noteService from '../services/notes';

const noteSlice = createSlice({
  name: 'notes',
  initialState: [],
  reducers: {
    toggleImportanceOf(state, action) {
      //..
    },
    appendNote(state, action) {
      state.push(action.payload);
    },
    setNotes(state, action) {
      return action.payload;
    },
  },
});

export const { toggleImportanceOf, appendNote, setNotes } = noteSlice.actions;

export const initializeNotes = () => {
  return async (dispatch) => {
    const notes = await noteService.getAll();
    dispatch(setNotes(notes));
  };
};

export const createNote = (content) => {
  return async (dispatch) => {
    const newNote = await noteService.createNew(content);
    dispatch(appendNote(newNote));
  };
};

export default noteSlice.reducer;
```

Update App component to use new funcialnality with fetching data

> src/App.js

```js
import { useEffect } from 'react'
import { useDispatch } from 'react-redux'

import { initializeNotes } from './reducers/noteReducer'
import NewNote from './components/NewNote'
import Notes from './components/Notes'
import VisibilityFilter from './components/VisibilityFilter'

const App = () => {
  const dispatch = useDispatch()

  useEffect(() => {
    dispatch(initializeNotes())
  }, [dispatch])

  return (
    //...
  )
}

export default App
```

Update NewNote component to use new funcialnality with fetching data

> src/components/NewNote.js

```js
import { useDispatch } from 'react-redux'

import { createNote } from '../reducers/noteReducer'

const NewNote = () => {
  const dispatch = useDispatch()

  const addNote = async (event) => {
    event.preventDefault()
    const content = event.target.note.value
    event.target.note.value = ''
    dispatch(createNote(content))
  }

  return (
    //...
  )
}

export default NewNote
```

#### Store

Create a separate store file

> src/store.js

```js
import { configureStore } from '@reduxjs/toolkit';

import noteReducer from './reducers/noteReducer';
import filterReducer from './reducers/filterReducer';

const store = configureStore({
  reducer: {
    notes: noteReducer,
    filter: filterReducer,
  },
});

export default store;
```

Update index to use the new sotre file

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { Provider } from 'react-redux';

import store from './store';
import App from './App';

ReactDOM.createRoot(document.getElementById('root')).render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

</details>

### Sub-part D: [React Query, useReducer and the context](https://fullstackopen.com/en/part6/react_query_use_reducer_and_the_context)

<details>
<summary>Links:</summary>

<li><a href="https://tanstack.com/query/v3/" title="React Query library">React Query library</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/queries" title="React Query library: Queries">React Query library: Queries</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/reference/useQuery" title="React Query library: useQuery">React Query library: useQuery</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/query-keys" title="React Query library: Query Keys">React Query library: Query Keys</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/mutations" title="React Query library: Mutations">React Query library: Mutations</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/reference/useMutation" title="React Query library: useMutation">React Query library: useMutation</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/invalidations-from-mutations" title="React Query library: Invalidations from Mutations">React Query library: Invalidations from Mutations</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/updates-from-mutation-responses" title="React Query library: Updates from Mutation Responses">React Query library: Updates from Mutation Responses</a></li>
<li><a href="https://tkdodo.eu/blog/react-query-render-optimizations" title="React Query Render Optimizations">React Query Render Optimizations</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/does-this-replace-client-state" title="Does TanStack Query replace Redux, MobX or other global state managers?">Does TanStack Query replace Redux, MobX or other global state managers?</a></li>
<li><a href="https://react.dev/reference/react/useReducer" title="React: useReducer hook">React: useReducer hook</a></li>
<li><a href="https://react.dev/learn/passing-data-deeply-with-context" title="React: Context API provides">React: Context API provides</a></li>
<li><a href="https://react.dev/reference/react/createContext" title="React: hook createContext">React: hook createContext</a></li>
<li><a href="https://react.dev/reference/react/useContext" title="React: hook useContext">React: hook useContext</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-custom.html" title="React: custom hook">React: custom hook</a></li>
<li><a href="https://facebookarchive.github.io/flux/" title="Flux architecture">Flux architecture</a></li>
<li><a href="https://redux-toolkit.js.org/" title="Redux Toolkit">Redux Toolkit</a></li>
<li><a href="https://recoiljs.org/" title="Recoil">Recoil</a></li>
<li><a href="https://mobx.js.org/README.html" title="MobX">MobX</a></li>
<li><a href="https://npmtrends.com/mobx-vs-recoil-vs-redux" title="Npm trends">Npm trends</a></li>
</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### React Query library

Install React Query library

> npm install react-query

Create index and add elements to use React Query library

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { QueryClient, QueryClientProvider } from 'react-query';

import App from './App';

const queryClient = new QueryClient();

ReactDOM.createRoot(document.getElementById('root')).render(
  <QueryClientProvider client={queryClient}>
    <App />
  </QueryClientProvider>
);
```

Create file requests.js to work with server using axios

> src/requests.js

```js
import axios from 'axios';

const baseUrl = 'http://localhost:3001/notes';

export const getNotes = () => axios.get(baseUrl).then((res) => res.data);

export const createNote = (newNote) =>
  axios.post(baseUrl, newNote).then((res) => res.data);

export const updateNote = (updatedNote) =>
  axios
    .put(`${baseUrl}/${updatedNote.id}`, updatedNote)
    .then((res) => res.data);
```

Create App with elements to use React Query library and requests

> src/App.js

```js
import { useQuery, useMutation, useQueryClient } from 'react-query';
import { getNotes, createNote, updateNote } from './requests';

const App = () => {
  const queryClient = useQueryClient();
  const newNoteMutation = useMutation(createNote, {
    onSuccess: (newNote) => {
      const notes = queryClient.getQueryData('notes');
      queryClient.setQueryData('notes', notes.concat(newNote));
    },
  });

  const addNote = async (event) => {
    event.preventDefault();
    const content = event.target.note.value;
    event.target.note.value = '';
    newNoteMutation.mutate({ content, important: true });
  };

  const updateNoteMutation = useMutation(updateNote, {
    onSuccess: (updatedNote) => {
      const notes = queryClient.getQueryData('notes');
      queryClient.setQueryData(
        'notes',
        notes.map((n) => (n.id !== updatedNote.id ? n : updatedNote))
      );
    },
  });

  const toggleImportance = (note) => {
    updateNoteMutation.mutate({ ...note, important: !note.important });
  };

  const result = useQuery('notes', getNotes, {
    refetchOnWindowFocus: false,
  });

  console.log(result);

  if (result.isLoading) {
    return <div>loading data...</div>;
  }

  const notes = result.data;

  return (
    <div>
      <h2>Notes app</h2>
      <form onSubmit={addNote}>
        <input name='note' />
        <button type='submit'>add</button>
      </form>
      {notes.map((note) => (
        <li key={note.id} onClick={() => toggleImportance(note)}>
          {note.content}
          <strong> {note.important ? 'important' : ''}</strong>
        </li>
      ))}
    </div>
  );
};

export default App;
```

#### React state management using the useReducer hook and context.

Create CounterContext for providing it in index.

> src/CounterContext.js

```js
import { createContext, useReducer, useContext } from 'react';

const counterReducer = (state, action) => {
  switch (action.type) {
    case 'INC':
      return state + 1;
    case 'DEC':
      return state - 1;
    case 'ZERO':
      return 0;
    default:
      return state;
  }
};

const CounterContext = createContext();

export const CounterContextProvider = (props) => {
  const [counter, counterDispatch] = useReducer(counterReducer, 0);

  return (
    <CounterContext.Provider value={[counter, counterDispatch]}>
      {props.children}
    </CounterContext.Provider>
  );
};

export const useCounterValue = () => {
  const counterAndDispatch = useContext(CounterContext);
  return counterAndDispatch[0];
};

export const useCounterDispatch = () => {
  const counterAndDispatch = useContext(CounterContext);
  return counterAndDispatch[1];
};

export default CounterContext;
```

Update index to use CounterContext

> src/index.js

```js
import ReactDOM from 'react-dom/client';

import App from './App';
import { CounterContextProvider } from './CounterContext';

ReactDOM.createRoot(document.getElementById('root')).render(
  <CounterContextProvider>
    <App />
  </CounterContextProvider>
);
```

Create the component for buttons with using useCounterDispatch

> src/components/Button.js

```js
import { useCounterDispatch } from '../CounterContext';

const Button = ({ type, label }) => {
  const dispatch = useCounterDispatch();
  return <button onClick={() => dispatch({ type })}>{label}</button>;
};

export default Button;
```

Create the component for Display counter with using useCounterValue

> src/components/Display.js

```js
import { useCounterValue } from '../CounterContext';

const Display = () => {
  const counter = useCounterValue();
  return <div>{counter}</div>;
};

export default Display;
```

Create App with the components

> src/App.js

```js
import Display from './components/Display';
import Button from './components/Button';

const App = () => {
  return (
    <div>
      <Display />
      <div>
        <Button type='INC' label='+' />
        <Button type='DEC' label='-' />
        <Button type='ZERO' label='0' />
      </div>
    </div>
  );
};

export default App;
```

</details>

### Sub-part E: [connect (the old part)](https://fullstackopen.com/en/part6/connect_the_old_part)

<details>
<summary>Links:</summary>

<li><a href="https://react-redux.js.org/api/hooks" title="React Redux: Hooks">React Redux: Hooks</a></li>
<li><a href="https://react-redux.js.org/api/hooks#useselector" title="React Redux: useSelector">React Redux: useSelector</a></li>
<li><a href="https://react-redux.js.org/api/hooks#usedispatch" title="React Redux: ">React Redux: </a></li>
<li><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api/connect.md" title="connect">connect</a></li>
<li><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api/connect.md#mapstatetoprops-state-ownprops--object" title="connect: mapStateToProps">connect: mapStateToProps</a></li>
<li><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api/connect.md#mapdispatchtoprops-object--dispatch-ownprops--object" title="connect: mapDispatchToProps">connect: mapDispatchToProps</a></li>
<li><a href="https://egghead.io/courses/fundamentals-of-redux-course-from-dan-abramov-bd5cc867" title="Fundamentals of Redux Course from Dan Abramov">Fundamentals of Redux Course from Dan Abramov</a></li>
<li><a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" title="Presentational and Container Components">Presentational and Container Components by Dan Abramov</a></li>
<li><a href="https://legacy.reactjs.org/docs/higher-order-components.html" title="React: Higher-Order Components">React: Higher-Order Components</a></li>
<li><a href="https://en.wikipedia.org/wiki/Higher-order_function" title="Higher-order function">Wiki: Higher-order function</a></li>
<li><a href="https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367" title="You Might Not Need Redux">You Might Not Need Redux by Dan Abramov</a></li>
<li><a href="https://legacy.reactjs.org/docs/context.html" title="React: Context">React: Context</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#usereducer" title="React: useReducer">React: useReducer</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Update Notes component to use connect

> src/components/Notes.js

```js
import { connect } from 'react-redux';
import { toggleImportanceOf } from '../reducers/noteReducer';

const Notes = (props) => {
  const dispatch = useDispatch();

  return (
    <ul>
      {props.notes.map((note) => (
        <Note
          key={note.id}
          note={note}
          handleClick={() => props.toggleImportanceOf(note.id)}
        />
      ))}
    </ul>
  );
};

const mapStateToProps = (state) => {
  if (state.filter === 'ALL') {
    return {
      notes: state.notes,
    };
  }

  return {
    notes:
      state.filter === 'IMPORTANT'
        ? state.notes.filter((note) => note.important)
        : state.notes.filter((note) => !note.important),
  };
};

const mapDispatchToProps = {
  toggleImportanceOf,
};

const ConnectedNotes = connect(mapStateToProps, mapDispatchToProps)(Notes);
export default ConnectedNotes;
```

Update NewNote component to use connect

> src/components/NewNote.js

```js
import { connect } from 'react-redux';
import { createNote } from '../reducers/noteReducer';

const NewNote = (props) => {
  const addNote = (event) => {
    event.preventDefault();
    const content = event.target.note.value;
    event.target.note.value = '';

    props.createNote(content);
  };

  return (
    <form onSubmit={addNote}>
      <input name='note' />
      <button type='submit'>add</button>
    </form>
  );
};

export default connect(null, { createNote })(NewNote);
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

**Ppresentational component:**

- Are concerned with how things look.
- May contain both presentational and container components inside, and usually have some DOM markup and styles of their own.
- Often allow containment via props.children.
- Have no dependencies on the rest of the app, such as Redux actions or stores.
- Donât specify how the data is loaded or mutated.
- Receive data and callbacks exclusively via props.
- Rarely have their own state (when they do, itâs UI state rather than data).
- Are written as functional components unless they need state, lifecycle hooks, or performance optimizations.

**Container component:**

- Are concerned with how things work.
- May contain both presentational and container components inside but usually donât have any DOM markup of their own except for some wrapping divs, and never have any styles.
- Provide the data and behavior to presentational or other container components.
- Call Redux actions and provide these as callbacks to the presentational components.
- Are often stateful, as they tend to serve as data sources.
- Are usually generated using higher-order components such as connect from React Redux, rather than written by hand.

**Abramov attributes the following benefits to the division:**

- Better separation of concerns. You understand your app and your UI better by writing components this way.
- Better reusability. You can use the same presentational component with completely different state sources, and turn those into separate container components that can be further reused.
- Presentational components are essentially your appâs âpaletteâ. You can put them on a single page and let the designer tweak all their variations without touching the appâs logic. You can run screenshot regression tests on that page.

</details>

### Exercises:

#### 6.1-6.2: Unicafe

Description: Let's make a simplified version of the unicafe. Let's handle the state management with Redux.

Create an application according to the requirements described in [exercises 6.1-6.2](https://fullstackopen.com/en/part6/flux_architecture_and_redux#exercises-6-1-6-2),

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part6/unicafe)

#### 6.3-6.19: Anecdotes

Description: Let's make a new version of the anecdote voting application. Let's handle the state management with React-Redux. And then Implement filtering for the anecdotes that are displayed to the user. Finnaly install Redux Toolkit and use it with separating by fiels. After it install json-server and implement fetching from the server and creating new anecdote in the server. All anecdotes are stored in the backend. After connection to backend make refactoring code to use Redux Thunk library.

Create an application according to the requirements described in [exercises 6.3-6.8](https://fullstackopen.com/en/part6/flux_architecture_and_redux#exercises-6-3-6-8), [exercise 6.9](https://fullstackopen.com/en/part6/many_reducers#exercise-6-9), [exercises 6.10-6.13](https://fullstackopen.com/en/part6/many_reducers#exercises-6-10-6-13), [exercises 6.14-6.15](https://fullstackopen.com/en/part6/communicating_with_server_in_a_redux_application#exercises-6-14-6-15), [exercises 6.16-6.19](https://fullstackopen.com/en/part6/communicating_with_server_in_a_redux_application#exercises-6-16-6-19).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part6/anecdotes)

#### 6.20-6.24: Anecdotes use React Query library

Description: Now let's make a new version of the anecdote application that uses the React Query library. Implement the application's notification state management using the useReducer hook and context. The notification should tell the user when a new anecdote is created or an anecdote is voted on. Implement error handling for the insertion. In practice, it is sufficient to display a notification to the user in case of a failed POST request.

Create an application according to the requirements described in [exercises 6.20-6.22](https://fullstackopen.com/en/part6/react_query_use_reducer_and_the_context#exercises-6-20-6-22) and [exercises 6.3-6.24](https://fullstackopen.com/en/part6/react_query_use_reducer_and_the_context#exercises-6-23-6-24).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part6/anecdotes)

## Part 7: [React router, custom hooks, styling app with CSS and webpack](https://fullstackopen.com/en/part7)

### Sub-part A: [React Router](https://fullstackopen.com/en/part7/react_router)

<details>
<summary>Links:</summary>
<li><a href="https://reactrouter.com/en/main" title="React Router library">React Router library</a></li>
<li><a href="https://reactrouter.com/en/main/router-components/browser-router" title="React Router: BrowserRouter">React Router: BrowserRouter</a></li>
<li><a href="https://v5.reactrouter.com/web/api/BrowserRouter" title="React Router: BrowserRouter v5">React Router: BrowserRouter v5</a></li>
<li><a href="https://css-tricks.com/using-the-html5-history-api/" title="Using the HTML5 History API"></a></li>
<li><a href="https://reactrouter.com/en/main/components/link" title="React Router: Link">React Router: Link</a></li>
<li><a href="https://reactrouter.com/en/main/route/route" title="React Router: Route">React Router: Route</a></li>
<li><a href="https://reactrouter.com/en/main/components/routes" title="React Router: Routes">Routes</a></li>
<li><a href="https://reactrouter.com/en/main/hooks/use-params" title="React Router: useParams">React Router: useParams</a></li>
<li><a href="https://reactrouter.com/en/main/hooks/use-navigate" title="React Router: useNavigate">React Router: useNavigate</a></li>
<li><a href="https://reactrouter.com/en/main/components/navigate" title="React Router: Navigate">React Router: Navigate</a></li>
<li><a href="https://reactrouter.com/en/v6.3.0/api#usematch" title="React Router: useMatch">React Router: useMatch</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Very simple and easy implementation a navigation bar and an application using React.

> src/index.js

```js
import { useState } from 'react';
import ReactDOM from 'react-dom/client';

const Home = () => (
  <div>
    <h2>TKTL notes app</h2>
  </div>
);

const Notes = () => (
  <div>
    <h2>Notes</h2>
  </div>
);

const Users = () => (
  <div>
    <h2>Users</h2>
  </div>
);

const App = () => {
  const [page, setPage] = useState('home');

  const toPage = (page) => (event) => {
    event.preventDefault();
    setPage(page);
  };

  const content = () => {
    if (page === 'home') {
      return <Home />;
    } else if (page === 'notes') {
      return <Notes />;
    } else if (page === 'users') {
      return <Users />;
    }
  };

  const padding = { padding: 5 };

  return (
    <div>
      <div>
        <a href='' onClick={toPage('home')} style={padding}>
          home
        </a>
        <a href='' onClick={toPage('notes')} style={padding}>
          notes
        </a>
        <a href='' onClick={toPage('users')} style={padding}>
          users
        </a>
      </div>

      {content()}
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
```

Install React Router library

> npm install react-router-dom

A navigation bar and an application using React.

> src/index.js

```js
import ReactDOM from 'react-dom/client';
import { useState } from 'react';

import {
  BrowserRouter as Router,
  Routes,
  Route,
  Link,
  Navigate,
  useParams,
  useNavigate,
  useMatch,
} from 'react-router-dom';

const Home = () => (
  <div>
    <h2>TKTL notes app</h2>
    <p>
      Lorem Ipsum is simply dummy text of the printing and typesetting industry.
      Lorem Ipsum has been the industry's standard dummy text ever since the
      1500s, when an unknown printer took a galley of type and scrambled it to
      make a type specimen book. It has survived not only five centuries, but
      also the leap into electronic typesetting, remaining essentially
      unchanged. It was popularised in the 1960s with the release of Letraset
      sheets containing Lorem Ipsum passages, and more recently with desktop
      publishing software like Aldus PageMaker including versions of Lorem
      Ipsum.
    </p>
  </div>
);

const Note = ({ note }) => {
  return (
    <div>
      <h2>{note.content}</h2>
      <div>{note.user}</div>
      <div>
        <strong>{note.important ? 'important' : ''}</strong>
      </div>
    </div>
  );
};

const Notes = ({ notes }) => (
  <div>
    <h2>Notes</h2>
    <ul>
      {notes.map((note) => (
        <li key={note.id}>
          <Link to={`/notes/${note.id}`}>{note.content}</Link>
        </li>
      ))}
    </ul>
  </div>
);

const Users = () => (
  <div>
    <h2>TKTL notes app</h2>
    <ul>
      <li>Matti Luukkainen</li>
      <li>Juha Tauriainen</li>
      <li>Arto Hellas</li>
    </ul>
  </div>
);

const Login = (props) => {
  const navigate = useNavigate();

  const onSubmit = (event) => {
    event.preventDefault();
    props.onLogin('mluukkai');
    navigate('/');
  };

  return (
    <div>
      <h2>login</h2>
      <form onSubmit={onSubmit}>
        <div>
          username: <input />
        </div>
        <div>
          password: <input type='password' />
        </div>
        <button type='submit'>login</button>
      </form>
    </div>
  );
};

const App = () => {
  const [notes, setNotes] = useState([
    {
      id: 1,
      content: 'HTML is easy',
      important: true,
      user: 'Matti Luukkainen',
    },
    {
      id: 2,
      content: 'Browser can execute only JavaScript',
      important: false,
      user: 'Matti Luukkainen',
    },
    {
      id: 3,
      content: 'Most important methods of HTTP-protocol are GET and POST',
      important: true,
      user: 'Arto Hellas',
    },
  ]);

  const [user, setUser] = useState(null);

  const match = useMatch('/notes/:id');

  const note = match
    ? notes.find((note) => note.id === Number(match.params.id))
    : null;

  const login = (user) => {
    setUser(user);
  };

  const padding = {
    padding: 5,
  };

  return (
    <div>
      <div>
        <Link style={padding} to='/'>
          home
        </Link>
        <Link style={padding} to='/notes'>
          notes
        </Link>
        <Link style={padding} to='/users'>
          users
        </Link>
        {user ? (
          <em>{user} logged in</em>
        ) : (
          <Link style={padding} to='/login'>
            login
          </Link>
        )}
      </div>
      <Routes>
        <Route path='/notes/:id' element={<Note note={note} />} />
        <Route path='/notes' element={<Notes notes={notes} />} />
        <Route
          path='/users'
          element={user ? <Users /> : <Navigate replace to='/login' />}
        />
        <Route path='/login' element={<Login onLogin={login} />} />
        <Route path='/' element={<Home />} />
      </Routes>
      <div>
        <br />
        <em>Note app, Department of Computer Science 2022</em>
      </div>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(
  <Router>
    <App />
  </Router>
);
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

React has the React Router library which provides an excellent solution for managing navigation in a React application.

BrowserRouter is a Router that uses the HTML5 history API (pushState, replaceState and the popState event) to keep your UI in sync with the URL

</details>

### Sub-part B: [Custom hooks](https://fullstackopen.com/en/part7/custom_hooks)

<details>
<summary>Links:</summary>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html" title="React: Hooks API Reference">React: Hooks API Reference</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#usestate" title="React: useState hook">React: useState hook</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#useeffect" title="React: useEffect hook">React: useEffect hook</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#useimperativehandle" title="React: useImperativeHandle hook">React: useImperativeHandle hook</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#usereducer" title="React: useReducer hook">React: useReducer hook</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#usecontext" title="React: useContext hook">React: useContext hook</a></li>
<li><a href="https://react-redux.js.org/api/hooks#useselector" title="React Redux: useSelector hook">React Redux: useSelector hook</a></li>
<li><a href="https://react-redux.js.org/api/hooks#usedispatch" title="React Redux: useDispatch hook">React Redux: useDispatch hook</a></li>
<li><a href="https://reactrouter.com/en/main/start/tutorial" title="React Router Tutorial">React Router Tutorial</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-rules.html" title="React: Rules of Hooks">React: Rules of Hooks</a></li>
<li><a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" title="This ESLint plugin enforces the Rules of Hooks">This ESLint plugin enforces the Rules of Hooks</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-rules.html#eslint-plugin" title="React: ESLint plugin">React: ESLint plugin</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-custom.html" title="React: custom hooks">React: custom hooks</a></li>
<li><a href="https://legacy.reactjs.org/docs/jsx-in-depth.html#spread-attributes" title="React: spread syntax">React: spread syntax</a></li>
<li><a href="https://github.com/rehooks/awesome-react-hooks" title="Awesome React Hooks Resources">Awesome React Hooks Resources</a></li>
<li><a href="https://usehooks.com/" title="Easy to understand React Hook recipes by Gabe Ragland">Easy to understand React Hook recipes by Gabe Ragland</a></li>
<li><a href="https://overreacted.io/why-do-hooks-rely-on-call-order/" title="Why Do React Hooks Rely on Call Order?">Why Do React Hooks Rely on Call Order?</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export#description" title="Web: named export">Web: named export</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" title="Web: import">Web: import</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect" title="React: useEffect's second parameter">React: useEffect's second parameter</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Create new React appliaction.

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
```

Create a custom hook for using in a form as field managment

> src/hooks/index.js

```js
import { useState } from 'react';

export const useField = (type) => {
  const [value, setValue] = useState('');

  const onChange = (event) => {
    setValue(event.target.value);
  };

  return {
    type,
    value,
    onChange,
  };
};
```

Use the custom hook in App component with the form

> src/App.js

```js
import { useField } from './hooks';

const App = () => {
  const name = useField('text');
  const born = useField('date');
  const height = useField('number');

  return (
    <div>
      <form>
        name:
        <input {...name} />
        <br />
        birthdate:
        <input {...born} />
        <br />
        height:
        <input {...height} />
      </form>
      <div>
        {name.value} {born.value} {height.value}
      </div>
    </div>
  );
};

export default App;
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

**Donât call Hooks inside loops, conditions, or nested functions.** Instead, always use Hooks at the top level of your React function.

**Donât call Hooks from regular JavaScript functions.** Instead, you can:

- Call Hooks from React function components.
- Call Hooks from custom Hooks

Building your own Hooks lets you extract component logic into reusable functions.

</details>

### Sub-part C: [More about styles](https://fullstackopen.com/en/part7/more_about_styles)

<details>
<summary>Links:</summary>
<li><a href="https://getbootstrap.com/" title="UI framework: Bootstrap">UI framework: Bootstrap</a></li>
<li><a href="http://reactstrap.github.io/?path=/story/home-installation--page" title="React versions of Bootstrap: reactstrap">React versions of Bootstrap: reactstrap</a></li>
<li><a href="https://react-bootstrap.github.io/" title="React versions of Bootstrap: react-bootstrap">React versions of Bootstrap: react-bootstrap</a></li>
<li><a href="https://mui.com/" title="UI framework: MaterialUI">UI framework: MaterialUI</a></li>
<li><a href="https://react-bootstrap.github.io/" title="UI framework: Bootstrap">UI framework: Bootstrap</a></li>
<li><a href="https://react-bootstrap.github.io/docs/getting-started/introduction#css" title="Bootstrap: link for loading the CSS stylesheet">Bootstrap: link for loading the CSS stylesheet</a></li>
<li><a href="https://getbootstrap.com/docs/4.1/layout/overview/#containers" title="Bootstrap: containers">Bootstrap: containers</a></li>
<li><a href="https://getbootstrap.com/docs/4.1/content/tables/" title="Bootstrap: tables">Bootstrap: tables</a></li>
<li><a href="https://getbootstrap.com/docs/4.1/components/forms/" title="Bootstrap: forms">Bootstrap: forms</a></li>
<li><a href="https://getbootstrap.com/docs/4.1/components/alerts/" title="Bootstrap: Alerts">Bootstrap: Alerts</a></li>
<li><a href="https://getbootstrap.com/docs/4.1/components/navbar/" title="Bootstrap: Navbar">Bootstrap: Navbar</a></li>
<li><a href="https://en.wikipedia.org/wiki/Responsive_web_design" title="Responsive web design">Responsive web design</a></li>
<li><a href="https://mui.com/" title="MaterialUI React library">MaterialUI React library</a></li>
<li><a href="https://m3.material.io/" title="Material Design: Googleâs open-source design system">Material Design</a></li>
<li><a href="https://mui.com/material-ui/react-container/" title="MaterialUI: Container">MaterialUI: Container</a></li>
<li><a href="https://mui.com/material-ui/react-table/#simple-table" title="MaterialUI: Table">MaterialUI: Table</a></li>
<li><a href="https://mui.com/material-ui/react-text-field/" title="MaterialUI: Text Field">MaterialUI: Text Field</a></li>
<li><a href="https://mui.com/material-ui/api/button/" title="MaterialUI: Button">MaterialUI: Button</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form" title="HTML: form tag">HTML: form tag</a></li>
<li><a href="https://mui.com/material-ui/react-alert/" title="MaterialUI: Alert">MaterialUI: Alert</a></li>
<li><a href="https://mui.com/material-ui/react-app-bar/" title="MaterialUI: App Bar">MaterialUI: App Bar</a></li>
<li><a href="https://mui.com/material-ui/guides/composition/#routing-libraries" title="MaterialUI: composition - routing-libraries">MaterialUI: composition - routing-libraries</a></li>
<li><a href="https://mui.com/material-ui/guides/composition/#component-prop" title="MaterialUI: composition - component-prop">MaterialUI: composition - component-prop</a></li>
<li><a href="https://getbootstrap.com/docs/4.1/getting-started/introduction/#js" title="Bootstrap: JavaScript dependencies">Bootstrap: JavaScript dependencies</a></li>
<li><a href="https://react.semantic-ui.com/" title="Semantic UI React">Semantic UI React</a></li>
<li><a href="https://mantine.dev/" title="UI framework: Mantine">UI framework: Mantine</a></li>
<li><a href="https://react.fluentui.dev/?path=/docs/concepts-introduction--page" title="UI framework: Fluent UI React">UI framework: Fluent UI React</a></li>
<li><a href="https://storybook.js.org/" title="UI framework: Storybook">UI framework: Storybook</a></li>
<li><a href="https://primereact.org/" title="UI framework: PrimeReact">UI framework: PrimeReact</a></li>
<li><a href="https://v2.grommet.io/" title="UI framework: grommet">UI framework: grommet</a></li>
<li><a href="https://blueprintjs.com/" title="UI framework: Blueprint">UI framework: Blueprint</a></li>
<li><a href="https://evergreen.segment.com/" title="UI framework: Evergreen">UI framework: Evergreen</a></li>
<li><a href="https://www.radix-ui.com/" title="UI framework: Radix">UI framework: Radix</a></li>
<li><a href="https://react-spectrum.adobe.com/react-aria/index.html" title="UI framework: React Aria">UI framework: React Aria</a></li>
<li><a href="https://master.co/" title="UI framework: master">UI framework: master</a></li>
<li><a href="https://nextui.org/" title="UI framework: NextUI">UI framework: NextUI</a></li>
<li><a href="https://daisyui.com/" title="UI framework: daisyUI">UI framework: daisyUI</a></li>
<li><a href="https://bulma.io/" title="UI framework: Bulma">UI framework: Bulma</a></li>
<li><a href="https://ant.design/" title="UI framework: Ant Design">UI framework: Ant Design</a></li>
<li><a href="https://get.foundation/" title="UI framework: Foundation">UI framework: Foundation</a></li>
<li><a href="https://chakra-ui.com/" title="UI framework: Chakra UI">UI framework: Chakra UI</a></li>
<li><a href="https://tailwindcss.com/" title="UI framework: tailwindcss">UI framework: tailwindcss</a></li>
<li><a href="https://semantic-ui.com/" title="UI framework: Semantic UI">UI framework: Semantic UI</a></li>
<li><a href="https://blog.bitsrc.io/5-ways-to-style-react-components-in-2019-30f1ccc2b5b" title="5 Ways to Style React Components in 2020">5 Ways to Style React Components in 2020</a></li>
<li><a href="https://styled-components.com/" title="Styled components library">Styled components library</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates" title="Template literals (Template strings)">Template literals (Template strings)</a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### React Bootstrap

Install Bootstrap library

> npm install react-bootstrap

Add link to bootstrap in head tag

> public/index.html

```js
<head>
  <link
    rel='stylesheet'
    href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css'
    integrity='sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM'
    crossorigin='anonymous'
  />
  // ...
</head>
```

Update App with adding container in root div tag and to use the Bootstrap alart element with notification

> src/App.js

```js
//...
import { Alert } from 'react-bootstrap';
//...

const App = () => {
  //...
  const [message, setMessage] = useState(null);
  //...
  const login = (user) => {
    setUser(user);
    setMessage(`welcome ${user}`);
    setTimeout(() => {
      setMessage(null);
    }, 10000);
  };
  //...

  return (
    <div className='container'>
      {message && <Alert variant='success'>{message}</Alert>}
      {/* ... */}
    </div>
  );
};

export default App;
```

Update Notes component to use the Bootstrap element table

> src/components/Notes.js

```js
import { Table } from 'react-bootstrap';

const Notes = ({ notes }) => (
  <div>
    <h2>Notes</h2>

    <Table striped>
      <tbody>
        {notes.map((note) => (
          <tr key={note.id}>
            <td>
              <Link to={`/notes/${note.id}`}>{note.content}</Link>
            </td>
            <td>{note.user}</td>
          </tr>
        ))}
      </tbody>
    </Table>
  </div>
);

export default Notes;
```

Update Login component to use Bootstrap elements form and button

> src/components/Login.js

```js
import { useNavigate } from 'react-router-dom';
import { Form, Button } from 'react-bootstrap';

const Login = (props) => {
  // ...
  return (
    <div>
      <h2>login</h2>
      <Form onSubmit={onSubmit}>
        <Form.Group>
          <Form.Label>username:</Form.Label>
          <Form.Control type='text' name='username' />
          <Form.Label>password:</Form.Label>
          <Form.Control type='password' />
          <Button variant='primary' type='submit'>
            login
          </Button>
        </Form.Group>
      </Form>
    </div>
  );
};

export default Login;
```

Update NavBar component to use bootstrap elements navbar and nav

> src/components/NavBar.js

```js
import { Link } from 'react-router-dom';
import { Navbar, Nav } from 'react-bootstrap';

const NavBar = ({ user }) => {
  const padding = {
    padding: 5,
  };

  return (
    <Navbar collapseOnSelect expand='lg' bg='dark' variant='dark'>
      <Navbar.Toggle aria-controls='responsive-navbar-nav' />
      <Navbar.Collapse id='responsive-navbar-nav'>
        <Nav className='me-auto'>
          <Nav.Link href='#' as='span'>
            <Link style={padding} to='/'>
              home
            </Link>
          </Nav.Link>
          <Nav.Link href='#' as='span'>
            <Link style={padding} to='/notes'>
              notes
            </Link>
          </Nav.Link>
          <Nav.Link href='#' as='span'>
            <Link style={padding} to='/users'>
              users
            </Link>
          </Nav.Link>
          <Nav.Link href='#' as='span'>
            {user ? (
              <em style={padding}>{user} logged in</em>
            ) : (
              <Link style={padding} to='/login'>
                login
              </Link>
            )}
          </Nav.Link>
        </Nav>
      </Navbar.Collapse>
    </Navbar>
  );
};

export default NavBar;
```

#### Material UI

Install MaterialUI React library

> npm install @mui/material @emotion/react @emotion/styled

Update App component to use the MaterialUA Container and add alart element with notification

> src/App.js

```js
//...
import { Container, Alert } from '@mui/material';
//...
const App = () => {
  //...
  const [message, setMessage] = useState(null);
  //...
  const login = (user) => {
    setUser(user);
    setMessage(`welcome ${user}`);
    setTimeout(() => {
      setMessage(null);
    }, 10000);
  };

  return (
    <Container>
      {message && <Alert severity='success'>{message}</Alert>}
      {/* ... */}
    </Container>
  );
};

export default App;
```

Update Notes component to use the MaterialUA elements Table, TableBody, TableCell, TableContainer, TableRow, Paper.

> src/components/Notes.js

```js
import { Link } from 'react-router-dom';
import {
  Table,
  TableBody,
  TableCell,
  TableContainer,
  TableRow,
  Paper,
} from '@mui/material';

const Notes = ({ notes }) => (
  <div>
    <h2>Notes</h2>
    <TableContainer component={Paper}>
      <Table>
        <TableBody>
          {notes.map((note) => (
            <TableRow key={note.id}>
              <TableCell>
                <Link to={`/notes/${note.id}`}>{note.content}</Link>
              </TableCell>
              <TableCell>{note.user}</TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </TableContainer>
  </div>
);

export default Notes;
```

Update Login component to use MaterialUA elements TextField and Button

> src/components/Login.js

```js
import { useNavigate } from 'react-router-dom';
import { TextField, Button } from '@mui/material';

const Login = (props) => {
  //...
  return (
    <div>
      <h2>login</h2>
      <form onSubmit={onSubmit}>
        <div>
          <TextField label='username' />
        </div>
        <div>
          <TextField label='password' type='password' />
        </div>
        <div>
          <Button variant='contained' color='primary' type='submit'>
            login
          </Button>
        </div>
      </form>
    </div>
  );
};

export default Login;
```

Update NavBar component to use MaterialUA elements AppBar, Toolbar and Button (with link component inside)

> src/components/NavBar.js

```js
import { Link } from 'react-router-dom';
import { AppBar, Toolbar, Button } from '@mui/material';

const NavBar = ({ user }) => {
  return (
    <AppBar position='static'>
      <Toolbar>
        <Button color='inherit' component={Link} to='/'>
          home
        </Button>
        <Button color='inherit' component={Link} to='/notes'>
          notes
        </Button>
        <Button color='inherit' component={Link} to='/users'>
          users
        </Button>
        {user ? (
          <em>{user} logged in</em>
        ) : (
          <Button color='inherit' component={Link} to='/login'>
            login
          </Button>
        )}
      </Toolbar>
    </AppBar>
  );
};

export default NavBar;
```

#### Styled components

Install styled components library

> npm install styled-components

Update App component to use Styled components

> src/App.js

```js
//...
import styled from 'styled-components';
//...

const Page = styled.div`
  padding: 1em;
  background: papayawhip;
`;

const Footer = styled.div`
  background: Chocolate;
  padding: 1em;
  margin-top: 1em;
`;

const App = () => {
  //...
  return (
    <Page>
      <NavBar user={user} />
      {/* ... */}
      <Footer>
        <br />
        <em>Note app, Department of Computer Science 2022</em>
      </Footer>
    </Page>
  );
};

export default App;
```

Update Login component to use Styled components

> src/components/Login.js

```js
import { useNavigate } from 'react-router-dom';
import styled from 'styled-components';

const Button = styled.button`
  background: Bisque;
  font-size: 1em;
  margin: 1em;
  padding: 0.25em 1em;
  border: 2px solid Chocolate;
  border-radius: 3px;
`;

const Input = styled.input`
  margin: 0.25em;
`;

const Login = (props) => {
  const navigate = useNavigate();

  const onSubmit = (event) => {
    event.preventDefault();
    props.onLogin('mluukkai');
    navigate('/');
  };

  return (
    <div>
      <h2>login</h2>
      <form onSubmit={onSubmit}>
        <div>
          username: <Input />
        </div>
        <div>
          password: <Input type='password' />
        </div>
        <Button type='submit'>login</Button>
      </form>
    </div>
  );
};

export default Login;
```

Update NavBar component to use Styled components

> src/components/NavBar.js

```js
import { Link } from 'react-router-dom';
import styled from 'styled-components';

const Navigation = styled.div`
  background: BurlyWood;
  padding: 1em;
`;

const NavBar = ({ user }) => {
  const padding = {
    padding: 5,
  };

  return (
    <Navigation>
      <Link style={padding} to='/'>
        home
      </Link>
      <Link style={padding} to='/notes'>
        notes
      </Link>
      <Link style={padding} to='/users'>
        users
      </Link>
      {user ? (
        <em>{user} logged in</em>
      ) : (
        <Link style={padding} to='/login'>
          login
        </Link>
      )}
    </Navigation>
  );
};

export default NavBar;
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

One approach to defining styles for an application is to use a ready-made "UI framework"
UI frameworks:

- Bootstrap
- MaterialUI
- Bulma
- Semantic UI React
- Mantine
- Fluent UI React
- Storybook
- PrimeReact
- grommet
- Blueprint
- Evergreen
- Radix
- React Aria
- master
- NextUI
- daisyUI
- Ant Design
- Foundation
- Chakra UI
- tailwindcss

</details>

### Sub-part D: [Webpack](https://fullstackopen.com/en/part7/webpack)

<details>
<summary>Links:</summary>
<li><a href="https://github.com/facebook/create-react-app" title="Create React App">Create React App</a></li>
<li><a href="https://webpack.js.org/" title="Webpack">Webpack</a></li>
<li><a href="https://webpack.js.org/concepts/#entry" title="Webpack: Entry">Webpack: Entry</a></li>
<li><a href="https://webpack.js.org/concepts/#output" title="Webpack: Output">Webpack: Output</a></li>
<li><a href="https://nodejs.org/docs/latest-v8.x/api/path.html#path_path_resolve_paths" title="NodeJS: path.resolve()">NodeJS: path.resolve()</a></li>
<li><a href="https://nodejs.org/docs/latest/api/globals.html#globals_dirname" title="NodeJS: __dirname">NodeJS: __dirname</a></li>
<li><a href="https://facebook.github.io/jsx/" title="JSX">JSX</a></li>
<li><a href="https://webpack.js.org/concepts/loaders/" title="Webpack: Loaders">Webpack: Loaders</a></li>
<li><a href="https://github.com/babel/babel-loader" title="Babel Loader">Babel Loader</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-without-jsx.html" title="React: React Without JSX">React: React Without JSX</a></li>
<li><a href="https://babeljs.io/docs/babel-polyfill/" title="babel/polyfill">babel/polyfill</a></li>
<li><a href="https://www.npmjs.com/package/core-js" title="NPM: core JS">NPM: core JS</a></li>
<li><a href="https://www.npmjs.com/package/regenerator-runtime" title="NPM: regenerator-runtime">NPM: regenerator-runtime</a></li>
<li><a href="https://babeljs.io/" title="Bable">Bable</a></li>
<li><a href="https://babeljs.io/docs/plugins/" title="Bable: Plugins">Bable: Plugins</a></li>
<li><a href="https://babeljs.io/docs/babel-preset-react/" title="Bable: Preset React">Bable: Preset React</a></li>
<li><a href="https://babeljs.io/docs/babel-preset-env/" title="Bable: Preset env">Bable: Preset env</a></li>
<li><a href="https://webpack.js.org/loaders/css-loader/" title="Webpack: css-loader">Webpack: css-loader</a></li>
<li><a href="https://webpack.js.org/loaders/style-loader/" title="Webpack: style-loader">Webpack: style-loader</a></li>
<li><a href="https://github.com/webpack-contrib/mini-css-extract-plugin" title="mini-css-extract-plugin">mini-css-extract-plugin</a></li>
<li><a href="https://webpack.js.org/guides/development/#using-webpack-dev-server" title="Webpack: webpack-dev-server">Webpack: webpack-dev-server</a></li>
<li><a href="https://webpack.js.org/configuration/devtool/" title="Webpack: source map">Webpack: source map</a></li>
<li><a href="https://lisperator.net/uglifyjs/" title=" UglifyJS"> UglifyJS</a></li>
<li><a href="https://webpack.js.org/plugins/define-plugin/" title="Webpack: DefinePlugin">Webpack: DefinePlugin</a></li>
<li><a href="https://webpack.js.org/guides/production/" title="Webpack: Production">Webpack: Production</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="JavaScript: Promise"></a>JavaScript: Promise</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find" title="JavaScript: Array .find()">JavaScript: Array .find()</a></li>
<li><a href="https://remysharp.com/2010/10/08/what-is-a-polyfill" title="What is a Polyfill?">What is a Polyfill?</a></li>
<li><a href="https://www.npmjs.com/package/promise-polyfill" title="NPM: promise-polyfill">NPM: promise-polyfill</a></li>
<li><a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills" title="HTML5 Cross Browser Polyfills">HTML5 Cross Browser Polyfills</a></li>
<li><a href="https://caniuse.com/" title="Can I use ______ ?">Can I use ______ ?</a></li>
<li><a href="https://developer.mozilla.org/en-US/" title="Resources for Developers, by Developers">Resources for Developers, by Developers</a></li>
<li><a href="https://create-react-app.dev/docs/available-scripts/#npm-run-eject" title="Raect: npm run eject">Raect: npm run eject</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### Create webpack

Create a suitable webpack configuration for a React application. Create a new directory for the project with the following subdirectories

```js
âââ build
âââ package.json
âââ src
â   âââ index.js
âââ webpack.config.js
```

Install webpack with the command

> npm install --save-dev webpack webpack-cli

Create config for webpack

> webpack.config.js

```js
const path = require('path');

const config = () => {
  return {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'build'),
      filename: 'main.js',
    },
  };
};

module.exports = config;
```

Create package for aplication

> package.json

```js
{
  "name": "webpack-part7",
  "version": "0.0.1",
  "description": "practising webpack",
"scripts": {
  "build": "webpack --mode=development"
},
  "license": "MIT"
}
```

Create simple js

> src/index.js

```js
const hello = (name) => {
  console.log(`hello ${name}`);
};
```

To build webpack with next command

> npm run build

#### Webpack for React

```js
âââ build
âââ package.json
âââ src
â   âââ index.js
â   âââ index.css
â   âââ App.js
âââ webpack.config.js
```

Install the libraries to transform the application into a minimal React application.

> npm install react react-dom

Install the loader and its required packages as a development dependency

> npm install @babel/core babel-loader @babel/preset-react --save-dev

Update webpack.config to use loader

> webpack.config

```js
const path = require('path');

const config = () => {
  return {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'build'),
      filename: 'main.js',
    },
    module: {
      rules: [
        {
          test: /\.js$/,
          loader: 'babel-loader',
          options: {
            presets: ['@babel/preset-react'],
          },
        },
      ],
    },
  };
};

module.exports = config;
```

Install two more missing dependencies, that is core-js and regenerator-runtime to bundled application's source code uses async/await, because the previous solution being deprecated

> npm install core-js regenerator-runtime

Install the preset with the command

> npm install @babel/preset-env --save-dev

And update the webpack config

> webpack.config.js

```js
{
  test: /\.js$/,
  loader: 'babel-loader',
  options: {

    presets: ['@babel/preset-env', '@babel/preset-react']
  }
}
```

Create App component

> src/App.js

```js
import React from 'react';

const App = () => {
  return <div>hello webpack</div>;
};

export default App;
```

Update index component to use App and dependencies

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import 'core-js/stable/index.js';
import 'regenerator-runtime/runtime.js';

import App from './App';

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
```

#### CSS

Install the loader for css

> npm install style-loader css-loader --save-dev

And update webpack to add loader for css

> webpack.config.js

```js
// ...
   rules: [
        // ...
        {
          test: /\.css$/,
          use: ['style-loader', 'css-loader'],
        },
      ],
  // ...
```

Create index css file

> src/index.css

```css
.container {
  margin: 10px;
  background-color: #dee8e4;
}
```

Update App to use the css file

> src/App.js

```js
import React from 'react';

import './index.css';

const App = () => {
  return <div className='container'>hello webpack</div>;
};

export default App;
```

#### webpack-dev-server

Install webpack-dev-server to auto bundle the code and refresh the browser every time we make a change to the code.

> npm install --save-dev webpack-dev-server

Update webpack config to add devServer

> webpack.config.js

```js
const config = {
  entry: './src/index.js',
  output: {
    //...
  },
  devServer: {
    static: path.resolve(__dirname, 'build'),
    compress: true,
    port: 3000,
  },
  // ...
};
```

Update npm script to use it

> package.json

```js
{
  // ...
  "scripts": {
    "build": "webpack --mode=development",
    "start": "webpack serve --mode=development"
  },
  // ...
}
```

#### Source map

Update webpack to generate a so-called source map for the bundle, which makes it possible to map errors that occur during the execution of the bundle to the corresponding part in the original source code

> webpack.config.js

```js
const config = {
  entry: './src/index.js',
  output: {
    // ...
  },
  devServer: {
    // ...
  },
  devtool: 'source-map',
  // ..
};
```

#### Minifying the code

Update package.json to specify that webpack will execute the bundling of the code in production mode to do minification.

> package.json

```js
{
  // ...
"scripts": {
    "build": "webpack --mode=production",
    "start": "webpack serve --mode=development"
  },
  // ...
}
```

#### Development and production configuration

Update webpack to gets a different value depending on the environment

> webpack.config.js

```js
const path = require('path');
const webpack = require('webpack');

const config = (env, argv) => {
  console.log('argv', argv.mode);
  const backend_url =
    argv.mode === 'production'
      ? 'https://notes2023.fly.dev/api/notes'
      : 'http://localhost:3001/notes';

  return {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'build'),
      filename: 'main.js',
    },
    devServer: {
      static: path.resolve(__dirname, 'build'),
      compress: true,
      port: 3000,
    },
    devtool: 'source-map',
    module: {
      // ...
    },

    plugins: [
      new webpack.DefinePlugin({
        BACKEND_URL: JSON.stringify(backend_url),
      }),
    ],
  };
};

module.exports = config;
```

Install axios library to application use it

> npm install axios

Update App component with adding anxios

> src/App.js

```js
import React, { useState, useEffect } from 'react';
import axios from 'axios';

import './index.css';

const useNotes = (url) => {
  const [notes, setNotes] = useState([]);
  useEffect(() => {
    axios.get(url).then((response) => {
      setNotes(response.data);
    });
  }, [url]);
  return notes;
};

const App = () => {
  const [counter, setCounter] = useState(0);
  const [values, setValues] = useState([]);

  const notes = useNotes(BACKEND_URL);

  const handleClick = () => {
    setCounter(counter + 1);
    setValues(values.concat(counter));
  };

  return (
    <div className='container'>
      hello webpack {counter} clicks
      <button onClick={handleClick}>press</button>
      <div>
        {notes.length} notes on server {BACKEND_URL}
      </div>
    </div>
  );
};

export default App;
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

The process of transforming code from one form of JavaScript to another is called transpiling.

</details>

### Sub-part E: [Class components, Miscellaneous](https://fullstackopen.com/en/part7/class_components_miscellaneous)

<details>
<summary>Links:</summary>
<li><a href="https://legacy.reactjs.org/docs/hooks-intro.html" title="React: Hooks">React: Hooks</a></li>
<li><a href="https://legacy.reactjs.org/docs/state-and-lifecycle.html#converting-a-function-to-a-class" title="React: Class syntax">React: Class syntax</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-component.html#constructor" title="React: Class-constructor">React: Class-constructor</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-component.html#render" title="React: Class-render method">React: Class-render method</a></li>
<li><a href="https://legacy.reactjs.org/docs/state-and-lifecycle.html#adding-lifecycle-methods-to-a-class" title="React: lifecycle methods of Class Components">React: lifecycle methods of Class Components</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-component.html#setstate" title="React: Class-setState">React: Class-setState</a></li>
<li><a href="https://legacy.reactjs.org/docs/error-boundaries.html" title="React: Class- error boundary mechanism">React: Class- error boundary mechanism</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both" title="Should I use Hooks, classes, or a mix of both?">Should I use Hooks, classes, or a mix of both?</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-faq.html#do-i-need-to-rewrite-all-my-class-components" title="Do I need to rewrite all my class components?">Do I need to rewrite all my class components?</a></li>
<li><a href="https://github.com/mars/create-react-app-buildpack" title="Heroku Buildpack for create-react-app">Heroku Buildpack for create-react-app</a></li>
<li><a href="https://github.com/fullstack-hy2020/create-app" title="One possible starting point for the organization of 'single repository code'">One possible starting point for the organization of 'single repository code'</a></li>
<li><a href="https://en.wikipedia.org/wiki/Polling_(computer_science)" title="Polling">Polling</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval" title="Web: setInterval">Web: setInterval</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" title="Web: WebSockets API">Web: WebSockets API</a></li>
<li><a href="https://socket.io/" title="Socket.io library">Socket.io library</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" title="Document Object Model (DOM)">Document Object Model (DOM)</a></li>
<li><a href="https://legacy.reactjs.org/docs/glossary.html#elements" title="React: Elements">React: Elements</a></li>
<li><a href="https://legacy.reactjs.org/docs/faq-internals.html#what-is-the-virtual-dom" title="What is the Virtual DOM">What is the Virtual DOM</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-dom.html" title="React: ReactDOM library">React: ReactDOM library</a></li>
<li><a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" title="Model View Controller">Model View Controller</a></li>
<li><a href="https://angular.io/" title="Angular">Angular</a></li>
<li><a href="https://en.wikipedia.org/wiki/Overengineering" title="over-engineering">over-engineering</a></li>
<li><a href="https://cybersecuritybase.mooc.fi/module-2.1" title="Helsinki Open University: Cyber Security Base 2023">Helsinki Open University: Cyber Security Base 2023</a></li>
<li><a href="https://owasp.org/" title="The Open Web Application Security Project (OWASP)">The Open Web Application Security Project (OWASP)</a></li>
<li><a href="https://owasp.org/www-project-top-ten/" title="OWASP: top 10 risks">OWASP: top 10 risks</a></li>
<li><a href="https://security.stackexchange.com/questions/230211/why-are-stored-procedures-and-prepared-statements-the-preferred-modern-methods-f" title="SQL injections are prevented using parameterized queries">SQL injections are prevented using parameterized queries</a></li>
<li><a href="https://zanon.io/posts/nosql-injection-in-mongodb/" title="NoSQL Injection in MongoDB">NoSQL Injection in MongoDB</a></li>
<li><a href="https://legacy.reactjs.org/docs/introducing-jsx.html#jsx-prevents-injection-attacks" title="React takes care of sanitizing data in variables">React takes care of sanitizing data in variables</a></li>
<li><a href="https://medium.com/dailyjs/exploiting-script-injection-flaws-in-reactjs-883fb1fe36c1" title="Exploiting script injection flaws in ReactJS apps">Exploiting script injection flaws in ReactJS apps</a></li>
<li><a href="https://expressjs.com/en/advanced/security-updates.html" title="Express: Security updates">Express: Security updates</a></li>
<li><a href="https://nodejs.org/en/blog" title="NodeJS: Security updates">NodeJS: Security updates</a></li>
<li><a href="https://docs.npmjs.com/cli/v9/commands/npm-audit" title="npm audit command">npm audit command</a></li>
<li><a href="https://github.com/immerjs/immer" title="Immer library">Immer library</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Website_security" title="Website security guide">Website security guide</a></li>
<li><a href="https://expressjs.com/en/advanced/best-practice-security.html" title="Express: Production Best Practices: Security">Express: Production Best Practices: Security</a></li>
<li><a href="https://helmetjs.github.io/" title="Helmet library">Helmet library</a></li>
<li><a href="https://github.com/eslint-community/eslint-plugin-security" title="ESlint security-plugin">ESlint security-plugin</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Dynamic_typing" title="Dynamic typing">Dynamic typing</a></li>
<li><a href="https://en.wikipedia.org/wiki/Type_system#Static_type_checking" title="Static type checking">Static type checking</a></li>
<li><a href="https://www.typescriptlang.org/" title="TypeScript">TypeScript</a></li>
<li><a href="https://legacy.reactjs.org/docs/react-dom-server.html" title="ReactDOMServer">ReactDOMServer</a></li>
<li><a href="https://www.javascriptstuff.com/react-seo/" title="Will Google find your React content?">Will Google find your React content?</a></li>
<li><a href="https://www.freecodecamp.org/news/seo-vs-react-is-it-neccessary-to-render-react-pages-in-the-backend-74ce5015c0c9" title="SEO vs. React: Web Crawlers are Smarter Than You Think">SEO vs. React: Web Crawlers are Smarter Than You Think</a></li>
<li><a href="https://medium.com/@ghengeveld/isomorphism-vs-universal-javascript-4b47fb481beb" title="Isomorphism vs Universal JavaScript">Isomorphism vs Universal JavaScript</a></li>
<li><a href="https://github.com/vercel/next.js" title="Next.js">Next.js</a></li>
<li><a href="https://web.dev/progressive-web-apps/" title="progressive web app (PWA)">progressive web app (PWA)</a></li>
<li><a href="https://create-react-app.dev/docs/making-a-progressive-web-app/" title="React: Making a Progressive Web App">React: Making a Progressive Web App</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" title="Service Worker API">Service Worker API</a></li>
<li><a href="https://martinfowler.com/articles/microservices.html" title="A microservice architecture (microservices)">A microservice architecture (microservices)</a></li>
<li><a href="https://microservices.io/patterns/apigateway" title="Pattern: API Gateway / Backends for Frontends">Pattern: API Gateway / Backends for Frontends</a></li>
<li><a href="https://www.infoq.com/presentations/netflix-chaos-microservices/" title="Mastering Chaos - A Netflix Guide to Microservices">Mastering Chaos - A Netflix Guide to Microservices</a></li>
<li><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" title="No Silver Bullet">No Silver Bullet</a></li>
<li><a href="https://martinfowler.com/bliki/MonolithFirst.html" title="MonolithFirst">MonolithFirst</a></li>
<li><a href="https://martinfowler.com/articles/dont-start-monolith.html" title="Donât start with a monolith">Donât start with a monolith</a></li>
<li><a href="https://aws.amazon.com/lambda/" title="AWS Lambda">AWS Lambda</a></li>
<li><a href="https://www.serverless.com/" title="Serverless Apps">Serverless Apps</a></li>
<li><a href="https://cloud.google.com/functions/" title="Google's Cloud functions">Google's Cloud functions</a></li> 
<li><a href="https://azure.microsoft.com/en-us/products/functions/" title="functionality in Azure">functionality in Azure</a></li>
<li><a href="https://aws.amazon.com/api-gateway/" title="Amazon API Gateway">Amazon API Gateway</a></li>
<li><a href="https://www.npmjs.com/package/lodash" title="The Lodash library exported as Node.js modules.">The Lodash library exported as Node.js modules.</a></li>
<li><a href="https://ramdajs.com/" title="Ramda: A practical functional library for JavaScript programmers.">Ramda: A practical functional library for JavaScript programmers.</a></li>
<li><a href="https://github.com/date-fns/date-fns" title="date-fns provides the most comprehensive, yet simple and consistent toolset
for manipulating JavaScript dates in a browser & Node.js.">date-fns provides the most comprehensive, yet simple and consistent toolset
for manipulating JavaScript dates in a browser & Node.js.</a></li>
<li><a href="https://react-hook-form.com/" title="React Hook Form: Performant, flexible and extensible forms with easy-to-use validation.">React Hook Form: Performant, flexible and extensible forms with easy-to-use validation.</a></li>
<li><a href="https://recharts.org/en-US/" title="Recharts: A composable charting library built on React components">Recharts: A composable charting library built on React components</a></li>
<li><a href="https://github.com/highcharts/highcharts-react" title="Highcharts React: Official minimal Highcharts wrapper for React.">Highcharts React: Official minimal Highcharts wrapper for React.</a></li>
<li><a href="https://github.com/immerjs/immer" title="Immer: Create the next immutable state tree by simply modifying the current tree">Immer: Create the next immutable state tree by simply modifying the current tree</a></li>
<li><a href="https://redux-saga.js.org/" title="Redux-Saga: An intuitive Redux side effect manager.">Redux-Saga: An intuitive Redux side effect manager.</a></li>
<li><a href="https://github.com/react-ga/react-ga" title="React Google Analytics Module">React Google Analytics Module</a></li>
<li><a href="https://developers.google.com/analytics/devguides/collection/gtagjs/single-page-applications" title="Single page application measurement with gtag.js">Single page application measurement with gtag.js</a></li>
<li><a href="https://reactnative.dev/" title="React Native">React Native</a></li>
<li><a href="https://www.npmjs.com/package/bower" title="2011 Bower - A package manager for the web">2011 Bower - A package manager for the web</a></li>
<li><a href="https://www.npmjs.com/package/grunt" title="2012 Grunt: The JavaScript Task Runner">2012 Grunt: The JavaScript Task Runner</a></li>
<li><a href="https://www.npmjs.com/package/gulp" title="2013-14 Gulp: Automation, Platform-agnostic, Strong Ecosystem, Simple toolkit">2013-14 Gulp: Automation, Platform-agnostic, Strong Ecosystem, Simple toolkit</a></li>
<li><a href="https://www.npmjs.com/package/browserify" title="2012-14 Browserify: to organize your browser code and load modules installed by npm.">2012-14 Browserify: to organize your browser code and load modules installed by npm.</a></li>
<li><a href="https://www.npmjs.com/package/webpack" title="2015 - Webpack is a module bundler.">2015 - Webpack is a module bundler.</a></li>
<li><a href="https://parceljs.org/" title="Parcel: The zero configuration build tool">Parcel: The zero configuration build tool</a></li>
<li><a href="https://vitejs.dev/" title="Vite: Next Generation Frontend Tooling">Vite: Next Generation Frontend Tooling</a></li>
<li><a href="https://rome.tools/" title="Rome library,">Rome library,</a></li>
<li><a href="https://reactpatterns.com/" title="Get the latest React patterns, tips, and tricks right to your inbox">Get the latest React patterns, tips, and tricks right to your inbox</a></li>
<li><a href="https://vasanthk.gitbooks.io/react-bits/content/" title="A compilation of React Patterns, techniques, tips and tricks.">A compilation of React Patterns, techniques, tips and tricks.</a></li>
<li><a href="https://www.reactiflux.com/" title="big chat community of React developers on Discord">big chat community of React developers on Discord</a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### Class components React app

Create React app

> npx create-react-app class-react-app

Install JSON server to connect with backend

> cd class-react-app
> npm install json-server

Update scrypt to start server on port 3001

> package.json

```js
{
   "scripts": {
    "start": "react-scripts start",
    "server": "json-server --watch db.json --port 3001",
   // ...
  },
}
```

Create a db file

> db.json

```js
{
  "anecdotes":[
    {
      "content": "If it hurts, do it more often",
      "id": "47145",
      "votes": 0
    },
    {
      "content": "Adding manpower to a late software project makes it later!",
      "id": "21149",
      "votes": 0
    },
    {
      "content": "The first 90 percent of the code accounts for the first 90 percent of the development time...The remaining 10 percent of the code accounts for the other 90 percent of the development time.",
      "id": "69581",
      "votes": 0
    },
    {
      "content": "Any fool can write code that a computer can understand. Good programmers write code that humans can understand.",
      "id": "36975",
      "votes": 0
    },
    {
      "content": "Premature optimization is the root of all evil.",
      "id": "25170",
      "votes": 0
    },
    {
      "content": "Debugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it.",
      "id": "98312",
      "votes": 0
    }
  ]
}
```

Install axios for usinf in future to fetch datafrom json server.

> npm install axios

Delete all unnecessary files and references to them in src folder, keep only index.js and App.js.

> src/index.js

```js
import React from 'react';
import ReactDOM from 'react-dom/client';

import App from './App';

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
```

> src/App.js

```js
import React from 'react';
import axios from 'axios';

class App extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      anecdotes: [],
      current: 0,
    };
  }

  componentDidMount = () => {
    axios.get('http://localhost:3001/anecdotes').then((response) => {
      this.setState({ anecdotes: response.data });
    });
  };

  handleClick = () => {
    const current = Math.floor(Math.random() * this.state.anecdotes.length);
    this.setState({ current });
  };

  render() {
    if (this.state.anecdotes.length === 0) {
      return <div>no anecdotes...</div>;
    }

    return (
      <div>
        <h1>anecdote of the day</h1>
        <div>{this.state.anecdotes[this.state.current].content}</div>
        <button onClick={this.handleClick}>next</button>
      </div>
    );
  }
}

export default App;
```

Start json server and app use the next commands in 2 different consoles

> npm run server
> npm start

#### One of structure of appplication

The folder structure is as follows:

<pre>
.
âââclient (frontend)
|  âââ assets
|  |   âââ custom.scss
|  |   âââ favicon
|  |   âââ other-imporant-pictures.svg
|  âââ components
|  |   âââ FrontPage
|  |   |   âââ index.js
|  |   |   âââ FrontPageSpecificComponent.js
|  |   âââ App.js
|  âââ util
|  |   âââ services
|  |   |   âââ messages.js
|  |   âââ common.js
|  âââ index.js
|
âââserver (backend)
|  âââ controllers
|  |   âââ messagesController.js
|  âââ middleware
|  |   âââ errorMiddleware.js
|  âââ util
|  |   âââ common.js
|  |   âââ customErrors.js
|  |   âââ routes.js
|  âââ index.js
|
âââ .eslintignore
âââ .eslintrc
âââ .gitignore
âââ README.md
âââ index.html
âââ index.js
âââ package-lock.json
âââ package.json
âââ webpack.config.js
</pre>

#### Security

Check how up-to-date your dependencies are using the command

> npm outdated --depth 0

The dependencies can be brought up to date by updating the file package.json. The best way to do that is by using a tool called npm-check-updates. It can be installed globally by running the command

> npm install -g npm-check-updates

<pre>
$ npm-check-updates
Checking ...\ultimate-hooks\package.json
[====================] 9/9 100%

 @testing-library/react       ^13.0.0  â  ^13.1.1
 @testing-library/user-event  ^14.0.4  â  ^14.1.1
 react-scripts                  5.0.0  â    5.0.1

Run ncu -u to upgrade package.json
</pre>

> ncu -u

<pre>
$ ncu -u
Upgrading ...\ultimate-hooks\package.json
[====================] 9/9 100%

 @testing-library/react       ^13.0.0  â  ^13.1.1
 @testing-library/user-event  ^14.0.4  â  ^14.1.1
 react-scripts                  5.0.0  â    5.0.1

Run npm install to install new versions.
</pre>

To install new versions

> npm install

To audit to check the security of dependencies

> npm audit

To fix found dependencies after audit

> npm audit fix

Would upgrade the library version but would also upgrade the library react-scripts and that would potentially break down the development environment

> npm audit fix --force

to create a new project using a PWA custom template

> npx create-react-app my-app --template cra-template-pwa

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

- Class Components only contain one state. The state is initialized in the constructor.
- Calling the method setState always triggers the rerender of the Class Component, i.e. calling the method render.
- The correct place to trigger the fetching of data from a server is inside the lifecycle method **componentDidMount**, which is executed once right after the first time a component renders.

- When writing fresh code, there is no rational reason to use Class Components if the project is using React with a version number 16.8 or greater. On the other hand, there is currently no need to rewrite all old React code as Functional components.

- When the state of the application changes, a new virtual DOM gets defined by the components. React has the previous version of the virtual DOM in memory and instead of directly rendering the new virtual DOM using the DOM API, React computes the optimal way to update the DOM (remove, add or modify elements in the DOM) such that the DOM reflects the new virtual DOM.

</details>

### Sub-part F: [Exercises: extending the bloglist](https://fullstackopen.com/en/part7/exercises_extending_the_bloglist)

<details>
<summary>Links:</summary>
<li><a href="https://prettier.io/" title="Prettier">Prettier</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Setting up Prettier

> .vscode/settings.json

```js
{
    "typescript.validate.enable": true,
    "javascript.validate.enable": true,
    "js/ts.implicitProjectConfig.checkJs": false,
    "files.associations": {
        "*.tsx": "typescriptreact",
        "*.ts": "typescript",
        "*.jsx": "javascriptreact",
        "*.js": "javascript",
        "*test.js": "javascript"
    },
    "prettier.semi": false,
    "prettier.singleQuote": true,
    "prettier.singleAttributePerLine": false,
    "prettier.jsxSingleQuote": true,
    "prettier.endOfLine": "lf",
    "prettier.quoteProps": "preserve",
    "eslint.workingDirectories": [{ "mode": "auto" }],
}
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

Prettier is an opinionated code formatter, that is, Prettier not only controls the code style but also formats the code according to the definition.

</details>

### Exercises:

#### 7.1-7.6: Routed anecdotes

Description: Use the previouse redux-free anecdote app as the starting point for the exercises. Add React Router to the application so that by clicking links in the Menu component the view can be changed. Simplify the anecdote creation form of your application with the useField custom hook we defined earlier.

Create an application according to the requirements described in [exercises 7.1-7.3](https://fullstackopen.com/en/part7/react_router#exercises-7-1-7-3), [exercises 7.4-7.6](https://fullstackopen.com/en/part7/custom_hooks#exercises-7-4-7-8)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part7/routed-anecdotes)

#### 7.7: Country hook

Description: The application can be used to search for a country's details from the service. To implement a custom hook useCountry, which can be used to search for the details of the country given to the hook as a parameter.

Create an application according to the requirements described in [exercises 7.4-7.6](https://fullstackopen.com/en/part7/custom_hooks#exercises-7-4-7-8)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part7/country-hook)

#### 7.8: Ultimate hooks

Description: The code of the application responsible for communicating with the backend of the note application of the previous parts. We notice that the code is in no way specific to the fact that our application deals with notes. Excluding the value of the baseUrl variable, the same code could be reused in the blog post application for dealing with the communication with the backend.
Extract the code for communicating with the backend into its own useResource hook. It is sufficient to implement fetching all resources and creating a new resource.

Create an application according to the requirements described in [exercises 7.4-7.6](https://fullstackopen.com/en/part7/custom_hooks#exercises-7-4-7-8)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part7/ultimate-hooks)

#### 7.9 - 7.21: Blog list

Description: Take Blog application from previouse part and refactor it to use Redux and/or React Query and Context. Manage the notification data, blogs and users. Expand the solution so that it is again possible to fetch blogs, create a new blog, like and delete a blog. Crate views: Users, Individual user, Individual blog, Blogs and create Navigation. Implement the functionality for commenting on blog. Improve the appearanc by applying one of the styling methods shown in the course material.

Create an application according to the requirements described in [exercises 7.4-7.6](https://fullstackopen.com/en/part7/exercises_extending_the_bloglist#exercises-7-9-7-21)

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part7/bloglist)

## Part 8: [GraphQL](https://fullstackopen.com/en/part8)

### Sub-part A: [GraphQL-server](https://fullstackopen.com/en/part8/graph_ql_server)

<details>
<summary>Links:</summary>
<li><a href="https://graphql.org/" title="GraphQL">GraphQL</a></li>
<li><a href="https://graphql.org/learn/schema/" title="GraphQL: Schemas and Types">GraphQL: Schemas and Types</a></li>
<li><a href="https://graphql.org/learn/schema/#type-system" title="GraphQL: type-system">GraphQL: type-system</a></li>
<li><a href="https://graphql.org/learn/schema/#scalar-types" title="GraphQL: scalar-types">GraphQL: scalar-types</a></li>
<li><a href="https://graphql.org/learn/schema/#the-query-and-mutation-types" title="GraphQL: The Query and Mutation types">GraphQL: The Query and Mutation types</a></li>
<li><a href="https://graphql.org/learn/queries/#fields" title="GraphQL: queries fields">GraphQL: queries fields</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/" title="Apollo Server">Apollo Server</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/api/apollo-server/" title="Apollo Server: API Reference">Apollo Server: API Reference</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/resolvers/" title="Apollo Server: Resolvers">Apollo Server: Resolvers</a></li>
<li><a href="https://www.apollographql.com/docs/graphos/explorer/" title="Apollo Server: The GraphOS Studio Explorer">Apollo Server: The GraphOS Studio Explorer</a></li>
<li><a href="https://the-guild.dev/graphql/tools/docs/resolvers#resolver-function-signature" title="Apollo Server: Resolver Function Signature">Apollo Server: Resolver Function Signature</a></li>
<li><a href="https://the-guild.dev/graphql/tools/docs/resolvers#default-resolver" title="GraphQL: Default Resolver">GraphQL: Default Resolver</a></li>
<li><a href="https://graphql.org/learn/queries/#mutations" title="GraphQL: Mutations">GraphQL: Mutations</a></li>
<li><a href="https://github.com/uuidjs/uuid#readme" title="uuid library">uuid library</a></li>
<li><a href="https://graphql.org/learn/validation/" title="GraphQL: Validation">GraphQL: Validation</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/errors/#custom-errors" title="Apollo Server: Custom errors">Apollo Server: Custom errors</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/errors/#built-in-error-codes" title="Apollo Server: Built-in error codes">Apollo Server: Built-in error codes</a></li>
<li><a href="https://graphql.org/learn/schema/#enumeration-types" title="GraphQL: Enumeration types">GraphQL: Enumeration types</a></li>
<li><a href="https://graphql.org/learn/queries/#variables" title="GraphQL: Variables">GraphQL: Variables</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Create a new npm project with npm init and install the required dependencies.

> npm install @apollo/server graphql

Install uuid to get random UUID

> npm install uuid

Istal nodemon to autorestart server

> npm install nodemon

> package.json

```js
{
    "name": "backend",
    "version": "1.0.0",
    "description": "",
    "main": "index.js",
    "scripts": {
        "dev": "nodemon index.js"
    },
    "author": "",
    "license": "ISC",
    "dependencies": {
        "@apollo/server": "^4.3.2",
        "graphql": "^16.6.0",
        "nodemon": "^2.0.20",
        "uuid": "^9.0.0"
    }
}
```

Create Apollo Server with persons as the data.

> index.js

```js
const { ApolloServer } = require('@apollo/server');
const { startStandaloneServer } = require('@apollo/server/standalone');

let persons = [
  {
    name: 'Arto Hellas',
    phone: '040-123543',
    street: 'Tapiolankatu 5 A',
    city: 'Espoo',
    id: '3d594650-3436-11e9-bc57-8b80ba54c431',
  },
  {
    name: 'Matti Luukkainen',
    phone: '040-432342',
    street: 'Malminkaari 10 A',
    city: 'Helsinki',
    id: '3d599470-3436-11e9-bc57-8b80ba54c431',
  },
  {
    name: 'Venla Ruuska',
    street: 'NallemÃ¤entie 22 C',
    city: 'Helsinki',
    id: '3d599471-3436-11e9-bc57-8b80ba54c431',
  },
];

const typeDefs = `
  type Person {
    name: String!
    phone: String
    street: String!
    city: String! 
    id: ID!
  }

  type Query {
    personCount: Int!
    allPersons: [Person!]!
    findPerson(name: String!): Person
  }
`;

const resolvers = {
  Query: {
    personCount: () => persons.length,
    allPersons: () => persons,
    findPerson: (root, args) => persons.find((p) => p.name === args.name),
  },
  Person: {
    name: (root) => root.name,
    phone: (root) => root.phone,
    street: (root) => root.street,
    city: (root) => root.city,
    id: (root) => root.id,
  },
};

const server = new ApolloServer({
  typeDefs,
  resolvers,
});

startStandaloneServer(server, {
  listen: { port: 4000 },
}).then(({ url }) => {
  console.log(`Server ready at ${url}`);
});
```

Change typeDefs to use adress object in queries and enums with filtering

> index.js

```js
// ...
const typeDefs = `
  type Address {
    street: String!
    city: String! 
  }

  enum YesNo {
    YES
    NO
  }

  type Person {
    name: String!
    phone: String
    address: Address!
    id: ID!
  }

  type Query {
    personCount: Int!
    allPersons(phone: YesNo): [Person!]!
    findPerson(name: String!): Person
  }
`;

const resolvers = {
  Query: {
    personCount: () => persons.length,
    allPersons: (root, args) => {
      if (!args.phone) {
        return persons;
      }
      const byPhone = (person) =>
        args.phone === 'YES' ? person.phone : !person.phone;
      return persons.filter(byPhone);
    },
    findPerson: (root, args) => persons.find((p) => p.name === args.name),
  },
  Person: {
    address: ({ street, city }) => {
      return {
        street,
        city,
      };
    },
  },
};
// ...
```

Add mutation to create and change data with handeling errors

> index.js

```js
const { ApolloServer } = require('@apollo/server')
const { startStandaloneServer } = require('@apollo/server/standalone')
const { v1: uuid } = require('uuid')
const { GraphQLError } = require('graphql')

// ...

const typeDefs = `
  ${/* ... */}

  type Mutation {
    addPerson(
      name: String!
      phone: String
      street: String!
      city: String!
    ): Person

    editNumber(
      name: String!
      phone: String!
    ): Person
  }
`

const resolvers = {
  Query: {
   // ...
  },
  Person: {
    // ...
  },
  Mutation: {
    addPerson: (root, args) => {
      if (persons.find(p => p.name === args.name)) {
        throw new GraphQLError('Name must be unique', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name
          }
        })
      }
      const person = { ...args, id: uuid() }
      persons = persons.concat(person)
      return person
    },
    editNumber: (root, args) => {
      const person = persons.find(p => p.name === args.name)
      if (!person) {
        return null
      }

      const updatedPerson = { ...person, phone: args.phone }
      persons = persons.map(p => p.name === args.name ? updatedPerson : p)
      return updatedPerson
    }
  }
}
// ...
```

We can use Apollo Studeo Explorer by address http://localhost:4000/. We can use different queries to check the results.

```js
query {
  findPerson(name: "Arto Hellas") {
    phone
    address {
      city
      street
    }
  }
}

{
  "data": {
    "findPerson": {
      "phone": "040-123543",
      "address": {
        "city": "Espoo",
        "street": "Tapiolankatu 5 A"
      }
    }
  }
}
```

```js
query {
  personCount
  havePhone: allPersons(phone: YES){
    name
  }
  phoneless: allPersons(phone: NO){
    name
  }
}

{
  "data": {
    "personCount": 3,
    "havePhone": [
      {
        "name": "Arto Hellas"
      },
      {
        "name": "Matti Luukkainen"
      }
    ],
    "phoneless": [
      {
        "name": "Venla Ruuska"
      }
    ]
  }
}
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

The main principle of GraphQL is that the code on the browser forms a query describing the data wanted, and sends it to the API with an HTTP POST request. Unlike REST, all GraphQL queries are sent to the same address, and their type is POST.

There is a direct link between a GraphQL query and the returned JSON object.

GraphQL query describes only the data moving between a server and the client. On the server, the data can be organized and saved any way we like.

Despite its name, GraphQL does not actually have anything to do with databases. It does not care how the data is saved. The data a GraphQL API uses can be saved into a relational database, document database, or to other servers which a GraphQL server can access with for example REST.

When Apollo server is run in development mode the page http://localhost:4000 has a button Query your server that takes us to Apollo Studio Explorer. This is very useful for a developer, and can be used to make queries to the server.

With GraphQL, it is possible to combine multiple fields of type Query, or "separate queries" into one query.

</details>

### Sub-part B: [React and GraphQL](https://fullstackopen.com/en/part8/react_and_graph_ql)

<details>
<summary>Links:</summary>
<li><a href="https://relay.dev/" title="Relay: The GraphQL client that scales with you.">Relay: The GraphQL client that scales with you.</a></li>
<li><a href="https://www.apollographql.com/docs/react/" title="Apollo Client is a comprehensive state management library for JavaScript that enables you to manage both local and remote data with GraphQL.">Apollo Client to manage both local and remote data with GraphQL</a></li>
<li><a href="https://www.apollographql.com/docs/react/get-started/" title="Apollo Client: get-started">Apollo Client: get-started</a></li>
<li><a href="https://www.apollographql.com/docs/react/get-started/#step-4-connect-your-client-to-react" title="Apollo Client: connect your client to react">Apollo Client: ApolloProvider</a></li>
<li><a href="https://www.apollographql.com/docs/react/data/queries/" title="Apollo Client: Queries">Apollo Client: Queries</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#usequery" title="Apollo Client: useQuery">Apollo Client: useQuery hook</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#result" title="Apollo Client: useQuery - result">Apollo Client: useQuery - result</a></li>
<li><a href="https://graphql.org/learn/queries/#variables" title="GraphQL: Variables">GraphQL: Variables</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#uselazyquery" title="Apollo Client: useLazyQuery hook">Apollo Client: useLazyQuery hook</a></li>
<li><a href="https://www.apollographql.com/docs/react/caching/overview/" title="Apollo Client: Caching in Apollo Client">Apollo Client: Caching in Apollo Client</a></li>
<li><a href="https://chrome.google.com/webstore/detail/apollo-client-devtools/jdkknkkbebbapilgoeccciglkfbmbnfm" title="Chrome extantion: Apollo Client Devtools">Chrome extantion: Apollo Client Devtools</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#usemutation" title="Apollo Client: useMutation hook">Apollo Client: useMutation hook</a></li>
<li><a href="https://www.apollographql.com/docs/react/data/queries/#polling" title="Apollo Client: Polling">Apollo Client: Polling</a></li>
<li><a href="https://www.apollographql.com/docs/react/data/refetching/" title="Apollo Client: Refetching queries">Apollo Client: Refetching queries</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#params-2" title="Apollo Client: useMutation hook - onError option">Apollo Client: useMutation hook - onError option</a></li>
<li><a href="https://legacy.reactjs.org/docs/hooks-reference.html#usecallback" title="React: useCallback">React: useCallback</a></li>
<li><a href="https://www.apollographql.com/docs/react/local-state/local-state-management/" title="Apollo Client: Managing local state">Apollo Client: Managing local state</a></li>
<li><a href="https://legacy.reactjs.org/docs/forms.html#the-select-tag" title="React: The select Tag">React: The select Tag</a></li>
<li><a href="https://github.com/JedWatson/react-select" title="React-select library">React-select library</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Create new react app and delete all filese in 'src' folder exclude index.js, App.js

> npx create-react-app phonebook-frontend

Add apollo client graphql library to manage querice and data in the server

> npm install @apollo/client graphql

Update index to use apollo client graphql library and remove all not used code

> src/index.js

```js
import ReactDOM from 'react-dom/client';
import App from './App';

import { ApolloClient, ApolloProvider, InMemoryCache } from '@apollo/client';

const client = new ApolloClient({
  uri: 'http://localhost:4000',
  cache: new InMemoryCache(),
});

ReactDOM.createRoot(document.getElementById('root')).render(
  <ApolloProvider client={client}>
    <App />
  </ApolloProvider>
);
```

Create a file to keep all querices from Apollo client to server

> src/queries.js

```js
import { gql } from '@apollo/client';

export const ALL_PERSONS = gql`
  query {
    allPersons {
      name
      phone
      id
    }
  }
`;

export const FIND_PERSON = gql`
  query findPersonByName($nameToSearch: String!) {
    findPerson(name: $nameToSearch) {
      name
      phone
      id
      address {
        street
        city
      }
    }
  }
`;

export const CREATE_PERSON = gql`
  mutation createPerson(
    $name: String!
    $street: String!
    $city: String!
    $phone: String
  ) {
    addPerson(name: $name, street: $street, city: $city, phone: $phone) {
      name
      phone
      id
      address {
        street
        city
      }
    }
  }
`;

export const EDIT_NUMBER = gql`
  mutation editNumber($name: String!, $phone: String!) {
    editNumber(name: $name, phone: $phone) {
      name
      phone
      address {
        street
        city
      }
      id
    }
  }
`;
```

Create component to display error message.

> src/component/Notify.js

```js
const Notify = ({ errorMessage }) => {
  if (!errorMessage) {
    return null;
  }
  return <div style={{ color: 'red' }}>{errorMessage}</div>;
};

export default Notify;
```

Update App to use new components with removing unnecessary code and adding notification for error handeling and fetching data from the server. Add components for display and update persons.

> src/App.js

```js
import { useState } from 'react';
import { useQuery } from '@apollo/client';

import { ALL_PERSONS } from './queries';
import Notify from './components/Notify';
import Persons from './components/Persons';
import PersonForm from './components/PersonForm';
import PhoneForm from './components/PersonForm';

const App = () => {
  const [errorMessage, setErrorMessage] = useState(null);

  const result = useQuery(ALL_PERSONS);

  if (result.loading) {
    return <div>loading...</div>;
  }

  const notify = (message) => {
    setErrorMessage(message);
    setTimeout(() => {
      setErrorMessage(null);
    }, 10000);
  };

  return (
    <div>
      <Notify errorMessage={errorMessage} />
      <Persons persons={result.data.allPersons} />
      <PersonForm setError={notify} />
      <PhoneForm setError={notify} />
    </div>
  );
};

export default App;
```

Create component for display all persons or a single person with fetching this person data and using Person component to display

> src/component/Persons.js

```js
import { useState } from 'react';
import { useQuery } from '@apollo/client';

import Person from './Person';
import { FIND_PERSON } from '../queries';

const Persons = ({ persons }) => {
  const [nameToSearch, setNameToSearch] = useState(null);
  const result = useQuery(FIND_PERSON, {
    variables: { nameToSearch },
    skip: !nameToSearch,
  });

  if (nameToSearch && result.data) {
    return (
      <Person
        person={result.data.findPerson}
        onClose={() => setNameToSearch(null)}
      />
    );
  }

  return (
    <div>
      <h2>Persons</h2>
      {persons.map((p) => (
        <div key={p.name}>
          {p.name} {p.phone}
          <button onClick={() => setNameToSearch(p.name)}>show address</button>
        </div>
      ))}
    </div>
  );
};

export default Persons;
```

Create component to display a cirtan person.

> src/component/Person.js

```js
const Person = ({ person, onClose }) => {
  return (
    <div>
      <h2>{person.name}</h2>
      <div>
        {person.address.street} {person.address.city}
      </div>
      <div>{person.phone}</div>
      <button onClick={onClose}>close</button>
    </div>
  );
};

export default Person;
```

Create form to add a person to server and update queries and frontend with error handeling

> src/component/PersonForm.js

```js
import { useState } from 'react';
import { useMutation } from '@apollo/client';

import { CREATE_PERSON, ALL_PERSONS } from '../queries';

const PersonForm = ({ setError }) => {
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');
  const [street, setStreet] = useState('');
  const [city, setCity] = useState('');

  const [createPerson] = useMutation(CREATE_PERSON, {
    refetchQueries: [{ query: ALL_PERSONS }],
    onError: (error) => {
      const messages = error.graphQLErrors[0].message;
      setError(messages);
    },
  });

  const submit = (event) => {
    event.preventDefault();

    createPerson({ variables: { name, phone, street, city } });

    setName('');
    setPhone('');
    setStreet('');
    setCity('');
  };

  return (
    <div>
      <h2>create new</h2>
      <form onSubmit={submit}>
        <div>
          name{' '}
          <input
            value={name}
            onChange={({ target }) => setName(target.value)}
          />
        </div>
        <div>
          phone{' '}
          <input
            value={phone}
            onChange={({ target }) => setPhone(target.value)}
          />
        </div>
        <div>
          street{' '}
          <input
            value={street}
            onChange={({ target }) => setStreet(target.value)}
          />
        </div>
        <div>
          city{' '}
          <input
            value={city}
            onChange={({ target }) => setCity(target.value)}
          />
        </div>
        <button type='submit'>add!</button>
      </form>
    </div>
  );
};

export default PersonForm;
```

Create component to change phone number of person on the server with error handleling.

> src/component/PhoneForm.js

```js
import { useState, useEffect } from 'react';
import { useMutation } from '@apollo/client';

import { EDIT_NUMBER } from '../queries';

const PhoneForm = ({ setError }) => {
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');

  const [changeNumber, result] = useMutation(EDIT_NUMBER);

  useEffect(() => {
    if (result.data && result.data.editNumber === null) {
      setError('person not found');
    }
  }, [result.data]); // eslint-disable-line

  const submit = (event) => {
    event.preventDefault();

    changeNumber({ variables: { name, phone } });

    setName('');
    setPhone('');
  };

  return (
    <div>
      <h2>change number</h2>

      <form onSubmit={submit}>
        <div>
          name{' '}
          <input
            value={name}
            onChange={({ target }) => setName(target.value)}
          />
        </div>
        <div>
          phone{' '}
          <input
            value={phone}
            onChange={({ target }) => setPhone(target.value)}
          />
        </div>
        <button type='submit'>change number</button>
      </form>
    </div>
  );
};

export default PhoneForm;
```

#### react-select library

> npm install react-select

```js
import React, { useState } from 'react';
import Select from 'react-select';

const options = [
  { value: 'chocolate', label: 'Chocolate' },
  { value: 'strawberry', label: 'Strawberry' },
  { value: 'vanilla', label: 'Vanilla' },
];

export default function App() {
  const [selectedOption, setSelectedOption] = useState(null);

  return (
    <div className='App'>
      <Select
        defaultValue={selectedOption}
        onChange={setSelectedOption}
        options={options}
      />
    </div>
  );
}
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

We could take care of the communication between the React app and GraphQL by using Axios. However, most of the time, it is not very sensible to do so. It is a better idea to use a higher-order library capable of abstracting the unnecessary details of the communication. There are two good options: Relay and Apollo Client

</details>

### Sub-part C: [Database and user administration](https://fullstackopen.com/en/part8/database_and_user_administration)

<details>
<summary>Links:</summary>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/resolvers/#resolver-results" title="Apollo Server: Resolvers">Apollo Server: Resolvers</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/errors/#custom-errors" title="Apollo Server: Custom errors">Apollo Server: Custom errors</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/api/standalone/" title="Apollo Server: startStandaloneServer">Apollo Server: startStandaloneServer</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/context/" title="Apollo Server: Context and contextValue">Apollo Server: Context and contextValue</a></li>
<li><a href="https://www.apollographql.com/blog/backend/auth/authorization-in-graphql/?_ga=2.45656161.474875091.1550613879-1581139173.1549828167" title="Authorization in GraphQL">Authorization in GraphQL</a></li>
<li><a href="https://www.mongodb.com/docs/manual/tutorial/query-array-of-documents/" title="MobgoDB: Query an Array of Embedded Documents">MobgoDB: Query an Array of Embedded Documents</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### Connect the backend to MongoDB

Install Mongoose and dotenv :

> npm install mongoose dotenv

Create model for persons

> /models/person.js

```js
const mongoose = require('mongoose');

const schema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
    minlength: 5,
  },
  phone: {
    type: String,
    minlength: 5,
  },
  street: {
    type: String,
    required: true,
    minlength: 5,
  },
  city: {
    type: String,
    required: true,
    minlength: 3,
  },
});

module.exports = mongoose.model('Person', schema);
```

Create dotenv file with setting for database

> .env

```js
MONGODB_URI=mongodb+srv://{username}:{password}@{cluster url}/{db name/app name}
PORT=4000
```

Udpdate github ignor file to skip adding .env file

> .gitignore

```js
/node_modules
.env
```

Update application to use database and dotenv

> index.js

```js
// ...
const mongoose = require('mongoose');
mongoose.set('strictQuery', false);
const Person = require('./models/person');

require('dotenv').config();

const MONGODB_URI = process.env.MONGODB_URI;

console.log('connecting to', MONGODB_URI);

mongoose
  .connect(MONGODB_URI)
  .then(() => {
    console.log('connected to MongoDB');
  })
  .catch((error) => {
    console.log('error connection to MongoDB:', error.message);
  });

const typeDefs = `
// ...
`;

const resolvers = {
  Query: {
    personCount: async () => Person.collection.countDocuments(),
    allPersons: async (root, args) => {
      if (!args.phone) {
        return Person.find({});
      }
      return Person.find({ phone: { $exists: args.phone === 'YES' } });
    },
    findPerson: async (root, args) => Person.findOne({ name: args.name }),
  },
  Person: {
    address: (root) => {
      return {
        street: root.street,
        city: root.city,
      };
    },
  },
  Mutation: {
    addPerson: async (root, args) => {
      const person = new Person({ ...args });

      try {
        await person.save();
      } catch (error) {
        throw new GraphQLError('Saving person failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      }

      return person;
    },
    editNumber: async (root, args) => {
      const person = await Person.findOne({ name: args.name });
      person.phone = args.phone;

      try {
        await person.save();
      } catch (error) {
        throw new GraphQLError('Saving number failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      }

      return person;
    },
  },
};

const server = new ApolloServer({
  typeDefs,
  resolvers,
});

startStandaloneServer(server, {
  listen: { port: process.env.PORT },
}).then(({ url }) => {
  console.log(`Server ready at ${url}`);
});
```

#### Add authorization to the backend

Install the jsonwebtoken library, which allows us to generate JSON web tokens.

> npm install jsonwebtoken

Add JWT_SECRET to dotenv file

> .env

```js
//...
JWT_SECRET = your_secret_word;
```

Create model for user

> /models/user.js

```js
const mongoose = require('mongoose');

const schema = new mongoose.Schema({
  username: {
    type: String,
    required: true,
    minlength: 3,
  },
  friends: [
    {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'Person',
    },
  ],
});

module.exports = mongoose.model('User', schema);
```

Update application to use Authorization

> index.js

```js
const { ApolloServer } = require('@apollo/server');
const { startStandaloneServer } = require('@apollo/server/standalone');
const { GraphQLError } = require('graphql');
const jwt = require('jsonwebtoken');

const mongoose = require('mongoose');
mongoose.set('strictQuery', false);

const User = require('./models/user');
const Person = require('./models/person');

require('dotenv').config();

const MONGODB_URI = process.env.MONGODB_URI;

mongoose
  .connect(MONGODB_URI)
  .then(() => {
    console.log('connected to MongoDB');
  })
  .catch((error) => {
    console.log('error connection to MongoDB:', error.message);
  });

const typeDefs = `
  type Address {
    street: String!
    city: String! 
  }

  enum YesNo {
    YES
    NO
  }

  type Person {
    name: String!
    phone: String
    address: Address!
    id: ID!
  }

  type User {
    username: String!
    friends: [Person!]!
    id: ID!
  }
  
  type Token {
    value: String!
  }

  type Query {
    personCount: Int!
    allPersons(phone: YesNo): [Person!]!
    findPerson(name: String!): Person
    me: User
  }

  type Mutation {
    addPerson(
      name: String!
      phone: String
      street: String!
      city: String!
    ): Person

    editNumber(
      name: String!
      phone: String!
    ): Person

    createUser(
      username: String!
    ): User
    
    login(
      username: String!
      password: String!
    ): Token

    addAsFriend(
      name: String!
    ): User
  }
`;

const resolvers = {
  Query: {
    personCount: async () => Person.collection.countDocuments(),
    allPersons: async (root, args) => {
      if (!args.phone) {
        return Person.find({});
      }
      return Person.find({ phone: { $exists: args.phone === 'YES' } });
    },
    findPerson: async (root, args) => Person.findOne({ name: args.name }),
    me: (root, args, context) => {
      return context.currentUser;
    },
  },
  Person: {
    address: (root) => {
      return {
        street: root.street,
        city: root.city,
      };
    },
  },
  Mutation: {
    addPerson: async (root, args, context) => {
      const person = new Person({ ...args });
      const currentUser = context.currentUser;

      if (!currentUser) {
        throw new GraphQLError('not authenticated', {
          extensions: {
            code: 'BAD_USER_INPUT',
          },
        });
      }

      try {
        await person.save();
        currentUser.friends = currentUser.friends.concat(person);
        await currentUser.save();
      } catch (error) {
        throw new GraphQLError('Saving user failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      }

      return person;
    },
    editNumber: async (root, args) => {
      const person = await Person.findOne({ name: args.name });
      person.phone = args.phone;

      try {
        await person.save();
      } catch (error) {
        throw new GraphQLError('Saving number failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      }

      return person;
    },

    createUser: async (root, args) => {
      const user = new User({ username: args.username });

      return user.save().catch((error) => {
        throw new GraphQLError('Creating the user failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      });
    },
    login: async (root, args) => {
      const user = await User.findOne({ username: args.username });

      if (!user || args.password !== 'secret') {
        throw new GraphQLError('wrong credentials', {
          extensions: {
            code: 'BAD_USER_INPUT',
          },
        });
      }

      const userForToken = {
        username: user.username,
        id: user._id,
      };

      return { value: jwt.sign(userForToken, process.env.JWT_SECRET) };
    },
    addAsFriend: async (root, args, { currentUser }) => {
      const isFriend = (person) =>
        currentUser.friends
          .map((f) => f._id.toString())
          .includes(person._id.toString());

      if (!currentUser) {
        throw new GraphQLError('wrong credentials', {
          extensions: { code: 'BAD_USER_INPUT' },
        });
      }

      const person = await Person.findOne({ name: args.name });
      if (!isFriend(person)) {
        currentUser.friends = currentUser.friends.concat(person);
      }

      await currentUser.save();

      return currentUser;
    },
  },
};

const server = new ApolloServer({
  typeDefs,
  resolvers,
});

startStandaloneServer(server, {
  listen: { port: process.env.PORT },
  context: async ({ req, res }) => {
    const auth = req ? req.headers.authorization : null;
    if (auth && auth.startsWith('Bearer ')) {
      const decodedToken = jwt.verify(
        auth.substring(7),
        process.env.JWT_SECRET
      );
      const currentUser = await User.findById(decodedToken.id).populate(
        'friends'
      );
      return { currentUser };
    }
  },
}).then(({ url }) => {
  console.log(`Server ready at ${url}`);
});
```

#### Test Authorization through Apollo Studio Explorer

1. Create user

```js
mutation {
  createUser (
    username: "mluukkai"
  ) {
    username
    id
  }
}
```

2. Get token

```js
mutation {
  login (
    username: "mluukkai"
    password: "secret"
  ) {
    value
  }
}
```

3. Set up a query and get data

> Variables: { "nameToSearch": "Arto Hellas" }

> Headers: Authorization: bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxx

```js
query findPersonByName ($nameToSearch: String!)  {
  findPerson(name: $nameToSearch) {
     name
     phone
     address {
       street
       city
     }
  }
}
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

It is good to also keep validation in the database.

As we remember, in Mongo, the identifying field of an object is called \_id and we previously had to parse the name of the field to id ourselves. Now GraphQL can do this automatically.

The resolver functions now return a promise, when they previously returned normal objects.

As well as in GraphQL, the input is now validated using the validations defined in the mongoose schema. For handling possible validation errors in the schema, we must add an error-handling try/catch block to the save method. When we end up in the catch, we throw a exception GraphQLError.

Context is the right place to do things which are shared by multiple resolvers, like user identification.

</details>

### Sub-part D: [Login and updating the cache](https://fullstackopen.com/en/part8/login_and_updating_the_cache)

<details>
<summary>Links:</summary>
<li><a href="https://www.apollographql.com/docs/react/networking/authentication/#reset-store-on-logout" title="Apollo Server: Reset store on logout">Apollo Server: Reset store on logout</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/core/ApolloClient/#ApolloClient.resetStore" title="Apollo Server: class ApolloClient">Apollo Server: class ApolloClient</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#useapolloclient" title="Apollo Server: useApolloClient hook">Apollo Server: useApolloClient hook</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/link/introduction/" title="Apollo Server: function createHttpLink">Apollo Server: function createHttpLink</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/link/apollo-link-context/#overview" title="Apollo Server: setContext">Apollo Server: setContext</a></li>
<li><a href="https://www.apollographql.com/docs/react/networking/authentication/#header" title="Apollo Server: set to Header">Apollo Server: set to Header</a></li>
<li><a href="https://www.apollographql.com/docs/react/data/mutations/#the-update-function" title="Apollo Server: The update function">Apollo Server: The update function</a></li>
<li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction/#using-updatequery-and-updatefragment" title="Apollo Server: Using updateQuery and updateFragment">Apollo Server: Using updateQuery and updateFragment</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#options" title="Apollo Server: single queries">Apollo Server: single queries</a></li>
<li><a href="https://www.apollographql.com/docs/react/data/queries/#configuring-fetch-logic" title="Apollo Server: fetchPolicy">Apollo Server: fetchPolicy</a></li>
<li><a href="https://martinfowler.com/bliki/TwoHardThings.html" title="There are only two hard things in Computer Science: cache invalidation and naming things.">There are only two hard things in Computer Science: cache invalidation and naming things.</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Update queries file with adding a quary to login

> src/queries/js

```js
//...
export const LOGIN = gql`
  mutation login($username: String!, $password: String!) {
    login(username: $username, password: $password) {
      value
    }
  }
`;
```

Create form component to loggin

> src/components/LoginForm.js

```js
import { useState, useEffect } from 'react';
import { useMutation } from '@apollo/client';
import { LOGIN } from '../queries';

const LoginForm = ({ setError, setToken }) => {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');

  const [login, result] = useMutation(LOGIN, {
    onError: (error) => {
      setError(error.graphQLErrors[0].message);
    },
  });

  useEffect(() => {
    if (result.data) {
      const token = result.data.login.value;
      setToken(token);
      localStorage.setItem('phonenumbers-user-token', token);
    }
  }, [result.data]); // eslint-disable-line

  const submit = async (event) => {
    event.preventDefault();

    login({ variables: { username, password } });
  };

  return (
    <div>
      <form onSubmit={submit}>
        <div>
          username{' '}
          <input
            value={username}
            onChange={({ target }) => setUsername(target.value)}
          />
        </div>
        <div>
          password{' '}
          <input
            type='password'
            value={password}
            onChange={({ target }) => setPassword(target.value)}
          />
        </div>
        <button type='submit'>login</button>
      </form>
    </div>
  );
};

export default LoginForm;
```

Update App component to use LoginForm component and token

> src/App.cs

```js
import { useState } from 'react';
import { useQuery, useApolloClient } from '@apollo/client';

import Notify from './components/Notify';
import LoginForm from './components/LoginForm';
import Persons from './components/Persons';
import PersonForm from './components/PersonForm';
import PhoneForm from './components/PhoneForm';
import { ALL_PERSONS } from './queries';

const App = () => {
  const [errorMessage, setErrorMessage] = useState(null);
  const [token, setToken] = useState(null);

  const result = useQuery(ALL_PERSONS);
  const client = useApolloClient();

  if (result.loading) {
    return <div>loading...</div>;
  }

  const notify = (message) => {
    setErrorMessage(message);
    setTimeout(() => {
      setErrorMessage(null);
    }, 10000);
  };

  const logout = () => {
    setToken(null);
    localStorage.clear();
    client.resetStore();
  };

  if (!token) {
    return (
      <>
        <Notify errorMessage={errorMessage} />
        <LoginForm setToken={setToken} setError={notify} />
      </>
    );
  }

  return (
    <>
      <Notify errorMessage={errorMessage} />
      <button onClick={logout}>logout</button>
      <Persons persons={result.data.allPersons} />
      <PersonForm setError={notify} />
      <PhoneForm setError={notify} />
    </>
  );
};

export default App;
```

Update index.ls file to use create link and context to set token in header

> src/index.js

```js
import ReactDOM from 'react-dom/client';

import App from './App';
import {
  ApolloClient,
  InMemoryCache,
  ApolloProvider,
  createHttpLink,
} from '@apollo/client';
import { setContext } from '@apollo/client/link/context';

const authLink = setContext((_, { headers }) => {
  const token = localStorage.getItem('phonenumbers-user-token');
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : null,
    },
  };
});

const httpLink = createHttpLink({
  uri: 'http://localhost:4000',
});

const client = new ApolloClient({
  cache: new InMemoryCache(),
  link: authLink.concat(httpLink),
});

ReactDOM.createRoot(document.getElementById('root')).render(
  <ApolloProvider client={client}>
    <App />
  </ApolloProvider>
);
```

Update Person form

> src/components/PersonForm.js

```js
// ...
const PersonForm = ({ setError }) => {
 // ...

  const [createPerson] = useMutation(CREATE_PERSON, {
    onError: (error) => {
      const messages = error.graphQLErrors[0].message
      setError(messages)
    },

    update: (cache, response) => {
      cache.updateQuery({ query: ALL_PERSONS }, ({ allPersons }) => {
        return {
          allPersons: allPersons.concat(response.data.addPerson),
        }
      })
    },
  })

  const submit = (event) => {
    event.preventDefault()

    createPerson({
      variables: {
        name,
        street,
        city,
        phone: phone.length > 0 ? phone : undefined,
      },
    })

    setName('')
    setPhone('')
    setStreet('')
    setCity('')
  }

  return (
    // ...
  )
}

export default PersonForm
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

There are only two hard things in Computer Science: cache invalidation and naming things.

</details>

### Sub-part E: [Fragments and subscriptions](https://fullstackopen.com/en/part8/fragments_and_subscriptions)

<details>
<summary>Links:</summary>
<li><a href="https://graphql.org/learn/queries/#fragments" title="GraphQL: Fragments">GraphQL: Fragments</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" title="Web: Template literals (Template strings)">Web: Template literals (Template strings)</a></li>
<li><a href="https://www.apollographql.com/docs/react/data/subscriptions/" title="GraphQL: Subscriptions">GraphQL: Subscriptions</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" title="Web: The WebSocket API (WebSockets)">Web: The WebSocket API (WebSockets)</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/api/standalone/#startstandaloneserver" title="Apollo Server: function startStandaloneServer">Apollo Server: function startStandaloneServer</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/api/express-middleware/" title="Apollo Server: API Reference: expressMiddleware">Apollo Server: API Reference: expressMiddleware</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/api/plugin/drain-http-server/" title="Apollo Server: API Reference: Drain HTTP server plugin">Apollo Server: API Reference: Drain HTTP server plugin</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/subscriptions/" title="Apollo Server: Subscriptions">Apollo Server: Subscriptions</a></li>
<li><a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern" title="Publishâsubscribe pattern">Publishâsubscribe pattern</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/subscriptions/#the-pubsub-class" title="Apollo Server: The PubSub class">Apollo Server: The PubSub class</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/subscriptions/#listening-for-events" title="Apollo Server: Listening for events">Apollo Server: Listening for events</a></li>
<li><a href="https://www.apollographql.com/docs/react/api/react/hooks/#usesubscription" title="Apollo Server: useSubscription hook">Apollo Server: useSubscription hook</a></li>
<li><a href="https://www.google.com/search?q=n%2B1+problem" title="The N+1 problem">The N+1 problem</a></li>
<li><a href="https://www.apollographql.com/docs/apollo-server/data/resolvers/#resolver-arguments" title="Apollo Server: Resolver arguments">Apollo Server: Resolver arguments</a></li>
<li><a href="https://en.wikiquote.org/wiki/Donald_Knuth" title="Donald Knuth">Donald Knuth</a></li>
<li><a href="https://github.com/graphql/dataloader" title="GraphQL Foundation's DataLoader library">GraphQL Foundation's DataLoader library</a></li>
<li><a href="https://www.robinwieruch.de/graphql-apollo-server-tutorial/#graphql-server-data-loader-caching-batching" title="GraphQL Server Tutorial with Apollo Server and Express">GraphQL Server Tutorial with Apollo Server and Express</a></li>
<li><a href="http://www.petecorey.com/blog/2017/08/14/batching-graphql-queries-with-dataloader/" title="Batching GraphQL Queries with DataLoader">Batching GraphQL Queries with DataLoader</a></li>
<li><a href="https://www.apollographql.com/blog/backend/schema-design/modularizing-your-graphql-schema-code/" title="Modularizing your GraphQL schema code">Modularizing your GraphQL schema code</a></li>
<li><a href="https://medium.com/@peterpme/thoughts-on-structuring-your-apollo-queries-mutations-939ba4746cd8" title="Thoughts on Structuring your Apollo Queries & Mutations">Thoughts on Structuring your Apollo Queries & Mutations</a></li>
<li><a href="https://www.radiofreerabbit.com/podcast/52-is-2018-the-year-graphql-kills-rest" title="52. Is 2018 the year GraphQL kills REST?">52. Is 2018 the year GraphQL kills REST?</a></li>
<li><a href="https://graphqleditor.com/blog/javascript-predictions-for-2019-by-npm/" title="JavaScript predictions for 2019 by npm">JavaScript predictions for 2019 by npm</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/alert" title="Web: alert">Web: alert</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

#### Backend Refatoring and subscription

Install Express and cors

> npm install express cors

Install two packages for adding subscriptions to GraphQL and a Node.js WebSocket library

> npm install graphql-ws ws @graphql-tools/schema

Install graphql-subscriptions library

> npm install graphql-subscriptions

> schema.js

```js
const typeDefs = `
  type User {
    username: String!
    friends: [Person!]!
    id: ID!
  }

  type Token {
    value: String!
  }

  type Address {
    street: String!
    city: String!
  }

  type Person {
    name: String!
    phone: String
    address: Address!
    id: ID!
  }

  enum YesNo {
    YES
    NO
  }

  type Query {
    personCount: Int!
    allPersons(phone: YesNo): [Person!]!
    findPerson(name: String!): Person
    me: User
  }

  type Mutation {
    addPerson(
      name: String!
      phone: String
      street: String!
      city: String!
    ): Person
    editNumber(name: String!, phone: String!): Person
    createUser(username: String!): User
    login(username: String!, password: String!): Token
    addAsFriend(name: String!): User
  }

  type Subscription {
    personAdded: Person!
  } 
`;
module.exports = typeDefs;
```

> resolvers.js

```js
const { GraphQLError } = require('graphql');
const jwt = require('jsonwebtoken');
const { PubSub } = require('graphql-subscriptions');
const pubsub = new PubSub();

const Person = require('./models/person');
const User = require('./models/user');

const resolvers = {
  Query: {
    personCount: async () => Person.collection.countDocuments(),
    allPersons: async (root, args, context) => {
      if (!args.phone) {
        return Person.find({});
      }

      return Person.find({ phone: { $exists: args.phone === 'YES' } });
    },
    findPerson: async (root, args) => Person.findOne({ name: args.name }),
    me: (root, args, context) => {
      return context.currentUser;
    },
  },
  Person: {
    address: ({ street, city }) => {
      return {
        street,
        city,
      };
    },
  },
  Mutation: {
    addPerson: async (root, args, context) => {
      const person = new Person({ ...args });
      const currentUser = context.currentUser;

      if (!currentUser) {
        throw new GraphQLError('not authenticated', {
          extensions: {
            code: 'BAD_USER_INPUT',
          },
        });
      }

      try {
        await person.save();
        currentUser.friends = currentUser.friends.concat(person);
        await currentUser.save();
      } catch (error) {
        throw new GraphQLError('Saving user failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      }

      pubsub.publish('PERSON_ADDED', { personAdded: person });

      return person;
    },
    editNumber: async (root, args) => {
      const person = await Person.findOne({ name: args.name });
      person.phone = args.phone;

      try {
        await person.save();
      } catch (error) {
        throw new GraphQLError('Editing number failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.name,
            error,
          },
        });
      }

      return person;
    },
    createUser: async (root, args) => {
      const user = new User({ username: args.username });

      return user.save().catch((error) => {
        throw new GraphQLError('Creating the user failed', {
          extensions: {
            code: 'BAD_USER_INPUT',
            invalidArgs: args.username,
            error,
          },
        });
      });
    },
    login: async (root, args) => {
      const user = await User.findOne({ username: args.username });

      if (!user || args.password !== 'secret') {
        throw new GraphQLError('wrong credentials', {
          extensions: { code: 'BAD_USER_INPUT' },
        });
      }

      const userForToken = {
        username: user.username,
        id: user._id,
      };

      return { value: jwt.sign(userForToken, process.env.JWT_SECRET) };
    },
    addAsFriend: async (root, args, { currentUser }) => {
      const nonFriendAlready = (person) =>
        !currentUser.friends
          .map((f) => f._id.toString())
          .includes(person._id.toString());

      if (!currentUser) {
        throw new GraphQLError('wrong credentials', {
          extensions: { code: 'BAD_USER_INPUT' },
        });
      }

      const person = await Person.findOne({ name: args.name });
      if (nonFriendAlready(person)) {
        currentUser.friends = currentUser.friends.concat(person);
      }

      await currentUser.save();

      return currentUser;
    },
  },
  Subscription: {
    personAdded: {
      subscribe: () => pubsub.asyncIterator('PERSON_ADDED'),
    },
  },
};

module.exports = resolvers;
```

> index.js

```js
const { ApolloServer } = require('@apollo/server');
const { expressMiddleware } = require('@apollo/server/express4');
const {
  ApolloServerPluginDrainHttpServer,
} = require('@apollo/server/plugin/drainHttpServer');
const { makeExecutableSchema } = require('@graphql-tools/schema');
const { WebSocketServer } = require('ws');
const { useServer } = require('graphql-ws/lib/use/ws');

const http = require('http');
const express = require('express');
const cors = require('cors');
const jwt = require('jsonwebtoken');

const typeDefs = require('./schema');
const resolvers = require('./resolvers');
const User = require('./models/user');

require('dotenv').config();
const MONGODB_URI = process.env.MONGODB_URI;
const PORT = process.env.PORT;

console.log('connecting to', MONGODB_URI);

const mongoose = require('mongoose');
mongoose.set('strictQuery', false);
mongoose
  .connect(MONGODB_URI)
  .then(() => {
    console.log('connected to MongoDB');
  })
  .catch((error) => {
    console.log('error connection to MongoDB:', error.message);
  });

const start = async () => {
  const app = express();
  const httpServer = http.createServer(app);

  const wsServer = new WebSocketServer({
    server: httpServer,
    path: '/',
  });

  const schema = makeExecutableSchema({ typeDefs, resolvers });
  const serverCleanup = useServer({ schema }, wsServer);

  const server = new ApolloServer({
    schema,
    plugins: [
      ApolloServerPluginDrainHttpServer({ httpServer }),
      {
        async serverWillStart() {
          return {
            async drainServer() {
              await serverCleanup.dispose();
            },
          };
        },
      },
    ],
  });

  await server.start();

  app.use(
    '/',
    cors(),
    express.json(),
    expressMiddleware(server, {
      context: async ({ req }) => {
        const auth = req ? req.headers.authorization : null;
        if (auth && auth.startsWith('Bearer ')) {
          const decodedToken = jwt.verify(
            auth.substring(7),
            process.env.JWT_SECRET
          );
          const currentUser = await User.findById(decodedToken.id).populate(
            'friends'
          );
          return { currentUser };
        }
      },
    })
  );

  httpServer.listen(PORT, () =>
    console.log(`Server is now running on http://localhost:${PORT}`)
  );
};

start();
```

#### Frontend

Install graphql-ws

> npm install graphql-ws

Update queries

> src/queries.js

```js
// ...
const PERSON_DETAILS = gql`
  fragment PersonDetails on Person {
    id
    name
    phone
    address {
      street
      city
    }
  }
`;

export const FIND_PERSON = gql`
  query findPersonByName($nameToSearch: String!) {
    findPerson(name: $nameToSearch) {
      ...PersonDetails
    }
  }
  ${PERSON_DETAILS}
`;

export const PERSON_ADDED = gql`
  subscription {
    personAdded {
      ...PersonDetails
    }
  }
  ${PERSON_DETAILS}
`;
// ...
```

> src/index.js

```js
import ReactDOM from 'react-dom/client';

import {
  ApolloClient,
  InMemoryCache,
  ApolloProvider,
  createHttpLink,
  split,
} from '@apollo/client';
import { setContext } from '@apollo/client/link/context';
import { getMainDefinition } from '@apollo/client/utilities';
import { GraphQLWsLink } from '@apollo/client/link/subscriptions';
import { createClient } from 'graphql-ws';

import App from './App';

const authLink = setContext((_, { headers }) => {
  const token = localStorage.getItem('phonenumbers-user-token');
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : null,
    },
  };
});

const httpLink = createHttpLink({
  uri: 'http://localhost:4000',
});

const wsLink = new GraphQLWsLink(createClient({ url: 'ws://localhost:4000' }));

const splitLink = split(
  ({ query }) => {
    const definition = getMainDefinition(query);
    return (
      definition.kind === 'OperationDefinition' &&
      definition.operation === 'subscription'
    );
  },
  wsLink,
  authLink.concat(httpLink)
);

const client = new ApolloClient({
  cache: new InMemoryCache(),
  link: splitLink,
});

ReactDOM.createRoot(document.getElementById('root')).render(
  <ApolloProvider client={client}>
    <App />
  </ApolloProvider>
);
```

> src/App.js

```js
import { useState } from 'react';
import { useQuery, useApolloClient, useSubscription } from '@apollo/client';
// ...
import { ALL_PERSONS, PERSON_ADDED } from './queries';

export const updateCache = (cache, query, addedPerson) => {
  const uniqByName = (a) => {
    let seen = new Set();
    return a.filter((item) => {
      let k = item.name;
      return seen.has(k) ? false : seen.add(k);
    });
  };

  cache.updateQuery(query, ({ allPersons }) => {
    return {
      allPersons: uniqByName(allPersons.concat(addedPerson)),
    };
  });
};

const App = () => {
  // ...

  useSubscription(PERSON_ADDED, {
    onData: ({ data }) => {
      const addedPerson = data.data.personAdded;
      notify(`${addedPerson.name} added`);

      updateCache(client.cache, { query: ALL_PERSONS }, addedPerson);
    },
  });

  // ...
};

export default App;
```

> src/components/PersonForm.js

```js
// ...
import { updateCache } from '../App';

const PersonForm = ({ setError }) => {
  // ...
  const [createPerson] = useMutation(CREATE_PERSON, {
    // ...
    update: (cache, response) => {
      updateCache(cache, { query: ALL_PERSONS }, response.data.addPerson);
    },
  });

  // ...
};

export default PersonForm;
```

#### Backend n+1 problem

> index.js

```js
// ...
mongoose
  .connect(MONGODB_URI)
  .then(() => {
    console.log('connected to MongoDB');
  })
  .catch((error) => {
    console.log('error connection to MongoDB:', error.message);
  });

mongoose.set('debug', true);
// ...
```

> schema.js

```js
const typeDefs = `
//...
type Person {
  name: String!
  phone: String
  address: Address!
  friendOf: [User!]!
  id: ID!
}
//...
`;
```

> models/person.js

```js
const schema = new mongoose.Schema({
  // ...
  friendOf: [
    {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'User',
    },
  ],
});
```

> resolvers.js

```js
const resolvers = {
  Query: {
    // ...
    allPersons: async (root, args, context) => {
      if (!args.phone) {
        return Person.find({}).populate('friendOf')
      }

      return Person.find({ phone: { $exists: args.phone === 'YES' } }).populate(
        'friendOf'
      )
    },
    // ...
  },
  Person: {
  // ...
    friendOf: async (root) => {
      return friends await User.find({ friends: { $in: [root._id] } })
    },
  },
  Mutation: {
    // ...
  },
 // ...
}
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

It is pretty common in GraphQL that multiple queries return similar results.

Subscriptions are radically different from anything we have seen in this course so far. Until now, all interaction between browser and server was due to a React application in the browser making HTTP requests to the server. GraphQL queries and mutations have also been done this way. With subscriptions, the situation is the opposite. After an application has made a subscription, it starts to listen to the server. When changes occur on the server, it sends a notification to all of its subscribers. Apollo uses WebSockets for server subscriber communication.

When queries and mutations are used, GraphQL uses the HTTP protocol in the communication. In case of subscriptions, the communication between client and server happens with WebSockets.

WebSockets are a perfect match for communication in the case of GraphQL subscriptions since when WebSockets are used, also the server can initiate the communication.

Programmers waste enormous amounts of time thinking about, or worrying about, the speed of noncritical parts of their programs, and these attempts at efficiency actually have a strong negative impact when debugging and maintenance are considered. We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil.

</details>

### Exercises:

#### 8.1-8.7, 8.13-8.16, 8.23, 8.26: Library backend

Description: We will implement a GraphQL backend for a small library. Implement queries allBooks, allAuthors, allBooks by genre and/or by auther. Implement mutation addBook and editAuthor. Change the library application so that it saves the data to a database. Complete the program so that database validation errors (e.g. book title or author name being too short) are handled sensibly. Add user management to your application with updating typeDefs, Ñreating/updating querys and mutations for it and to work with token. Implementation for subscription. Solved N+1 problem with queries.

Create an application according to the requirements described in [exercises 8.1-8.7](https://fullstackopen.com/en/part8/graph_ql_server#exercises-8-1-8-7), [exercises 8.13-8.16](https://fullstackopen.com/en/part8/database_and_user_administration#exercises-8-13-8-16), [exercises 8.23-8.26](https://fullstackopen.com/en/part8/fragments_and_subscriptions#exercises-8-23-8-26).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part8/library-backend)

#### 8.8-8.12, 8.17-8.22, 8.24-8.25: Library frontend

Description: We'll implement a frontend for the GraphQL library to the backend library project. Implement an Authors view to show the details of all authors on a page. Implement a Books view to show on a page all other details of all books except their genres. Implement a possibility to add new books to your application. Implement a possibility to set authors birth year and change the birth year form so that a birth year can be set only for an existing author. Implement login functionality. Implement a view which shows all the books based on the logged-in user's favourite genre. Implementation for subscription.

Create an application according to the requirements described in [exercises 8.8-8.12](https://fullstackopen.com/en/part8/react_and_graph_ql#exercises-8-8-8-12), [exercises 8.17-8.22](https://fullstackopen.com/en/part8/login_and_updating_the_cache#exercises-8-17-8-22), [exercises 8.23-8.26](https://fullstackopen.com/en/part8/fragments_and_subscriptions#exercises-8-23-8-26).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part8/library-frontend)

## Part 9: [TypeScript](https://fullstackopen.com/en/part9)

### Sub-part A: [Background and introduction](https://fullstackopen.com/en/part9/background_and_introduction)

<details>
<summary>Links:</summary>

<li><a href="https://www.typescriptlang.org/" title="TypeScript">TypeScript</a></li>
<li><a href="https://jsdoc.app/about-getting-started.html" title="JSDoc">JSDoc</a></li>
<li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" title="DefinitelyTyped">DefinitelyTyped</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html" title="TypeScript: Documantation">TypeScript: Documantation</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" title="TypeScript: Type Assertions"></a>TypeScript: Type Assertions</li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html" title="TypeScript: Narrowing">TypeScript: Narrowing</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Example of code with TypeScript

```ts
const birthdayGreeter = (name: string, age: number): string => {
  return `Happy birthday ${name}, you are now ${age} years old!`;
};

const birthdayHero: string = 'Jane User';
const age: number = 22;

console.log(birthdayGreeter(birthdayHero, age));
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

TypeScript is a programming language designed for large-scale JavaScript development created by Microsoft. To support building large-scale JavaScript applications, TypeScript offers features such as better development-time tooling, static code analysis, compile-time type checking and code-level documentation.

TypeScript consists of three separate, but mutually fulfilling parts:

- The language
- The compiler
- The language service

TypeScript key language features:

- Type annotations
- Structural typing
- Type inference
- Type erasure

TypeScript may have some advantages:

1. TypeScript offers type checking and static code analysis. We can require values to be of a certain type, and have the compiler warn about using them incorrectly. This can reduce runtime errors, and you might even be able to reduce the number of required unit tests in a project, at least concerning pure-type tests.
2. TypeScript is that the type annotations in the code can function as a type of code-level documentation. It's easy to check from a function signature what kind of arguments the function can consume and what type of data it will return. This form of type annotation-bound documentation will always be up to date and it makes it easier for new programmers to start working on an existing project.
3. TypeScript is that IDEs can provide more specific and smarter IntelliSense when they know exactly what types of data you are processing

All of these features are extremely helpful when you need to refactor your code

</details>

### Sub-part B: [First steps with TypeScript](https://fullstackopen.com/en/part9/first_steps_with_type_script)

<details>
<summary>Links:</summary>

<li><a href="https://code.visualstudio.com/" title="Visual Studio Code">Visual Studio Code</a></li>
<li><a href="https://github.com/TypeStrong/ts-node" title="Using the npm package ts-node">Using the npm package ts-node</a></li>
<li><a href="https://www.typescriptlang.org/play/index.html" title="TypeScript's official playground">TypeScript's official playground</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" title="TypeScript: What is a tsconfig.json">TypeScript: What is a tsconfig.json</a></li>
<li><a href="https://www.typescriptlang.org/tsconfig#noImplicitAny" title="TypeScript: No Implicit Any">TypeScript: No Implicit Any</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html" title="TypeScript: Everyday Types">TypeScript: Everyday Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#the-primitives-string-number-and-boolean" title="TypeScript: The primitives">TypeScript: The primitives</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" title="TypeScript: Union Types">TypeScript: Union Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#literal-types" title="TypeScript: Literal Types">TypeScript: Literal Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases" title="TypeScript: Type Aliases">TypeScript: Type Aliases</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch" title="JavaScript: switch">JavaScript: switch</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#new-unknown-top-type" title="TypeScript: New unknown top type">TypeScript: New unknown top type</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" title="JavaScript: Error">JavaScript: Error</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/message" title="JavaScript: Error message">JavaScript: Error message</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html" title="TypeScript: Narrowing">TypeScript: Narrowing</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#instanceof-narrowing" title="TypeScript: instanceof">TypeScript: instanceof</a></li>
<li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" title="Definitely Typed">Definitely Typed</a></li>
<li><a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json#peerdependencies" title="npm Docs: peerDependencies">npm Docs: peerDependencies</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#arrays" title="TypeScript: Arrays">TypeScript: Arrays</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#interfaces" title="TypeScript: Interfaces">TypeScript: Interfaces</a></li>
<li><a href="https://typescript-eslint.io/rules/array-type/#array-simple" title="TypeScript-Eslint: array-simple">TypeScript-Eslint array-simple</a></li>
<li><a href="https://www.typescriptlang.org/tsconfig#noImplicitAny" title="TypeScript: noImplicitAny">TypeScript: noImplicitAny</a></li>
<li><a href="https://en.wikipedia.org/wiki/Body_mass_index" title="Body mass index">Body mass index</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" title="JavaScript modules">JavaScript modules</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/modules.html" title="TypeScript: Modules">TypeScript: Modules</a></li>
<li><a href="https://www.typescriptlang.org/tsconfig" title="TypeScript configurations for tsconfig">TypeScript configurations in tsconfig</a></li>
<li><a href="http://json.schemastore.org/tsconfig" title="Schema definition for tsconfig">Schema definition for tsconfig</a></li>
<li><a href="https://en.wikipedia.org/wiki/Query_string" title="Query string">Query string</a></li>
<li><a href="https://expressjs.com/en/5x/api.html#req.query" title="Express: query">Express: query</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#any" title="TypeScript: any">TypeScript: any</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/Number" title="JavaScript: Number">JavaScript: Number</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" title="TypeScript: type assertion">TypeScript: type assertion</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Install both ts-node and the official typescript package globally

> npm install -g ts-node typescript

Install the dependencies in project after init (if ts is npt installed globally)

> npm init

> npm install --save-dev ts-node typescript

Setting up scripts

> package.json

```js
{
  // ..
  "scripts": {
    "ts-node": "ts-node"
  },
  // ..
}
```

configuration file for typescript

> tsconfig.json

```json
{
  "compilerOptions": {
    "noImplicitAny": false
  }
}
```

> multiplier.ts

```ts
const multiplicator = (a, b, printText) => {
  console.log(printText, a * b);
};

multiplicator(2, 4, 'Multiplied numbers 2 and 4, the result is:');
```

If you want to run file.ts with ts-node

> npm run ts-node -- multiplier.ts

Installing an npm package with the name of your package with a @types/ prefix

> npm install --save-dev @types/react @types/express @types/lodash @types/jest @types/mongoose

If the version of npm is at least 7.0, the peer dependencies of a project are automatically installed by npm.

> npm install --save-dev @types/node

Specify the following configurations

> tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noImplicitAny": true,
    "esModuleInterop": true,
    "moduleResolution": "node"
  }
}
```

Install Express

> npm install express

Add index file fith express server

> index.ts

```ts
import express from 'express';

import { calculator, Operation } from './calculator';

const app = express();

app.use(express.json());

app.post('/calculate', (req, res) => {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
  const { value1, value2, op } = req.body;

  if (!value1 || isNaN(Number(value1))) {
    return res.status(400).send({ error: 'value1 is wrong' });
  }

  if (!value2 || isNaN(Number(value1))) {
    return res.status(400).send({ error: 'value2 is wrong' });
  }

  if (!op) {
    return res.status(400).send({ error: 'op is wrong' });
  }

  //const result = calculator(value1, value2, op);
  const result = calculator(Number(value1), Number(value2), op as Operation);
  return res.send({ result });
});

app.get('/ping', (_req, res) => {
  res.send('pong');
});

const PORT = 3003;

app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
```

To install auto-reloading fot TS like nodemon

> npm install --save-dev ts-node-dev

```ts
{
  // ...
  "scripts": {
      // ...
      "start": "ts-node index.ts",
      "dev": "ts-node-dev index.ts",
  },
  // ...
}
```

#### ESlint

Install ESlint and its TypeScript extensions

> npm install --save-dev eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser

configure ESlint to disallow explicit any

> .eslintrc

```js
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking"
  ],
  "plugins": ["@typescript-eslint"],
  "env": {
    "node": true,
    "es6": true
  },
  "rules": {
    "@typescript-eslint/semi": ["error"],
    "@typescript-eslint/explicit-function-return-type": "off",
    "@typescript-eslint/explicit-module-boundary-types": "off",
    "@typescript-eslint/restrict-template-expressions": "off",
    "@typescript-eslint/restrict-plus-operands": "off",
    "@typescript-eslint/no-unused-vars": [
      "error",
      { "argsIgnorePattern": "^_" }
    ],
    "no-case-declarations": "off"
  },
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "project": "./tsconfig.json"
  }
}
```

Let us also set up a lint npm script to inspect the files with .ts extension

> package.json

```js
{
  // ...
  "scripts": {
      //...
      "lint": "eslint --ext .ts ."
  },
  // ...
}
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

The tsconfig.json file is used to define how the TypeScript compiler should interpret the code, how strictly the compiler should work, which files to watch or ignore, and much more

If we not use variable in TS "req" we may to rename it with undersore "\_req" and IDE will not show error.

</details>

### Sub-part C: [Typing an Express app](https://fullstackopen.com/en/part9/typing_an_express_app)

<details>
<summary>Links:</summary>

<li><a href="https://www.staging-typescript.org/tsconfig#noImplicitAny" title="Typescript: noImplicitAny">Typescript: noImplicitAny</a></li>
<li><a href="https://www.staging-typescript.org/tsconfig#strict" title="Typescript: strict">Typescript: strict</a></li>
<li><a href="https://www.staging-typescript.org/tsconfig#esModuleInterop" title="Typescript: esModuleInterop">Typescript: esModuleInterop</a></li>
<li><a href="https://en.wikipedia.org/wiki/Domain-driven_design" title="Domain-driven design">Domain-driven design</a></li>
<li><a href="https://spring.io/" title="Java: Spring">Java: Spring</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" title="Typescript: Union">Typescript: Union</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#interfaces" title="Typescript: Interfaces">Typescript: Interfaces</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" title="Typescript: Type Assertions">Typescript: Type Assertions</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/interfaces.html#optional-properties" title="Typescript: Optional Properties">Typescript: Optional Properties</a></li>
<li><a href="https://nodejs.org/api/modules.html#modules_file_modules" title="NodeJS: File modules">NodeJS: File modules</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#picktype-keys" title="Typescript: Pick">Typescript: Pick</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys" title="Typescript: Omit">Typescript: Omit</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases" title="Typescript: Type Aliases">Typescript: Type Aliases</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/type-compatibility.html" title="Typescript: Type Compatibility">Typescript: Type Compatibility</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" title="Typescript: Utility Types">Typescript: Utility Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown" title="Typescript: Unknown">Typescript: Unknown</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" title="Typescript: Using type predicates">Typescript: Using type predicates</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html" title="Typescript: Narrowing">Typescript: Narrowing</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/enums.html" title="Typescript: Enum">Typescript: Enum</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#the-in-operator-narrowing" title="Typescript: The 'in' operator narrowing">Typescript: The 'in' operator narrowing</a></li>
<li><a href="https://github.com/uuidjs/uuid" title="uuid">uuid</a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Setting up the project

> npm init

> npm install typescript --save-dev

> package.json

```json
{
  // ..
  "scripts": {
    "tsc": "tsc"
  }
  // ..
}
```

> npm run tsc -- --init

> tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES6",
    "outDir": "./build/",
    "module": "commonjs",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "esModuleInterop": true,
    "resolveJsonModule": true
  }
}
```

Installing express

> npm install express

> npm install --save-dev eslint @types/express @typescript-eslint/eslint-plugin @typescript-eslint/parser

Configure ESlint to disallow explicit any

> .eslintrc

```json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking"
  ],
  "plugins": ["@typescript-eslint"],
  "env": {
    "browser": true,
    "es6": true,
    "node": true
  },
  "rules": {
    "@typescript-eslint/semi": ["error"],
    "@typescript-eslint/explicit-function-return-type": "off",
    "@typescript-eslint/explicit-module-boundary-types": "off",
    "@typescript-eslint/restrict-template-expressions": "off",
    "@typescript-eslint/restrict-plus-operands": "off",
    "@typescript-eslint/no-unsafe-member-access": "off",
    "@typescript-eslint/no-unused-vars": [
      "error",
      { "argsIgnorePattern": "^_" }
    ],
    "no-case-declarations": "off"
  },
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "project": "./tsconfig.json"
  }
}
```

Set up our development environment

> npm install --save-dev ts-node-dev

> npm install cors

> npm install --save-dev @types/cors

Update structure and files:

<pre>
. project
âââ build
âââ data
|  âââ dataName.ts
âââ src
|  âââ routes
|  |   âââ routName.ts
|  âââ servives
|  |   âââ serviseNameService.js
|  âââ utils.ts
|  âââ types.ts
|  âââ index.ts
âââ .eslintignore
âââ .eslintrc
âââ .gitignore
âââ README.md
âââ package-lock.json
âââ package.json
âââ tsconfig.json
</pre>

> package.json

> package.json

```json
{
  // ...
  "scripts": {
    "tsc": "tsc",
    "dev": "ts-node-dev src/index.ts",
    "lint": "eslint --ext .ts .",
    "start": "node build/index.js"
  }
  // ...
}
```

Create types for data

> src/types.ts

```ts
export enum Weather {
  Sunny = 'sunny',
  Rainy = 'rainy',
  Cloudy = 'cloudy',
  Stormy = 'stormy',
  Windy = 'windy',
}

export enum Visibility {
  Great = 'great',
  Good = 'good',
  Ok = 'ok',
  Poor = 'poor',
}

export interface DiaryEntry {
  id: number;
  date: string;
  weather: Weather;
  visibility: Visibility;
  comment: string;
}

export type NonSensitiveDiaryEntry = Omit<DiaryEntry, 'comment'>;

export type NewDiaryEntry = Omit<DiaryEntry, 'id'>;
```

Create parser for data

> src/utils.ts

```ts
import { NewDiaryEntry, Visibility, Weather } from './types';

const isString = (text: unknown): text is string => {
  return typeof text === 'string' || text instanceof String;
};

const parseComment = (comment: unknown): string => {
  if (!comment || !isString(comment)) {
    throw new Error('Incorrect or missing comment');
  }

  return comment;
};

const isDate = (date: string): boolean => {
  return Boolean(Date.parse(date));
};

const parseDate = (date: unknown): string => {
  if (!isString(date) || !isDate(date)) {
    throw new Error('Incorrect or missing date: ' + date);
  }
  return date;
};

const isWeather = (param: string): param is Weather => {
  return Object.values(Weather)
    .map((v) => v.toString())
    .includes(param);
};

const parseWeather = (weather: unknown): Weather => {
  if (!isString(weather) || !isWeather(weather)) {
    throw new Error('Incorrect or missing weather: ' + weather);
  }
  return weather;
};

const isVisibility = (param: string): param is Visibility => {
  return Object.values(Visibility)
    .map((v) => v.toString())
    .includes(param);
};

const parseVisibility = (visibility: unknown): Visibility => {
  if (!isString(visibility) || !isVisibility(visibility)) {
    throw new Error('Incorrect or missing visibility: ' + visibility);
  }
  return visibility;
};

const toNewDiaryEntry = (object: unknown): NewDiaryEntry => {
  if (!object || typeof object !== 'object') {
    throw new Error('Incorrect or missing data');
  }

  if (
    'comment' in object &&
    'date' in object &&
    'weather' in object &&
    'visibility' in object
  ) {
    const newEntry: NewDiaryEntry = {
      weather: parseWeather(object.weather),
      visibility: parseVisibility(object.visibility),
      date: parseDate(object.date),
      comment: parseComment(object.comment),
    };

    return newEntry;
  }

  throw new Error('Incorrect data: some fields are missing');
};

export default toNewDiaryEntry;
```

Create file for keep data

> data/entries.ts

```ts
import { DiaryEntry } from '../src/types';
import toNewDiaryEntry from '../src/utils';

const data = [
  {
    'id': 1,
    'date': '2017-01-01',
    'weather': 'rainy',
    'visibility': 'poor',
    'comment': "Pretty scary flight, I'm glad I'm alive",
  },
  // ...
];

const diaryEntries: DiaryEntry[] = data.map((obj) => {
  const object = toNewDiaryEntry(obj) as DiaryEntry;
  object.id = obj.id;
  return object;
});

export default diaryEntries;
```

Create servise for work with data

> src/services/diaryService.ts

```ts
import { NewDiaryEntry, NonSensitiveDiaryEntry, DiaryEntry } from '../types';
import diaries from '../../data/entries';

const getEntries = (): DiaryEntry[] => {
  return diaries;
};

const getNonSensitiveEntries = (): NonSensitiveDiaryEntry[] => {
  return diaries.map(({ id, date, weather, visibility }) => ({
    id,
    date,
    weather,
    visibility,
  }));
};

const addDiary = (entry: NewDiaryEntry): DiaryEntry => {
  const newDiaryEntry = {
    id: Math.max(...diaries.map((d) => d.id)) + 1,
    ...entry,
  };

  diaries.push(newDiaryEntry);
  return newDiaryEntry;
};

const findById = (id: number): DiaryEntry | undefined => {
  const entry = diaries.find((d) => d.id === id);
  return entry;
};

export default {
  getEntries,
  getNonSensitiveEntries,
  addDiary,
  findById,
};
```

Create the route for CRUD data

> src/routes/diaries.ts

```ts
import express from 'express';

import diaryService from '../services/diaryService';
import toNewDiaryEntry from '../utils';

const router = express.Router();

router.get('/', (_req, res) => {
  res.send(diaryService.getNonSensitiveEntries());
});

router.post('/', (req, res) => {
  try {
    const newDiaryEntry = toNewDiaryEntry(req.body);

    const addedEntry = diaryService.addDiary(newDiaryEntry);
    res.json(addedEntry);
  } catch (error: unknown) {
    let errorMessage = 'Something went wrong.';
    if (error instanceof Error) {
      errorMessage += ' Error: ' + error.message;
    }
    res.status(400).send(errorMessage);
  }
});

router.get('/:id', (req, res) => {
  const diary = diaryService.findById(Number(req.params.id));

  if (diary) {
    res.send(diary);
  } else {
    res.sendStatus(404);
  }
});

export default router;
```

Create server with adding data API endpoints

> src/index.ts

```ts
import express from 'express';
import diaryRouter from './routes/diaries';

const app = express();
const PORT = 3000;

app.use(express.json());

app.get('/ping', (_req, res) => {
  console.log('someone pinged here');
  res.send('pong');
});

app.use('/api/diaries', diaryRouter);

app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

</details>

### Sub-part D: [React with types](https://fullstackopen.com/en/part9/react_with_types)

<details>
<summary>Links:</summary>

<li><a href="https://vitejs.dev/" title="Vite">Vite</a></li>
<li><a href="https://www.typescriptlang.org/tsconfig#lib" title="TypeScript: Lib">TypeScript: Lib</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#non-null-assertion-operator-postfix-" title="TypeScript: Non-null Assertion Operator">TypeScript: Non-null Assertion Operator</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#literal-types" title="TypeScript: Literal Types">TypeScript: Literal Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" title="TypeScript: Union Types">TypeScript: Union Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/objects.html#extending-types" title="TypeScript: Extending Types">TypeScript: Extending Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#working-with-union-types" title="TypeScript: Working with Union Types">TypeScript: Working with Union Types</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#discriminated-unions" title="TypeScript: Discriminated unions">TypeScript: Discriminated unions</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#exhaustiveness-checking" title="TypeScript: Exhaustiveness checking">TypeScript: Exhaustiveness checking</a></li>
<li><a href="https://codewithstyle.info/Using-React-useState-hook-with-TypeScript/" title="React useState Hook with TypeScript: The Complete Guide">React useState Hook with TypeScript: The Complete Guide</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/type-inference.html#handbook-content" title="TypeScript: Type Inference">TypeScript: Type Inference</a></li>
<li><a href="https://react-typescript-cheatsheet.netlify.app/" title="React TypeScript Cheatsheet">React TypeScript Cheatsheet</a></li>
<li><a href="https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/hooks/#usestate" title="React TypeScript Cheatsheet: useState">React TypeScript Cheatsheet: useState</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/generics.html#working-with-generic-type-variables" title="TypeScript: Generic Type Variables">TypeScript: Generic Type Variables</a></li>
<li><a href="https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/forms_and_events/" title="React TypeScript Cheatsheet: Forms and Events">React TypeScript Cheatsheet: Forms and Events</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#interfaces" title="TypeScript: Interfaces">TypeScript: Interfaces</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases" title="TypeScript: Type Aliases">TypeScript: Type Aliases</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#differences-between-type-aliases-and-interfaces" title="TypeScript: Differences Between Type Aliases and Interfaces">TypeScript: Differences Between Type Aliases and Interfaces</a></li>
<li><a href="" title=""></a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Create a TypeScript app using Vite

> npm create vite@latest my-app-name -- --template react-ts

#### interface extends and kind

Create types file with interfaces that are inherited.

> src/types.ts

```ts
interface CoursePartBase {
  name: string;
  exerciseCount: number;
}

interface CoursePartBasic extends CoursePartBase {
  description: string;
  kind: 'basic';
}

interface CoursePartGroup extends CoursePartBase {
  groupProjectCount: number;
  kind: 'group';
}

interface CoursePartBackground extends CoursePartBase {
  description: string;
  backgroundMaterial: string;
  kind: 'background';
}

export type CoursePart =
  | CoursePartBasic
  | CoursePartGroup
  | CoursePartBackground;
```

Create assert function to check types

> src/utils.ts

```ts
export const assertNever = (value: never): never => {
  throw new Error(
    `Unhandled discriminated union member: ${JSON.stringify(value)}`
  );
};
```

Create App to work with different types

> src/App.ts

```ts
import { CoursePart } from './types';
import { assertNever } from './utils';

const App = () => {
  const courseParts: CoursePart[] = [
    {
      name: 'Fundamentals',
      exerciseCount: 10,
      description: 'This is an awesome course part',
      kind: 'basic',
    },
    {
      name: 'Using props to pass data',
      exerciseCount: 7,
      groupProjectCount: 3,
      kind: 'group',
    },
    {
      name: 'Basics of type Narrowing',
      exerciseCount: 7,
      description: 'How to go from unknown to string',
      kind: 'basic',
    },
    {
      name: 'Deeper type usage',
      exerciseCount: 14,
      description: 'Confusing description',
      backgroundMaterial:
        'https://type-level-typescript.com/template-literal-types',
      kind: 'background',
    },
  ];

  courseParts.forEach((part: CoursePart) => {
    switch (part.kind) {
      case 'basic':
        console.log(part.name, part.exerciseCount, part.description);
        break;
      case 'group':
        console.log(part.name, part.exerciseCount, part.groupProjectCount);
        break;
      case 'background':
        console.log(
          part.name,
          part.exerciseCount,
          part.description,
          part.backgroundMaterial
        );
        break;
      default:
        return assertNever(part);
    }
  });

  return <div>App</div>;
};

export default App;
```

#### Note app with backend

Create a TypeScript app using Vite and run the server.

> npm create vite@latest notesApp -- --template react-ts

> cd notesApp
> npm install
> npm run dev

Create JSON server with data in another terminal

> npm install json-server --save-dev

Added json file-database in root of the project

> db.json

```js
{
  "notes": [
    {
      "id": 1,
      "content": "HTML is easy",
      "important": true
    },
    {
      "id": 2,
      "content": "Browser can execute only JavaScript",
      "important": false
    },
    {
      "id": 3,
      "content": "GET and POST are the most important methods of HTTP protocol",
      "important": true
    }
  ]
}
```

> package.json

```js
"scripts": {
  // ...
  "server": "json-server -p3001 --watch db.json"
}
```

Install axios and run the server

> npm install axios

> npm run server

Delete everything in 'src' folder except 'main.tsx' and 'App.tsx'

Update main, create the file to keep types, create the servive to work with backend and update App.ts.

> src.main.tsx

```ts
import ReactDOM from 'react-dom/client';
import App from './App.tsx';

ReactDOM.createRoot(document.getElementById('root')!).render(<App />);
```

> src/types.ts

```ts
export interface Note {
  id: number;
  content: string;
}

export type NewNote = Omit<Note, 'id'>;
```

> src/services/noteService.ts

```ts
import axios from 'axios';

import { Note, NewNote } from '../types';

const baseUrl = 'http://localhost:3001/notes';

export const getAllNotes = () => {
  return axios.get<Note[]>(baseUrl).then((response) => response.data);
};

export const createNote = (object: NewNote) => {
  return axios.post<Note>(baseUrl, object).then((response) => response.data);
};
```

> src/App.ts

```ts
import { useState, useEffect } from 'react';

import { Note } from './types';
import { getAllNotes, createNote } from './services/noteService';

const App = (): JSX.Element => {
  const [notes, setNotes] = useState<Note[]>([]);
  const [newNote, setNewNote] = useState('');

  useEffect(() => {
    getAllNotes().then((data) => {
      setNotes(data);
    });
  }, []);

  const noteCreation = (event: React.SyntheticEvent) => {
    event.preventDefault();
    createNote({ content: newNote }).then((data) => {
      setNotes(notes.concat(data));
    });
    setNewNote('');
  };

  return (
    <div>
      <form onSubmit={noteCreation}>
        <input
          value={newNote}
          onChange={(event) => setNewNote(event.target.value)}
        />
        <button type='submit'>add</button>
      </form>
      <ul>
        {notes.map((note) => (
          <li key={note.id}>{note.content}</li>
        ))}
      </ul>
    </div>
  );
};

export default App;
```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

TypeScript will help us catch the following errors:

- Trying to pass an extra/unwanted prop to a component
- Forgetting to pass a required prop to a component
- Passing a prop with the wrong type to a component

If we make any of these errors, TypeScript can help us catch them in our editor right away. If we didn't use TypeScript, we would have to catch these errors later during testing.

TypeScript will only allow an operation (or attribute access) if it is valid for every member of the union.

In most cases, you can use either type or interface, whichever syntax you prefer. However, there are a few things to keep in mind. For example, if you define multiple interfaces with the same name, they will result in a merged interface, whereas if you try to define multiple types with the same name, it will result in an error stating that a type with the same name is already declared.

</details>

### Sub-part E: [Grande finale: Patientor](https://fullstackopen.com/en/part9/grande_finale_patientor)

<details>
<summary>Links:</summary>

<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>
<li><a href="" title=""></a></li>

</details>

<details>
<summary>Ð¡ommands and fragments:</summary>

Text

>

```js

```

</details>

<details>
<summary>Ð¡oncepts and definitions:</summary>

</details>

### Exercises:

#### 9.1-9.7: Calculators

Description: Create the project in an empty directory with npm init and install the ts-node and typescript packages. Also, create the file tsconfig.json in the directory. Create the code of this exercise in the file bmiCalculator.ts with a function calculateBmi that calculates a BMI. Create the code of this exercise in file exerciseCalculator.ts with a function calculateExercises. Add Express to your dependencies and create an HTTP GET endpoints: hello, bmi, exercises. Configure your project to use the above ESlint settings and fix all the warnings.

Create an application according to the requirements described in [exercises 9.1-9.3](https://fullstackopen.com/en/part9/first_steps_with_type_script#exercises-9-1-9-3), [exercises 9.4-9.5](https://fullstackopen.com/en/part9/first_steps_with_type_script#exercises-9-4-9-5),[exercises 9.6-9.7](https://fullstackopen.com/en/part9/first_steps_with_type_script#exercises-9-6-9-7).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part9/calculator)

#### 9.1-9.13: Patientor

Description: Initialize a new backend project that will work with the frontend. Configure ESlint and tsconfig with the same configurations as proposed in the material. Define an endpoint that answers HTTP GET requests for route /api/ping. Create a type Diagnosis and use it to create endpoint /api/diagnoses for fetching all diagnoses with HTTP GET. Create data type Patient and set up the GET endpoint /api/patients which returns all the patients to the frontend, excluding field ssn. Create a POST endpoint /api/patients for adding patients. Set up safe parsing, validation and type predicate to the POST /api/patients request.

Create an application according to the requirements described in [exercises 9.8-9.9](https://fullstackopen.com/en/part9/typing_an_express_app#exercises-9-8-9-9), [exercises 9.10-9.11](https://fullstackopen.com/en/part9/typing_an_express_app#exercises-9-10-9-11), [exercises 9.12-9.13](https://fullstackopen.com/en/part9/typing_an_express_app#exercises-9-12-9-13).

- [x] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part9/patientor)

#### 9.14-9.15: Course info

Description: Create a new Vite app with TypeScript. This exercise is similar to the one you have already done in Part 1 of the course (Course info), but with TypeScript and some extra tweaks. Extending the app with adding the type information and to declare a new interfaces (extends). Create a component Part that renders all attributes of each type of course part. Add another course part interface.

Create an application according to the requirements described in [exercise 9.14](https://fullstackopen.com/en/part9/react_with_types#exercise-9-14), [exercise 9.15](https://fullstackopen.com/en/part9/react_with_types#exercise-9-15).

- [ ] [Exercise is done](https://github.com/CaH4o/fullstackopen/tree/main/part9/courseinfo)
